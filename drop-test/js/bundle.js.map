{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./#src/js/script.js","webpack:///./node_modules/fine-uploader/fine-uploader/fine-uploader.js","webpack:///./node_modules/fine-uploader/lib/traditional.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","FineUploader","element","document","getElementById","template","request","endpoint","thumbnails","placeholders","waitingPath","notAvailablePath","validation","allowedExtensions","global","qq","hide","style","display","this","attach","type","fn","addEventListener","attachEvent","detach","removeEventListener","detachEvent","contains","descendant","compareDocumentPosition","insertBefore","elementB","parentNode","remove","removeChild","css","styles","Error","opacity","filters","filter","Math","round","extend","hasClass","considerParent","re","RegExp","test","className","addClass","removeClass","replace","getByClass","first","candidates","result","querySelector","querySelectorAll","getElementsByTagName","each","idx","val","push","getFirstByClass","children","child","firstChild","nodeType","nextSibling","setText","text","innerText","textContent","clearText","hasAttribute","attrName","attrVal","exec","getAttribute","undefined","ExifRestorer","div","canvasToBlob","canvas","mime","quality","dataUriToBlob","toDataURL","dataUri","arrayBuffer","byteString","intArray","mimeString","data","BlobBuilder","blobBuilder","split","indexOf","atob","decodeURI","ArrayBuffer","length","Uint8Array","character","charCodeAt","window","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","Blob","log","message","level","console","isObject","variable","toString","isFunction","isArray","buffer","constructor","isItemList","maybeItemList","isNodeList","maybeNodeList","item","namedItem","isString","maybeString","trimStr","string","String","trim","format","str","args","Array","slice","arguments","newStr","nextIdxToReplace","strBefore","substring","strAfter","isFile","maybeFile","File","isFileList","maybeFileList","FileList","isFileOrInput","maybeFileOrInput","isInput","maybeInput","notFile","evaluateType","normalizedType","toLowerCase","HTMLInputElement","tagName","isBlob","maybeBlob","isXhrUploadSupported","input","createElement","multiple","FormData","createXhrInstance","upload","XMLHttpRequest","ActiveXObject","error","isFolderDropSupported","dataTransfer","items","webkitGetAsEntry","isFileChunkingSupported","androidStock","webkitSlice","mozSlice","sliceBlob","fileOrBlob","start","end","arrayBufferToHex","bytesAsHex","bytes","byt","byteAsHexStr","readBlobToHex","blob","startOffset","initialBlob","fileReader","FileReader","promise","Promise","onload","success","onerror","failure","readAsArrayBuffer","second","extendNested","prop","override","target","sourceFn","super_","source","srcPropName","srcPropVal","arr","elt","from","len","getUniqueId","random","ie","navigator","userAgent","ie7","ie8","ie10","ie11","edge","safari","vendor","chrome","opera","firefox","windows","platform","android","ios6","ios","ios7","ios8","ios800","iosChrome","iosSafari","iosSafariWebView","preventDefault","e","returnValue","toElement","html","innerHTML","iterableItem","callback","keyOrIndex","Storage","getItem","charAt","oldFunc","context","newArgs","concat","apply","obj2url","obj","temp","prefixDone","uristrings","prefix","add","nextObj","nextTemp","encodeURIComponent","join","obj2FormData","formData","arrayKeyName","obj2Inputs","form","setAttribute","appendChild","parseJson","json","JSON","parse","eval","getExtension","filename","extIdx","lastIndexOf","substr","getFilename","blobOrFileInput","fileName","DisposeSupport","disposers","dispose","disposer","shift","addDisposer","disposeFunction","version","supportedFeatures","supportsUploading","supportsUploadingBlobs","supportsFileDrop","supportsAjaxFileUploading","supportsFolderDrop","supportsChunking","supportsResume","supportsUploadViaPaste","supportsUploadCors","supportsDeleteFileXdr","supportsDeleteFileCorsXhr","supportsDeleteFileCors","supportsFolderSelection","supportsImagePreviews","supportsUploadProgress","span","isCrossOriginXhrSupported","withCredentials","isXdrSupported","XDomainRequest","tempInput","supported","disabled","ex","testSupportsFileInputElement","localStorage","setItem","isLocalStorageSupported","match","postMessage","webkitdirectory","ajaxUploading","blobUploading","canDetermineSize","chunking","deleteFileCors","deleteFileCorsXdr","deleteFileCorsXhr","dialogElement","HTMLDialogElement","fileDrop","folderDrop","folderSelection","imagePreviews","imageValidation","itemSizeValidation","pause","progressBar","resume","scaling","tiffPreviews","unlimitedScaledImageSize","uploading","uploadCors","uploadCustomHeaders","uploadNonMultipart","uploadViaPaste","isGenericPromise","maybePromise","then","successArgs","failureArgs","successCallbacks","failureCallbacks","doneCallbacks","state","onSuccess","onFailure","done","BlobProxy","referenceBlob","onCreate","UploadButton","buttonId","self","disposeSupport","options","acceptFiles","focusClass","folders","hoverClass","ios8BrowserCrashWorkaround","onChange","title","createInput","BUTTON_ID_ATTR_NAME","setMultiple","position","right","top","fontFamily","fontSize","margin","padding","cursor","height","overflow","direction","getInput","getButtonId","isMultiple","optInput","removeAttribute","setAcceptFiles","reset","UploadData","uploaderProxy","byUuid","byStatus","byProxyGroupId","byBatchId","getDataByIds","idOrIds","entries","id","addFile","spec","status","SUBMITTING","originalName","uuid","size","file","batchId","proxyGroupId","onBeforeStatusChange","onStatusChange","retrieve","optionalFilter","uuids","getDataByUuids","statusResults","statuses","index","statusEnum","statusResultIndexes","dataIndex","removeFileRef","record","setStatus","newStatus","oldStatus","byStatusOldStatusIndex","splice","uuidChanged","newUuid","oldUuid","updateName","newName","updateSize","newSize","setParentId","targetId","parentId","getIdsInProxyGroup","getIdsInBatch","SUBMITTED","REJECTED","QUEUED","CANCELED","PAUSED","UPLOADING","UPLOAD_FINALIZING","UPLOAD_RETRYING","UPLOAD_SUCCESSFUL","UPLOAD_FAILED","DELETE_FAILED","DELETING","DELETED","basePublicApi","addBlobs","blobDataOrArray","params","addFiles","addInitialFiles","cannedFileList","cannedFile","_addCannedFile","_maybeHandleIos8SafariWorkaround","_storedIds","_currentBatchId","processBlob","_handleNewFile","_options","blobs","defaultName","verifiedFiles","processBlobData","blobData","processCanvas","processCanvasData","canvasData","normalizedQuality","processFileOrInput","fileOrInput","files","fileContainer","_prepareItemsForUpload","cancel","uploadData","_uploadData","getName","_handler","cancelAll","storedIdsCopy","storedFileId","clearStoredFiles","continueUpload","enabled","_uploadFile","deleteFile","_onSubmitDelete","doesExist","fileOrBlobId","isValid","drawThumbnail","fileId","imgOrCanvas","maxSize","fromServer","customResizeFunction","fileOrUrl","promiseToReturn","_imageGenerator","_thumbnailUrls","scale","getFile","container","generate","modifiedContainer","reason","getButton","_getButton","_buttonIdsForFileIds","getEndpoint","_endpointStore","uploadDataRecord","getInProgress","getParentId","uploadDataEntry","getUploads","getResumableFilesData","getSize","getNetUploads","_netUploaded","getRemainingAllowedItems","allowedItems","_currentItemLimit","_netUploadedOrQueued","getUuid","isResumable","hasResumeRecord","debug","pauseUpload","expunge","_autoRetries","_retryTimeouts","_preventRetries","_buttons","button","_paramsStore","_pasteHandler","session","refreshOnReset","_refreshSessionData","_succeededSinceLastAllComplete","_failedSinceLastAllComplete","_totalProgress","_customResumeDataStore","retry","_manualRetry","scaleImage","specs","Scaler","setCustomHeaders","headers","_customHeadersStore","set","setCustomResumeData","setDeleteFileCustomHeaders","_deleteFileCustomHeadersStore","setDeleteFileEndpoint","_deleteFileEndpointStore","setDeleteFileParams","_deleteFileParamsStore","setEndpoint","setForm","elementOrId","_updateFormSupportAndParams","setItemLimit","newItemLimit","setName","setParams","setUuid","_onDeleteComplete","errorMessage","uploadStoredFiles","_itemError","_uploadStoredFiles","basePrivateApi","sessionData","deleteFileEndpoint","deleteFileParams","thumbnailUrl","_annotateWithButtonId","associatedInput","qqButtonId","_getButtonId","_batchError","callbacks","onError","_createDeleteHandler","DeleteFileAjaxRequester","method","toUpperCase","maxConnections","uuidParamName","uuidName","customHeaders","paramsStore","endpointStore","cors","onDelete","_onDelete","onDeleteComplete","xhrOrXdr","isError","_createPasteHandler","PasteSupport","targetElement","paste","pasteReceived","_handleCheckedCallback","onPasteReceived","_handlePasteSuccess","identifier","_createStore","initialValue","_readOnlyValues_","store","catchall","perIdReadOnlyValues","readOnlyValues","copy","orig","includeReadOnlyValues","existing","values","addReadOnly","_createUploadDataTracker","_onUploadStatusChange","_maybeAllComplete","setTimeout","_createUploadButton","accept","classes","buttonFocus","buttonHover","workarounds","ios8BrowserCrash","iosEmptyVideos","_isAllowedExtension","inputName","_onInputChange","fileInputTitle","_disposeSupport","_createUploadHandler","additionalOptions","namespace","lastOnProgress","preventRetryParam","preventRetryResponseProperty","onProgress","loaded","total","_onProgress","onComplete","xhr","retVal","_onComplete","onCancel","cancelFinalizationEffort","_onCancel","onUploadPrep","_onUploadPrep","onUpload","_onUpload","onUploadResult","onUploadChunk","chunkData","_onUploadChunk","onUploadChunkResult","partIndex","onUploadChunkSuccess","_onUploadChunkSuccess","onResume","customResumeData","onAutoRetry","responseJSON","_onAutoRetry","onUuidChanged","setSize","_setSize","getDataByUuid","isQueued","isInProgress","getCustomResumeData","_getCustomResumeData","UploadHandlerController","_fileOrBlobRejected","_formatSize","sizeSymbols","max","toFixed","_generateExtraButtonSpecs","_extraButtonSpecs","extraButtons","extraButtonOptionEntry","extraButtonSpec","_initExtraButton","extraButtonsSpec","_defaultButtonId","buttonOrFileInputOrFile","inputs","fileInput","fileBlobOrInput","_getNotFinished","_getValidationBase","_getValidationDescriptor","fileWrapper","_getValidationDescriptors","fileWrappers","fileDescriptors","_handleCameraAccess","camera","optionRoot","details","callbackRetVal","successParam","newFileWrapperList","actualFile","handler","_customNewFileHandler","_handleNewFileGeneric","addFileToHandler","_trackButton","fileList","extSuppliedName","extension","_handleDeleteSuccess","_handleDeleteFailed","_initFormSupportAndParams","_formSupport","FormSupport","attachedToForm","getFormInputsAsObject","autoUpload","newAutoUpload","newEndpoint","_isDeletePossible","expected","allowXdr","allowed","valid","allowedExt","extRegex","code","maybeNameOrNames","extensionsForMessage","placeholderMatch","messages","names","validationBase","replacement","allowedExtension","formatFileName","sizeLimit","minSizeLimit","placeholder","_onBeforeManualRetry","notFinished","_onAllComplete","ios8SafariUploads","alert","unsupportedBrowserIos8Safari","_maybeParseAndSendUploadError","response","errorReason","defaultResponseError","_maybeProcessNextItemAfterOnValidateCallback","validItem","stopOnFirstInvalidFile","validationDescriptor","onValidate","_onValidateCallbackSuccess","_onValidateCallbackFailure","successful","failed","onAllComplete","_shouldAutoRetry","retryWaitPeriod","autoAttemptDelay","_onBeforeAutoRetry","itemLimit","onManualRetry","clearTimeout","storedItemIndex","fileIndex","onIndividualProgress","_onSubmit","_onSubmitCallbackSuccess","_onSubmitted","onSubmitted","_storeForLater","onSuccessCallback","additionalMandatedParams","adjustedOnSuccessCallback","onSubmitDelete","_deleteHandler","sendDelete","_onTotalProgress","onTotalProgress","enableAuto","_onValidateBatchCallbackFailure","_onValidateBatchCallbackSuccess","validationDescriptors","proposedNetFilesUploadedOrQueued","tooManyItemsError","nextIndex","_validateFileOrBlobData","_upload","onValidateBatch","_preventLeaveInProgress","event","onLeave","Session","_session","addFileRecord","refresh","_sessionRequestComplete","onSessionRequestComplete","onNewSize","maxAutoAttempts","formElementOrId","onSubmit","idToUpload","stillSubmitting","validityChecker","allowEmpty","ImageValidation","validate","image","errorCode","_wrapCallbacks","safeCallback","errorMsg","exception","callbackName","callbackFunc","FineUploaderBasic","disableCancelForFormUploads","warnBeforeUnload","filenameParam","forceMultipart","omitDefaultParams","paramsInBody","requireSuccessJson","totalFileSizeName","maxHeight","maxWidth","minHeight","minWidth","maybeXhr","maybeXhrOrXdr","attemptNumber","fileOrBlobData","typeError","sizeError","minSizeError","emptyError","noFilesError","maxHeightImageError","maxWidthImageError","minHeightImageError","minWidthImageError","retryFailTooManyItems","concurrent","mandatory","paramNames","partByteOffset","chunkSize","totalFileSize","totalParts","partSize","jsonPayload","resetOnStatus","recordsExpireIn","resuming","customKeys","fileOrBlobName","sendCredentials","interceptSubmit","customResizer","sendOriginal","orient","defaultType","defaultQuality","failureText","includeExif","sizes","ImageGenerator","_scaler","handleNewFile","TotalProgress","entry","AjaxRequester","shouldParamsBeInQueryString","queue","requestData","acceptHeader","validMethods","contentType","mandatedParams","allowXRequestedWithAndCacheControl","successfulResponseCodes","DELETE","PATCH","POST","PUT","GET","onSend","isXdr","getXhrOrXdr","suppliedXhr","ontimeout","onprogress","getCorsAjaxTransport","dequeue","sendRequest","xdrError","responseCode","optXhr","url","onDemandParams","additionalParams","getParams","payload","additionalQueryParams","addToPath","createUrl","getXdrLoadHandler","getXdrErrorHandler","onreadystatechange","readyState","getXhrReadyStateChangeHandler","lengthComputable","registerForUploadProgress","open","onDemandHeaders","additionalHeaders","allHeaders","setRequestHeader","containsNonSimple","header","setHeaders","send","stringify","initTransport","path","cacheBuster","withPath","appendToPath","withParams","withQueryParams","_additionalQueryParams_","withHeaders","withPayload","thePayload","withCacheBuster","qqtimestamp","Date","getTime","prepareToSend","canceled","UploadHandler","proxy","fileState","fileItem","getThirdPartyFileId","_getFileState","_setThirdPartyFileId","thirdPartyFileId","_wasCanceled","preventRetryResponse","controller","chunkingPossible","concurrentChunkingPossible","chunked","chunkIdx","_getChunkData","attemptingResume","chunkProgress","_getChunkDataForCallback","finalize","finalizeChunks","normaizedResponse","normalizeResponse","_maybeDeletePersistedChunkData","cleanup","normalizedResponse","handleFailure","clearCachedChunk","inProgressIdx","responseToReport","inProgressChunksArray","inProgress","remaining","unshift","ignoreFailure","keys","_getXhrs","ckid","ckXhr","abort","_cancelled","moveInProgressToRemaining","connectionManager","free","hasMoreParts","nextPart","nextIdx","_getTotalChunks","reevaluateChunking","sendNext","inProgressChunks","available","requestOverrides","uploadChunkData","overrides","uploadChunk","inProgressChunkIdx","_maybePersistChunkedState","clearXhr","_open","_openChunks","_waiting","openChunkEntriesCount","openChunksCount","openChunkIndexes","dontAllowNext","nextId","allowNext","waitingIndex","connectionsIndex","getProxyOrBlob","getWaitingOrConnected","waitingOrConnected","chunks","parseInt","isUsingConnection","pop","openChunksEntry","simple","uploadFile","maybeNewUuid","_clearXhrs","getProxy","initHandler","handlerType","traditional","handlerModuleSubtype","onFinalizing","_removeExpiredChunkingRecords","isDeferredEligibleForUpload","maybeDefer","generatedBlob","updateBlob","maybeSendDeferredFiles","errorResponse","idsInGroup","uploadedThisId","idInGroup","now","originalResponse","_shouldChunkThisFile","blobToUpload","cancelRetVal","isProxied","_getLocalStorageId","isAttemptingResume","WindowReceiveMessage","callbackWrapperDetachers","receiveMessage","stopReceivingMessages","detacher","FormUploadHandler","formHandlerInstanceId","onloadCallbacks","detachLoadEvents","postMessageCallbackTimers","isCors","corsMessageReceiver","getFileIdForIframeName","iframeName","iframe","_getIframeName","expungeFile","_attachLoadEvent","responseDescriptor","onloadCallback","_parseJsonResponse","_detachLoadEvent","registerPostMessageCallback","contentDocument","body","_createIframe","initIframeForUpload","_initFormForUpload","targetName","innerHtmlOrMessage","XhrUploadHandler","getChunkSize","chunkFiles","resumeEnabled","xhrId","ajaxRequester","_getAjaxRequester","blobOrProxy","_initTempState","_maybePrepareForResume","cachedChunks","tempState","xhrs","ajaxRequesters","responseParser","lastChunkIdx","_getXhr","resumableFilesData","_iterateResumeRecords","notResumable","optInProgress","optRemaining","chunkingState","reverse","paused","totalChunks","parts","newBlob","chunkId","_createXhr","optChunkIdx","_registerXhr","chunkIndex","fileSize","startBytes","endBytes","part","count","startByte","endByte","localStorageId","forEach","_getMimeType","_getPersistableData","ceil","_markNotResumable","removeItem","persistedData","lastUpdated","_registerProgressHandler","progressCalculator","totalSuccessfullyLoadedForFile","loadedForRequest","totalForRequest","estActualChunkLoaded","totalLoadedForFile","chunkLoaded","optAjaxRequester","xhrsId","expirationDays","expirationDate","setDate","getDate","requester","_method","renderImageToCanvas","img","doSquash","modifiedDimensions","iw","naturalWidth","ih","naturalHeight","width","ctx","getContext","save","resize","resizeInfo","imageHeight","imageWidth","orientation","sourceCanvas","sourceCanvasContext","targetCanvas","targetHeight","targetWidth","transformCoordinate","drawImage","qqImageRendered","renderImageToCanvasWithCustomResizer","origHeight","origWidth","newHeight","sqrt","newWidth","maybeCalculateDownsampledDimensions","getImageData","detectSubsampling","tmpCtx","sx","dx","tmpCanvas","vertSquashRatio","ratio","sy","ey","py","detectVerticalSquash","dw","dh","dy","clearRect","restore","translate","rotate","PI","MegaPixImage","srcImage","errorCallback","Image","URL","createObjectURL","webkitURL","src","listeners","imageLoadListeners","render","opt","oldTargetSrc","imgWidth","imgHeight","optionsKey","optionsValue","renderImageToDataURL","onrender","isImg","el","isCanvas","determineMimeOfFileName","nameWithPath","pathSegments","isCrossOrigin","targetProtocol","targetHostname","targetPort","targetAnchor","href","protocol","port","hostname","location","registerThumbnailRenderedListener","registered","registerImgLoadListeners","registerCanvasDrawImageListener","drawOnCanvasOrImgFromUrl","canvasOrImg","draw","tempImg","tempImgRender","crossOrigin","drawOnImgFromUrlWithCssScaling","drawFromUrl","fileBlobOrUrl","drawPreview","Identify","megapixErrorHandler","isPreviewable","dummyExif","exif","Exif","mpImg","Orientation","failureMsg","_testing","TAG_IDS","TAG_INFO","274","parseLittleEndian","hex","pow","getApp1Offset","seekToApp1","offset","theOffset","thePromise","segmentLength","parser","onParseFailure","app1Offset","app1Start","littleEndian","getDirEntryCount","dirEntryCount","dirEntries","getIfd","ifdHex","getDirEntries","tagValues","tagsToFind","vals","tagValHex","tagValLength","idHex","tagsToFindIdx","getTagValues","previewable","isPreviewableSync","PREVIEWABLE_MIME_TYPES","questionableBytes","identifiable","magicBytesEntries","magicBytesArrayEntry","fileMime","isRecognizedImage","limits","sizeDetermination","validationEffort","atLeastOne","limit","hasNonZeroLimits","dimensions","failingLimit","limitName","limitValue","limitMatcher","dimensionPropName","actualValue","getFailingLimit","handleFileItems","fileItems","someItemsIgnored","isJsonResponseValid","err","refreshEffort","requesterOptions","SessionAjaxRequester","queryServer","responseText","includeOriginal","failedToScaleText","_getSortedSizes","getFileRecords","originalFileUuid","originalFileName","originalBlobOrBlobData","records","originalBlob","sizeRecord","outputType","_determineOutputType","requestedType","refType","_getName","_generateScaledImage","failedText","api","param","scaledIds","originalId","blobSize","scaledId","qqparentuuid","qqparentsize","scalingEffort","scalingOptions","scaler","referenceType","scaledVersionProperties","startOfExt","versionType","scaledName","scaledExt","nameAppendage","sort","a","b","sourceFile","imageGenerator","scaledImageDataUri","signalSuccess","_insertExifHeader","scaledImageDataUriWithExif","originalImage","reader","insertionEffort","originalImageDataUri","readAsDataURL","_dataUriToBlob","_createBlob","chr1","chr2","enc1","enc2","enc3","output","chr3","enc4","isNaN","KEY_STR","origFileBase64","resizedFileBase64","rawImage","decode64","segments","slice2Segments","exifManipulation","encode64","exifArray","getExifArray","newImageArray","insertExif","seg","x","imageData","buf","separatePoint","mae","ato","array","rawImageArray","head","endPoint","perFileProgress","totalLoaded","totalSize","lastLoadedSent","lastTotalSent","callbackProxy","onNew","updateTotalProgress","newLoaded","newTotal","oldLoaded","oldTotal","retryable","none","failedId","noRetryableFiles","detachPasteHandler","clipboardData","isImage","getAsFile","startUpload","formEl","validateForm","nativeSubmit","checkValidity","_form2Obj","determineNewEndpoint","submit","maybeUploadOnSubmit","determineFormEl","ignoreValue","checked","elements","select","selected","selectValue","createForm","responseFromMessage","doc","innerHtml","contentWindow","nodeValue","getIframeContentJson","multipart","allChunksDoneRequester","AllChunksDoneAjaxRequester","createReadyStateChangedHandler","onUploadOrChunkComplete","isErrorUploadResponse","parseResponse","sendChunksCompleteRequest","complete","getChunksCompleteParams","setParamsAndGetEntityToSend","entityToSendParams","xhrOverrides","customParams","defaultParams","xhrOverrideParams","setUploadHeaders","headersOptions","headerOverrides","headerName","headerValue","extraHeaders","uploadChunkParams","toSend","addChunkingSpecificParams","promises","endpointHandler","DragAndDrop","dropZones","maybeHideDropZones","uploadDropZones","droppedFiles","traverseFileTree","parseEntryPromise","qqPath","extractDirectoryPath","fileError","dropLog","fullPath","isDirectory","getFilesInDirectory","accumEntries","existingPromise","dirReader","createReader","readEntries","newEntries","entriesLeft","indexOfNameInFullPath","setupDropzone","dropArea","dropZone","UploadDropZone","HIDE_ZONES_EVENT_NAME","onEnter","dropActive","stopPropagation","onLeaveNotDescendants","onDrop","uploadDropZone","pendingFolderPromises","handleDataTransferPromise","processingDroppedFiles","dropDisabled","allowMultipleItems","processingDroppedFilesComplete","dropError","filesAsArray","getElement","uploadDroppedFiles","isFileDrag","dragEvent","fileDrag","types","dropZoneElements","HTMLElement","y","leavingDocumentOut","setupExtraDropzone","removeDropzone","dzs","targetEl","errorSpecifics","preventDrop","dropOutsideDisabled","dragoverShouldBeCanceled","isValidFileDrag","effectTest","dt","isSafari","effectAllowed","includes","isOrSetDropDisabled","isDisabled","dropEffect","effect","relatedTarget","elementFromPoint","clientX","clientY","hideZonesEvent","triggerUsingOldApi","createEvent","initEvent","CustomEvent","dispatchEvent","triggerHidezonesEvent","uiPublicApi","_parent","_templating","addCacheToDom","clearFiles","addExtraDropzone","_dnd","removeExtraDropzone","getItemByFileId","isHiddenForever","getFileContainer","_setupDragAndDrop","_totalFilesInBatch","_filesInBatchAddedToUi","_setupClickAndEditEventHandlers","formattedFilename","updateFilename","uploadPaused","continued","uploadContinued","getId","fileContainerOrChildEl","getFileId","getDropTarget","qqDropTarget","uiPrivateApi","_removeFileItem","removeFile","_fileButtonsClickHandler","FileButtonsClickHandler","_bindFileButtonsClickEvent","_focusinEventSupported","_isEditFilenameEnabled","_filenameClickHandler","_bindFilenameClickEvent","_filenameInputFocusInHandler","_bindFilenameInputFocusInEvent","_filenameInputFocusHandler","_bindFilenameInputFocusEvent","dragAndDrop","extraDropzones","templating","defaultDropZone","getDropZone","showDropProcessing","hideDropProcessing","errorData","lvl","onDeleteFile","onRetry","onPause","onContinue","onGetName","isEditFilenamePossible","FilenameClickHandler","FilenameInputFocusHandler","_filenameEditHandler","onGetUploadStatus","onSetName","onEditingStatusChange","isEditing","qqInput","getEditInput","qqFileContainer","hideFilename","hideEditIcon","showFilename","showEditIcon","markFilenameEditable","hideRetry","setStatusText","_classes","retrying","hidePause","FilenameInputFocusInHandler","hideSpinner","resetTotalProgress","reportDirectoryPaths","qqpath","_addToList","addHandler","updateProgress","hideCancel","hideProgress","waitingForResponse","_displayFileSize","parentRetVal","completeUpload","_markFileAsSuccessful","fail","showCancel","isRetryPossible","showRetry","_controlFailureTextDisplay","newResult","showDeleteButton","_maybeUpdateThumbnail","showSpinner","allowPause","retryNumForDisplay","maxAuto","retryNote","_showCancelLink","showAutoRetryNote","autoRetryNote","resetProgress","_onSubmitDeleteSuccess","forceConfirm","_showDeleteConfirm","_sendDeleteRequest","deletingFailedText","hideDeleteButton","deletingStatusText","confirmMessage","deleteRequestArgs","showConfirm","canned","prependData","prependIndex","dontDisplay","hideScaled","prependFiles","disableCancel","_handledProxyGroup","_clearList","addFileToCache","updateThumbnail","generatePreview","fileSizeOnSubmit","loadedSize","sizeForDisplay","_formatProgress","uploadedSize","formatProgress","responseProperty","failureReason","failedUploadTextDisplay","failUpload","enableTooltip","_showTooltip","showMessage","_setupPastePrompt","namePromptMessage","defaultVal","showPrompt","waitUntilResponse","listElement","editable","tooManyFilesError","unsupportedBrowser","promptForName","maxCount","timeBetweenThumbs","hasDialog","showDialog","confirm","defaultValue","prompt","Templating","templateIdOrEl","containerEl","fileContainerEl","maxThumbs","waitUntilUpdate","thumbnailNotAvailable","waitingForThumbnail","renderFailure","isEditElementsExist","isRetryElementExist","templateDom","showThumbnails","serverScale","fileBatch","content","createDocumentFragment","map","isCancelDisabled","generatedThumbnails","thumbnailQueueMonitorRunning","thumbGenerationQueue","thumbnailMaxSize","selectorClasses","alertDialog","dialogCancelButton","confirmDialog","dialogMessage","dialogOkButton","promptDialog","uploader","drop","list","progressBarContainer","totalProgressBarContainer","totalProgressBar","spinner","continueButton","deleteButton","statusText","editFilenameInput","editNameIcon","dropText","dropProcessing","dropProcessingSpinner","thumbnail","previewGeneration","cachedThumbnailNotAvailableImg","cachedWaitingForThumbnailImg","displayWaitingImg","waitingImgPlacement","maybeScalePlaceholderViaCss","show","generateNextQueuedPreview","queuedThumbRequest","update","processUpdateQueuedPreviewRequest","processNewQueuedPreviewRequest","getCancel","getTemplateEl","getContinue","getDialog","getDelete","getDropProcessing","getEditIcon","getPause","getProgress","getRetry","getSpinner","cssClass","getThumbnail","maybeSetDisplayNotAvailableImg","previewing","notAvailableImgPlacement","optFileOrBlob","relatedThumbnailId","qqThumbnailId","useCachedPreview","generateNewPreview","showWaitingImg","setProgressBarWidth","percent","bar","progressBarSelector","targetThumbnailId","cachedThumbnailId","targetThumbnail","cachedThumbnail","scriptEl","scriptHtml","fileListNode","tempTemplateEl","fileListEl","defaultButton","dropTextEl","uploaderEl","cloneNode","fileTemplate","parseAndGetTemplate","notAvailableUrl","waitingUrl","updatedImg","cacheThumbnailPlaceholders","hideTotalProgress","cantRenderEl","prependInfo","hideForever","batch","thumb","fileEl","fileNameEl","parentEl","beforeEl","prependFile","waitingImg","currentNode","getFileList","filenameEl","isFileName","icon","isEditIcon","isEditInput","isCancel","allowContinueButton","isPause","isContinueButton","isDeleteButton","isRetry","textEl","dialog","messageEl","inputEl","cancelBtn","okBtn","closeHandler","cancelClickHandler","okClickHandler","close","showModal","UiEventHandler","protectedApi","eventType","attachTo","onHandled","srcElement","getFileIdFromItem","qqFileId","getDisposeSupport","buttonHandlers","buttonType","firstLetterCapButtonType","inheritedInternalApi","handleFilenameEdit","FilenameEditHandler","handleNameUpdate","newFilenameInputEl","origExtension","origName","getOriginalExtension","focusInput","filenameSansExt","focus","registerInputBlurHandler","keyCode","which","registerInputEnterKeyHandler"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./#src/js/script.js\");\n","import { FineUploader } from \"fine-uploader\";\n\n\nvar galleryUploader = new FineUploader({\n    element: document.getElementById(\"fine-uploader-gallery\"),\n    template: 'qq-template-gallery',\n    request: {\n        endpoint: '/server/uploads'\n    },\n    thumbnails: {\n        placeholders: {\n            waitingPath: '/source/placeholders/waiting-generic.png',\n            notAvailablePath: '/source/placeholders/not_available-generic.png'\n        }\n    },\n    validation: {\n        allowedExtensions: ['pdf']\n    }\n});\n\n\n\n\n","// Fine Uploader 5.16.2 - MIT licensed. http://fineuploader.com\n(function(global) {\n    var qq = function(element) {\n        \"use strict\";\n        return {\n            hide: function() {\n                element.style.display = \"none\";\n                return this;\n            },\n            attach: function(type, fn) {\n                if (element.addEventListener) {\n                    element.addEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.attachEvent(\"on\" + type, fn);\n                }\n                return function() {\n                    qq(element).detach(type, fn);\n                };\n            },\n            detach: function(type, fn) {\n                if (element.removeEventListener) {\n                    element.removeEventListener(type, fn, false);\n                } else if (element.attachEvent) {\n                    element.detachEvent(\"on\" + type, fn);\n                }\n                return this;\n            },\n            contains: function(descendant) {\n                if (!descendant) {\n                    return false;\n                }\n                if (element === descendant) {\n                    return true;\n                }\n                if (element.contains) {\n                    return element.contains(descendant);\n                } else {\n                    return !!(descendant.compareDocumentPosition(element) & 8);\n                }\n            },\n            insertBefore: function(elementB) {\n                elementB.parentNode.insertBefore(element, elementB);\n                return this;\n            },\n            remove: function() {\n                element.parentNode.removeChild(element);\n                return this;\n            },\n            css: function(styles) {\n                if (element.style == null) {\n                    throw new qq.Error(\"Can't apply style to node as it is not on the HTMLElement prototype chain!\");\n                }\n                if (styles.opacity != null) {\n                    if (typeof element.style.opacity !== \"string\" && typeof element.filters !== \"undefined\") {\n                        styles.filter = \"alpha(opacity=\" + Math.round(100 * styles.opacity) + \")\";\n                    }\n                }\n                qq.extend(element.style, styles);\n                return this;\n            },\n            hasClass: function(name, considerParent) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                return re.test(element.className) || !!(considerParent && re.test(element.parentNode.className));\n            },\n            addClass: function(name) {\n                if (!qq(element).hasClass(name)) {\n                    element.className += \" \" + name;\n                }\n                return this;\n            },\n            removeClass: function(name) {\n                var re = new RegExp(\"(^| )\" + name + \"( |$)\");\n                element.className = element.className.replace(re, \" \").replace(/^\\s+|\\s+$/g, \"\");\n                return this;\n            },\n            getByClass: function(className, first) {\n                var candidates, result = [];\n                if (first && element.querySelector) {\n                    return element.querySelector(\".\" + className);\n                } else if (element.querySelectorAll) {\n                    return element.querySelectorAll(\".\" + className);\n                }\n                candidates = element.getElementsByTagName(\"*\");\n                qq.each(candidates, function(idx, val) {\n                    if (qq(val).hasClass(className)) {\n                        result.push(val);\n                    }\n                });\n                return first ? result[0] : result;\n            },\n            getFirstByClass: function(className) {\n                return qq(element).getByClass(className, true);\n            },\n            children: function() {\n                var children = [], child = element.firstChild;\n                while (child) {\n                    if (child.nodeType === 1) {\n                        children.push(child);\n                    }\n                    child = child.nextSibling;\n                }\n                return children;\n            },\n            setText: function(text) {\n                element.innerText = text;\n                element.textContent = text;\n                return this;\n            },\n            clearText: function() {\n                return qq(element).setText(\"\");\n            },\n            hasAttribute: function(attrName) {\n                var attrVal;\n                if (element.hasAttribute) {\n                    if (!element.hasAttribute(attrName)) {\n                        return false;\n                    }\n                    return /^false$/i.exec(element.getAttribute(attrName)) == null;\n                } else {\n                    attrVal = element[attrName];\n                    if (attrVal === undefined) {\n                        return false;\n                    }\n                    return /^false$/i.exec(attrVal) == null;\n                }\n            }\n        };\n    };\n    (function() {\n        \"use strict\";\n        qq.canvasToBlob = function(canvas, mime, quality) {\n            return qq.dataUriToBlob(canvas.toDataURL(mime, quality));\n        };\n        qq.dataUriToBlob = function(dataUri) {\n            var arrayBuffer, byteString, createBlob = function(data, mime) {\n                var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n                if (blobBuilder) {\n                    blobBuilder.append(data);\n                    return blobBuilder.getBlob(mime);\n                } else {\n                    return new Blob([ data ], {\n                        type: mime\n                    });\n                }\n            }, intArray, mimeString;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return createBlob(arrayBuffer, mimeString);\n        };\n        qq.log = function(message, level) {\n            if (window.console) {\n                if (!level || level === \"info\") {\n                    window.console.log(message);\n                } else {\n                    if (window.console[level]) {\n                        window.console[level](message);\n                    } else {\n                        window.console.log(\"<\" + level + \"> \" + message);\n                    }\n                }\n            }\n        };\n        qq.isObject = function(variable) {\n            return variable && !variable.nodeType && Object.prototype.toString.call(variable) === \"[object Object]\";\n        };\n        qq.isFunction = function(variable) {\n            return typeof variable === \"function\";\n        };\n        qq.isArray = function(value) {\n            return Object.prototype.toString.call(value) === \"[object Array]\" || value && window.ArrayBuffer && value.buffer && value.buffer.constructor === ArrayBuffer;\n        };\n        qq.isItemList = function(maybeItemList) {\n            return Object.prototype.toString.call(maybeItemList) === \"[object DataTransferItemList]\";\n        };\n        qq.isNodeList = function(maybeNodeList) {\n            return Object.prototype.toString.call(maybeNodeList) === \"[object NodeList]\" || maybeNodeList.item && maybeNodeList.namedItem;\n        };\n        qq.isString = function(maybeString) {\n            return Object.prototype.toString.call(maybeString) === \"[object String]\";\n        };\n        qq.trimStr = function(string) {\n            if (String.prototype.trim) {\n                return string.trim();\n            }\n            return string.replace(/^\\s+|\\s+$/g, \"\");\n        };\n        qq.format = function(str) {\n            var args = Array.prototype.slice.call(arguments, 1), newStr = str, nextIdxToReplace = newStr.indexOf(\"{}\");\n            qq.each(args, function(idx, val) {\n                var strBefore = newStr.substring(0, nextIdxToReplace), strAfter = newStr.substring(nextIdxToReplace + 2);\n                newStr = strBefore + val + strAfter;\n                nextIdxToReplace = newStr.indexOf(\"{}\", nextIdxToReplace + val.length);\n                if (nextIdxToReplace < 0) {\n                    return false;\n                }\n            });\n            return newStr;\n        };\n        qq.isFile = function(maybeFile) {\n            return window.File && Object.prototype.toString.call(maybeFile) === \"[object File]\";\n        };\n        qq.isFileList = function(maybeFileList) {\n            return window.FileList && Object.prototype.toString.call(maybeFileList) === \"[object FileList]\";\n        };\n        qq.isFileOrInput = function(maybeFileOrInput) {\n            return qq.isFile(maybeFileOrInput) || qq.isInput(maybeFileOrInput);\n        };\n        qq.isInput = function(maybeInput, notFile) {\n            var evaluateType = function(type) {\n                var normalizedType = type.toLowerCase();\n                if (notFile) {\n                    return normalizedType !== \"file\";\n                }\n                return normalizedType === \"file\";\n            };\n            if (window.HTMLInputElement) {\n                if (Object.prototype.toString.call(maybeInput) === \"[object HTMLInputElement]\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            if (maybeInput.tagName) {\n                if (maybeInput.tagName.toLowerCase() === \"input\") {\n                    if (maybeInput.type && evaluateType(maybeInput.type)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        qq.isBlob = function(maybeBlob) {\n            if (window.Blob && Object.prototype.toString.call(maybeBlob) === \"[object Blob]\") {\n                return true;\n            }\n        };\n        qq.isXhrUploadSupported = function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return input.multiple !== undefined && typeof File !== \"undefined\" && typeof FormData !== \"undefined\" && typeof qq.createXhrInstance().upload !== \"undefined\";\n        };\n        qq.createXhrInstance = function() {\n            if (window.XMLHttpRequest) {\n                return new XMLHttpRequest();\n            }\n            try {\n                return new ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n            } catch (error) {\n                qq.log(\"Neither XHR or ActiveX are supported!\", \"error\");\n                return null;\n            }\n        };\n        qq.isFolderDropSupported = function(dataTransfer) {\n            return dataTransfer.items && dataTransfer.items.length > 0 && dataTransfer.items[0].webkitGetAsEntry;\n        };\n        qq.isFileChunkingSupported = function() {\n            return !qq.androidStock() && qq.isXhrUploadSupported() && (File.prototype.slice !== undefined || File.prototype.webkitSlice !== undefined || File.prototype.mozSlice !== undefined);\n        };\n        qq.sliceBlob = function(fileOrBlob, start, end) {\n            var slicer = fileOrBlob.slice || fileOrBlob.mozSlice || fileOrBlob.webkitSlice;\n            return slicer.call(fileOrBlob, start, end);\n        };\n        qq.arrayBufferToHex = function(buffer) {\n            var bytesAsHex = \"\", bytes = new Uint8Array(buffer);\n            qq.each(bytes, function(idx, byt) {\n                var byteAsHexStr = byt.toString(16);\n                if (byteAsHexStr.length < 2) {\n                    byteAsHexStr = \"0\" + byteAsHexStr;\n                }\n                bytesAsHex += byteAsHexStr;\n            });\n            return bytesAsHex;\n        };\n        qq.readBlobToHex = function(blob, startOffset, length) {\n            var initialBlob = qq.sliceBlob(blob, startOffset, startOffset + length), fileReader = new FileReader(), promise = new qq.Promise();\n            fileReader.onload = function() {\n                promise.success(qq.arrayBufferToHex(fileReader.result));\n            };\n            fileReader.onerror = promise.failure;\n            fileReader.readAsArrayBuffer(initialBlob);\n            return promise;\n        };\n        qq.extend = function(first, second, extendNested) {\n            qq.each(second, function(prop, val) {\n                if (extendNested && qq.isObject(val)) {\n                    if (first[prop] === undefined) {\n                        first[prop] = {};\n                    }\n                    qq.extend(first[prop], val, true);\n                } else {\n                    first[prop] = val;\n                }\n            });\n            return first;\n        };\n        qq.override = function(target, sourceFn) {\n            var super_ = {}, source = sourceFn(super_);\n            qq.each(source, function(srcPropName, srcPropVal) {\n                if (target[srcPropName] !== undefined) {\n                    super_[srcPropName] = target[srcPropName];\n                }\n                target[srcPropName] = srcPropVal;\n            });\n            return target;\n        };\n        qq.indexOf = function(arr, elt, from) {\n            if (arr.indexOf) {\n                return arr.indexOf(elt, from);\n            }\n            from = from || 0;\n            var len = arr.length;\n            if (from < 0) {\n                from += len;\n            }\n            for (;from < len; from += 1) {\n                if (arr.hasOwnProperty(from) && arr[from] === elt) {\n                    return from;\n                }\n            }\n            return -1;\n        };\n        qq.getUniqueId = function() {\n            return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n                var r = Math.random() * 16 | 0, v = c == \"x\" ? r : r & 3 | 8;\n                return v.toString(16);\n            });\n        };\n        qq.ie = function() {\n            return navigator.userAgent.indexOf(\"MSIE\") !== -1 || navigator.userAgent.indexOf(\"Trident\") !== -1;\n        };\n        qq.ie7 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 7\") !== -1;\n        };\n        qq.ie8 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 8\") !== -1;\n        };\n        qq.ie10 = function() {\n            return navigator.userAgent.indexOf(\"MSIE 10\") !== -1;\n        };\n        qq.ie11 = function() {\n            return qq.ie() && navigator.userAgent.indexOf(\"rv:11\") !== -1;\n        };\n        qq.edge = function() {\n            return navigator.userAgent.indexOf(\"Edge\") >= 0;\n        };\n        qq.safari = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Apple\") !== -1;\n        };\n        qq.chrome = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Google\") !== -1;\n        };\n        qq.opera = function() {\n            return navigator.vendor !== undefined && navigator.vendor.indexOf(\"Opera\") !== -1;\n        };\n        qq.firefox = function() {\n            return !qq.edge() && !qq.ie11() && navigator.userAgent.indexOf(\"Mozilla\") !== -1 && navigator.vendor !== undefined && navigator.vendor === \"\";\n        };\n        qq.windows = function() {\n            return navigator.platform === \"Win32\";\n        };\n        qq.android = function() {\n            return navigator.userAgent.toLowerCase().indexOf(\"android\") !== -1;\n        };\n        qq.androidStock = function() {\n            return qq.android() && navigator.userAgent.toLowerCase().indexOf(\"chrome\") < 0;\n        };\n        qq.ios6 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 6_\") !== -1;\n        };\n        qq.ios7 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 7_\") !== -1;\n        };\n        qq.ios8 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_\") !== -1;\n        };\n        qq.ios800 = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\" OS 8_0 \") !== -1;\n        };\n        qq.ios = function() {\n            return navigator.userAgent.indexOf(\"iPad\") !== -1 || navigator.userAgent.indexOf(\"iPod\") !== -1 || navigator.userAgent.indexOf(\"iPhone\") !== -1;\n        };\n        qq.iosChrome = function() {\n            return qq.ios() && navigator.userAgent.indexOf(\"CriOS\") !== -1;\n        };\n        qq.iosSafari = function() {\n            return qq.ios() && !qq.iosChrome() && navigator.userAgent.indexOf(\"Safari\") !== -1;\n        };\n        qq.iosSafariWebView = function() {\n            return qq.ios() && !qq.iosChrome() && !qq.iosSafari();\n        };\n        qq.preventDefault = function(e) {\n            if (e.preventDefault) {\n                e.preventDefault();\n            } else {\n                e.returnValue = false;\n            }\n        };\n        qq.toElement = function() {\n            var div = document.createElement(\"div\");\n            return function(html) {\n                div.innerHTML = html;\n                var element = div.firstChild;\n                div.removeChild(element);\n                return element;\n            };\n        }();\n        qq.each = function(iterableItem, callback) {\n            var keyOrIndex, retVal;\n            if (iterableItem) {\n                if (window.Storage && iterableItem.constructor === window.Storage) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(iterableItem.key(keyOrIndex), iterableItem.getItem(iterableItem.key(keyOrIndex)));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isArray(iterableItem) || qq.isItemList(iterableItem) || qq.isNodeList(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else if (qq.isString(iterableItem)) {\n                    for (keyOrIndex = 0; keyOrIndex < iterableItem.length; keyOrIndex++) {\n                        retVal = callback(keyOrIndex, iterableItem.charAt(keyOrIndex));\n                        if (retVal === false) {\n                            break;\n                        }\n                    }\n                } else {\n                    for (keyOrIndex in iterableItem) {\n                        if (Object.prototype.hasOwnProperty.call(iterableItem, keyOrIndex)) {\n                            retVal = callback(keyOrIndex, iterableItem[keyOrIndex]);\n                            if (retVal === false) {\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        };\n        qq.bind = function(oldFunc, context) {\n            if (qq.isFunction(oldFunc)) {\n                var args = Array.prototype.slice.call(arguments, 2);\n                return function() {\n                    var newArgs = qq.extend([], args);\n                    if (arguments.length) {\n                        newArgs = newArgs.concat(Array.prototype.slice.call(arguments));\n                    }\n                    return oldFunc.apply(context, newArgs);\n                };\n            }\n            throw new Error(\"first parameter must be a function!\");\n        };\n        qq.obj2url = function(obj, temp, prefixDone) {\n            var uristrings = [], prefix = \"&\", add = function(nextObj, i) {\n                var nextTemp = temp ? /\\[\\]$/.test(temp) ? temp : temp + \"[\" + i + \"]\" : i;\n                if (nextTemp !== \"undefined\" && i !== \"undefined\") {\n                    uristrings.push(typeof nextObj === \"object\" ? qq.obj2url(nextObj, nextTemp, true) : Object.prototype.toString.call(nextObj) === \"[object Function]\" ? encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj()) : encodeURIComponent(nextTemp) + \"=\" + encodeURIComponent(nextObj));\n                }\n            };\n            if (!prefixDone && temp) {\n                prefix = /\\?/.test(temp) ? /\\?$/.test(temp) ? \"\" : \"&\" : \"?\";\n                uristrings.push(temp);\n                uristrings.push(qq.obj2url(obj));\n            } else if (Object.prototype.toString.call(obj) === \"[object Array]\" && typeof obj !== \"undefined\") {\n                qq.each(obj, function(idx, val) {\n                    add(val, idx);\n                });\n            } else if (typeof obj !== \"undefined\" && obj !== null && typeof obj === \"object\") {\n                qq.each(obj, function(prop, val) {\n                    add(val, prop);\n                });\n            } else {\n                uristrings.push(encodeURIComponent(temp) + \"=\" + encodeURIComponent(obj));\n            }\n            if (temp) {\n                return uristrings.join(prefix);\n            } else {\n                return uristrings.join(prefix).replace(/^&/, \"\").replace(/%20/g, \"+\");\n            }\n        };\n        qq.obj2FormData = function(obj, formData, arrayKeyName) {\n            if (!formData) {\n                formData = new FormData();\n            }\n            qq.each(obj, function(key, val) {\n                key = arrayKeyName ? arrayKeyName + \"[\" + key + \"]\" : key;\n                if (qq.isObject(val)) {\n                    qq.obj2FormData(val, formData, key);\n                } else if (qq.isFunction(val)) {\n                    formData.append(key, val());\n                } else {\n                    formData.append(key, val);\n                }\n            });\n            return formData;\n        };\n        qq.obj2Inputs = function(obj, form) {\n            var input;\n            if (!form) {\n                form = document.createElement(\"form\");\n            }\n            qq.obj2FormData(obj, {\n                append: function(key, val) {\n                    input = document.createElement(\"input\");\n                    input.setAttribute(\"name\", key);\n                    input.setAttribute(\"value\", val);\n                    form.appendChild(input);\n                }\n            });\n            return form;\n        };\n        qq.parseJson = function(json) {\n            if (window.JSON && qq.isFunction(JSON.parse)) {\n                return JSON.parse(json);\n            } else {\n                return eval(\"(\" + json + \")\");\n            }\n        };\n        qq.getExtension = function(filename) {\n            var extIdx = filename.lastIndexOf(\".\") + 1;\n            if (extIdx > 0) {\n                return filename.substr(extIdx, filename.length - extIdx);\n            }\n        };\n        qq.getFilename = function(blobOrFileInput) {\n            if (qq.isInput(blobOrFileInput)) {\n                return blobOrFileInput.value.replace(/.*(\\/|\\\\)/, \"\");\n            } else if (qq.isFile(blobOrFileInput)) {\n                if (blobOrFileInput.fileName !== null && blobOrFileInput.fileName !== undefined) {\n                    return blobOrFileInput.fileName;\n                }\n            }\n            return blobOrFileInput.name;\n        };\n        qq.DisposeSupport = function() {\n            var disposers = [];\n            return {\n                dispose: function() {\n                    var disposer;\n                    do {\n                        disposer = disposers.shift();\n                        if (disposer) {\n                            disposer();\n                        }\n                    } while (disposer);\n                },\n                attach: function() {\n                    var args = arguments;\n                    this.addDisposer(qq(args[0]).attach.apply(this, Array.prototype.slice.call(arguments, 1)));\n                },\n                addDisposer: function(disposeFunction) {\n                    disposers.push(disposeFunction);\n                }\n            };\n        };\n    })();\n    (function() {\n        \"use strict\";\n        if (typeof define === \"function\" && define.amd) {\n            define(function() {\n                return qq;\n            });\n        } else if (typeof module !== \"undefined\" && module.exports) {\n            module.exports = qq;\n        } else {\n            global.qq = qq;\n        }\n    })();\n    (function() {\n        \"use strict\";\n        qq.Error = function(message) {\n            this.message = \"[Fine Uploader \" + qq.version + \"] \" + message;\n        };\n        qq.Error.prototype = new Error();\n    })();\n    qq.version = \"5.16.2\";\n    qq.supportedFeatures = function() {\n        \"use strict\";\n        var supportsUploading, supportsUploadingBlobs, supportsFileDrop, supportsAjaxFileUploading, supportsFolderDrop, supportsChunking, supportsResume, supportsUploadViaPaste, supportsUploadCors, supportsDeleteFileXdr, supportsDeleteFileCorsXhr, supportsDeleteFileCors, supportsFolderSelection, supportsImagePreviews, supportsUploadProgress;\n        function testSupportsFileInputElement() {\n            var supported = true, tempInput;\n            try {\n                tempInput = document.createElement(\"input\");\n                tempInput.type = \"file\";\n                qq(tempInput).hide();\n                if (tempInput.disabled) {\n                    supported = false;\n                }\n            } catch (ex) {\n                supported = false;\n            }\n            return supported;\n        }\n        function isChrome14OrHigher() {\n            return (qq.chrome() || qq.opera()) && navigator.userAgent.match(/Chrome\\/[1][4-9]|Chrome\\/[2-9][0-9]/) !== undefined;\n        }\n        function isCrossOriginXhrSupported() {\n            if (window.XMLHttpRequest) {\n                var xhr = qq.createXhrInstance();\n                return xhr.withCredentials !== undefined;\n            }\n            return false;\n        }\n        function isXdrSupported() {\n            return window.XDomainRequest !== undefined;\n        }\n        function isCrossOriginAjaxSupported() {\n            if (isCrossOriginXhrSupported()) {\n                return true;\n            }\n            return isXdrSupported();\n        }\n        function isFolderSelectionSupported() {\n            return document.createElement(\"input\").webkitdirectory !== undefined;\n        }\n        function isLocalStorageSupported() {\n            try {\n                return !!window.localStorage && qq.isFunction(window.localStorage.setItem);\n            } catch (error) {\n                return false;\n            }\n        }\n        function isDragAndDropSupported() {\n            var span = document.createElement(\"span\");\n            return (\"draggable\" in span || \"ondragstart\" in span && \"ondrop\" in span) && !qq.android() && !qq.ios();\n        }\n        supportsUploading = testSupportsFileInputElement();\n        supportsAjaxFileUploading = supportsUploading && qq.isXhrUploadSupported();\n        supportsUploadingBlobs = supportsAjaxFileUploading && !qq.androidStock();\n        supportsFileDrop = supportsAjaxFileUploading && isDragAndDropSupported();\n        supportsFolderDrop = supportsFileDrop && function() {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            return !!(\"webkitdirectory\" in (input || document.querySelectorAll(\"input[type=file]\")[0]));\n        }();\n        supportsChunking = supportsAjaxFileUploading && qq.isFileChunkingSupported();\n        supportsResume = supportsAjaxFileUploading && supportsChunking && isLocalStorageSupported();\n        supportsUploadViaPaste = supportsAjaxFileUploading && isChrome14OrHigher();\n        supportsUploadCors = supportsUploading && (window.postMessage !== undefined || supportsAjaxFileUploading);\n        supportsDeleteFileCorsXhr = isCrossOriginXhrSupported();\n        supportsDeleteFileXdr = isXdrSupported();\n        supportsDeleteFileCors = isCrossOriginAjaxSupported();\n        supportsFolderSelection = isFolderSelectionSupported();\n        supportsImagePreviews = supportsAjaxFileUploading && window.FileReader !== undefined;\n        supportsUploadProgress = function() {\n            if (supportsAjaxFileUploading) {\n                return !qq.androidStock() && !qq.iosChrome();\n            }\n            return false;\n        }();\n        return {\n            ajaxUploading: supportsAjaxFileUploading,\n            blobUploading: supportsUploadingBlobs,\n            canDetermineSize: supportsAjaxFileUploading,\n            chunking: supportsChunking,\n            deleteFileCors: supportsDeleteFileCors,\n            deleteFileCorsXdr: supportsDeleteFileXdr,\n            deleteFileCorsXhr: supportsDeleteFileCorsXhr,\n            dialogElement: !!window.HTMLDialogElement,\n            fileDrop: supportsFileDrop,\n            folderDrop: supportsFolderDrop,\n            folderSelection: supportsFolderSelection,\n            imagePreviews: supportsImagePreviews,\n            imageValidation: supportsImagePreviews,\n            itemSizeValidation: supportsAjaxFileUploading,\n            pause: supportsChunking,\n            progressBar: supportsUploadProgress,\n            resume: supportsResume,\n            scaling: supportsImagePreviews && supportsUploadingBlobs,\n            tiffPreviews: qq.safari(),\n            unlimitedScaledImageSize: !qq.ios(),\n            uploading: supportsUploading,\n            uploadCors: supportsUploadCors,\n            uploadCustomHeaders: supportsAjaxFileUploading,\n            uploadNonMultipart: supportsAjaxFileUploading,\n            uploadViaPaste: supportsUploadViaPaste\n        };\n    }();\n    qq.isGenericPromise = function(maybePromise) {\n        \"use strict\";\n        return !!(maybePromise && maybePromise.then && qq.isFunction(maybePromise.then));\n    };\n    qq.Promise = function() {\n        \"use strict\";\n        var successArgs, failureArgs, successCallbacks = [], failureCallbacks = [], doneCallbacks = [], state = 0;\n        qq.extend(this, {\n            then: function(onSuccess, onFailure) {\n                if (state === 0) {\n                    if (onSuccess) {\n                        successCallbacks.push(onSuccess);\n                    }\n                    if (onFailure) {\n                        failureCallbacks.push(onFailure);\n                    }\n                } else if (state === -1) {\n                    onFailure && onFailure.apply(null, failureArgs);\n                } else if (onSuccess) {\n                    onSuccess.apply(null, successArgs);\n                }\n                return this;\n            },\n            done: function(callback) {\n                if (state === 0) {\n                    doneCallbacks.push(callback);\n                } else {\n                    callback.apply(null, failureArgs === undefined ? successArgs : failureArgs);\n                }\n                return this;\n            },\n            success: function() {\n                state = 1;\n                successArgs = arguments;\n                if (successCallbacks.length) {\n                    qq.each(successCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, successArgs);\n                    });\n                }\n                return this;\n            },\n            failure: function() {\n                state = -1;\n                failureArgs = arguments;\n                if (failureCallbacks.length) {\n                    qq.each(failureCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                if (doneCallbacks.length) {\n                    qq.each(doneCallbacks, function(idx, callback) {\n                        callback.apply(null, failureArgs);\n                    });\n                }\n                return this;\n            }\n        });\n    };\n    qq.BlobProxy = function(referenceBlob, onCreate) {\n        \"use strict\";\n        qq.extend(this, {\n            referenceBlob: referenceBlob,\n            create: function() {\n                return onCreate(referenceBlob);\n            }\n        });\n    };\n    qq.UploadButton = function(o) {\n        \"use strict\";\n        var self = this, disposeSupport = new qq.DisposeSupport(), options = {\n            acceptFiles: null,\n            element: null,\n            focusClass: \"qq-upload-button-focus\",\n            folders: false,\n            hoverClass: \"qq-upload-button-hover\",\n            ios8BrowserCrashWorkaround: false,\n            multiple: false,\n            name: \"qqfile\",\n            onChange: function(input) {},\n            title: null\n        }, input, buttonId;\n        qq.extend(options, o);\n        buttonId = qq.getUniqueId();\n        function createInput() {\n            var input = document.createElement(\"input\");\n            input.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME, buttonId);\n            input.setAttribute(\"title\", options.title);\n            self.setMultiple(options.multiple, input);\n            if (options.folders && qq.supportedFeatures.folderSelection) {\n                input.setAttribute(\"webkitdirectory\", \"\");\n            }\n            if (options.acceptFiles) {\n                input.setAttribute(\"accept\", options.acceptFiles);\n            }\n            input.setAttribute(\"type\", \"file\");\n            input.setAttribute(\"name\", options.name);\n            qq(input).css({\n                position: \"absolute\",\n                right: 0,\n                top: 0,\n                fontFamily: \"Arial\",\n                fontSize: qq.ie() && !qq.ie8() ? \"3500px\" : \"118px\",\n                margin: 0,\n                padding: 0,\n                cursor: \"pointer\",\n                opacity: 0\n            });\n            !qq.ie7() && qq(input).css({\n                height: \"100%\"\n            });\n            options.element.appendChild(input);\n            disposeSupport.attach(input, \"change\", function() {\n                options.onChange(input);\n            });\n            disposeSupport.attach(input, \"mouseover\", function() {\n                qq(options.element).addClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"mouseout\", function() {\n                qq(options.element).removeClass(options.hoverClass);\n            });\n            disposeSupport.attach(input, \"focus\", function() {\n                qq(options.element).addClass(options.focusClass);\n            });\n            disposeSupport.attach(input, \"blur\", function() {\n                qq(options.element).removeClass(options.focusClass);\n            });\n            return input;\n        }\n        qq(options.element).css({\n            position: \"relative\",\n            overflow: \"hidden\",\n            direction: \"ltr\"\n        });\n        qq.extend(this, {\n            getInput: function() {\n                return input;\n            },\n            getButtonId: function() {\n                return buttonId;\n            },\n            setMultiple: function(isMultiple, optInput) {\n                var input = optInput || this.getInput();\n                if (options.ios8BrowserCrashWorkaround && qq.ios8() && (qq.iosChrome() || qq.iosSafariWebView())) {\n                    input.setAttribute(\"multiple\", \"\");\n                } else {\n                    if (isMultiple) {\n                        input.setAttribute(\"multiple\", \"\");\n                    } else {\n                        input.removeAttribute(\"multiple\");\n                    }\n                }\n            },\n            setAcceptFiles: function(acceptFiles) {\n                if (acceptFiles !== options.acceptFiles) {\n                    input.setAttribute(\"accept\", acceptFiles);\n                }\n            },\n            reset: function() {\n                if (input.parentNode) {\n                    qq(input).remove();\n                }\n                qq(options.element).removeClass(options.focusClass);\n                input = null;\n                input = createInput();\n            }\n        });\n        input = createInput();\n    };\n    qq.UploadButton.BUTTON_ID_ATTR_NAME = \"qq-button-id\";\n    qq.UploadData = function(uploaderProxy) {\n        \"use strict\";\n        var data = [], byUuid = {}, byStatus = {}, byProxyGroupId = {}, byBatchId = {};\n        function getDataByIds(idOrIds) {\n            if (qq.isArray(idOrIds)) {\n                var entries = [];\n                qq.each(idOrIds, function(idx, id) {\n                    entries.push(data[id]);\n                });\n                return entries;\n            }\n            return data[idOrIds];\n        }\n        function getDataByUuids(uuids) {\n            if (qq.isArray(uuids)) {\n                var entries = [];\n                qq.each(uuids, function(idx, uuid) {\n                    entries.push(data[byUuid[uuid]]);\n                });\n                return entries;\n            }\n            return data[byUuid[uuids]];\n        }\n        function getDataByStatus(status) {\n            var statusResults = [], statuses = [].concat(status);\n            qq.each(statuses, function(index, statusEnum) {\n                var statusResultIndexes = byStatus[statusEnum];\n                if (statusResultIndexes !== undefined) {\n                    qq.each(statusResultIndexes, function(i, dataIndex) {\n                        statusResults.push(data[dataIndex]);\n                    });\n                }\n            });\n            return statusResults;\n        }\n        qq.extend(this, {\n            addFile: function(spec) {\n                var status = spec.status || qq.status.SUBMITTING, id = data.push({\n                    name: spec.name,\n                    originalName: spec.name,\n                    uuid: spec.uuid,\n                    size: spec.size == null ? -1 : spec.size,\n                    status: status,\n                    file: spec.file\n                }) - 1;\n                if (spec.batchId) {\n                    data[id].batchId = spec.batchId;\n                    if (byBatchId[spec.batchId] === undefined) {\n                        byBatchId[spec.batchId] = [];\n                    }\n                    byBatchId[spec.batchId].push(id);\n                }\n                if (spec.proxyGroupId) {\n                    data[id].proxyGroupId = spec.proxyGroupId;\n                    if (byProxyGroupId[spec.proxyGroupId] === undefined) {\n                        byProxyGroupId[spec.proxyGroupId] = [];\n                    }\n                    byProxyGroupId[spec.proxyGroupId].push(id);\n                }\n                data[id].id = id;\n                byUuid[spec.uuid] = id;\n                if (byStatus[status] === undefined) {\n                    byStatus[status] = [];\n                }\n                byStatus[status].push(id);\n                spec.onBeforeStatusChange && spec.onBeforeStatusChange(id);\n                uploaderProxy.onStatusChange(id, null, status);\n                return id;\n            },\n            retrieve: function(optionalFilter) {\n                if (qq.isObject(optionalFilter) && data.length) {\n                    if (optionalFilter.id !== undefined) {\n                        return getDataByIds(optionalFilter.id);\n                    } else if (optionalFilter.uuid !== undefined) {\n                        return getDataByUuids(optionalFilter.uuid);\n                    } else if (optionalFilter.status) {\n                        return getDataByStatus(optionalFilter.status);\n                    }\n                } else {\n                    return qq.extend([], data, true);\n                }\n            },\n            removeFileRef: function(id) {\n                var record = getDataByIds(id);\n                if (record) {\n                    delete record.file;\n                }\n            },\n            reset: function() {\n                data = [];\n                byUuid = {};\n                byStatus = {};\n                byBatchId = {};\n            },\n            setStatus: function(id, newStatus) {\n                var oldStatus = data[id].status, byStatusOldStatusIndex = qq.indexOf(byStatus[oldStatus], id);\n                byStatus[oldStatus].splice(byStatusOldStatusIndex, 1);\n                data[id].status = newStatus;\n                if (byStatus[newStatus] === undefined) {\n                    byStatus[newStatus] = [];\n                }\n                byStatus[newStatus].push(id);\n                uploaderProxy.onStatusChange(id, oldStatus, newStatus);\n            },\n            uuidChanged: function(id, newUuid) {\n                var oldUuid = data[id].uuid;\n                data[id].uuid = newUuid;\n                byUuid[newUuid] = id;\n                delete byUuid[oldUuid];\n            },\n            updateName: function(id, newName) {\n                data[id].name = newName;\n            },\n            updateSize: function(id, newSize) {\n                data[id].size = newSize;\n            },\n            setParentId: function(targetId, parentId) {\n                data[targetId].parentId = parentId;\n            },\n            getIdsInProxyGroup: function(id) {\n                var proxyGroupId = data[id].proxyGroupId;\n                if (proxyGroupId) {\n                    return byProxyGroupId[proxyGroupId];\n                }\n                return [];\n            },\n            getIdsInBatch: function(id) {\n                var batchId = data[id].batchId;\n                return byBatchId[batchId];\n            }\n        });\n    };\n    qq.status = {\n        SUBMITTING: \"submitting\",\n        SUBMITTED: \"submitted\",\n        REJECTED: \"rejected\",\n        QUEUED: \"queued\",\n        CANCELED: \"canceled\",\n        PAUSED: \"paused\",\n        UPLOADING: \"uploading\",\n        UPLOAD_FINALIZING: \"upload finalizing\",\n        UPLOAD_RETRYING: \"retrying upload\",\n        UPLOAD_SUCCESSFUL: \"upload successful\",\n        UPLOAD_FAILED: \"upload failed\",\n        DELETE_FAILED: \"delete failed\",\n        DELETING: \"deleting\",\n        DELETED: \"deleted\"\n    };\n    (function() {\n        \"use strict\";\n        qq.basePublicApi = {\n            addBlobs: function(blobDataOrArray, params, endpoint) {\n                this.addFiles(blobDataOrArray, params, endpoint);\n            },\n            addInitialFiles: function(cannedFileList) {\n                var self = this;\n                qq.each(cannedFileList, function(index, cannedFile) {\n                    self._addCannedFile(cannedFile);\n                });\n            },\n            addFiles: function(data, params, endpoint) {\n                this._maybeHandleIos8SafariWorkaround();\n                var batchId = this._storedIds.length === 0 ? qq.getUniqueId() : this._currentBatchId, processBlob = qq.bind(function(blob) {\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName\n                    }, batchId, verifiedFiles);\n                }, this), processBlobData = qq.bind(function(blobData) {\n                    this._handleNewFile(blobData, batchId, verifiedFiles);\n                }, this), processCanvas = qq.bind(function(canvas) {\n                    var blob = qq.canvasToBlob(canvas);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: this._options.blobs.defaultName + \".png\"\n                    }, batchId, verifiedFiles);\n                }, this), processCanvasData = qq.bind(function(canvasData) {\n                    var normalizedQuality = canvasData.quality && canvasData.quality / 100, blob = qq.canvasToBlob(canvasData.canvas, canvasData.type, normalizedQuality);\n                    this._handleNewFile({\n                        blob: blob,\n                        name: canvasData.name\n                    }, batchId, verifiedFiles);\n                }, this), processFileOrInput = qq.bind(function(fileOrInput) {\n                    if (qq.isInput(fileOrInput) && qq.supportedFeatures.ajaxUploading) {\n                        var files = Array.prototype.slice.call(fileOrInput.files), self = this;\n                        qq.each(files, function(idx, file) {\n                            self._handleNewFile(file, batchId, verifiedFiles);\n                        });\n                    } else {\n                        this._handleNewFile(fileOrInput, batchId, verifiedFiles);\n                    }\n                }, this), normalizeData = function() {\n                    if (qq.isFileList(data)) {\n                        data = Array.prototype.slice.call(data);\n                    }\n                    data = [].concat(data);\n                }, self = this, verifiedFiles = [];\n                this._currentBatchId = batchId;\n                if (data) {\n                    normalizeData();\n                    qq.each(data, function(idx, fileContainer) {\n                        if (qq.isFileOrInput(fileContainer)) {\n                            processFileOrInput(fileContainer);\n                        } else if (qq.isBlob(fileContainer)) {\n                            processBlob(fileContainer);\n                        } else if (qq.isObject(fileContainer)) {\n                            if (fileContainer.blob && fileContainer.name) {\n                                processBlobData(fileContainer);\n                            } else if (fileContainer.canvas && fileContainer.name) {\n                                processCanvasData(fileContainer);\n                            }\n                        } else if (fileContainer.tagName && fileContainer.tagName.toLowerCase() === \"canvas\") {\n                            processCanvas(fileContainer);\n                        } else {\n                            self.log(fileContainer + \" is not a valid file container!  Ignoring!\", \"warn\");\n                        }\n                    });\n                    this.log(\"Received \" + verifiedFiles.length + \" files.\");\n                    this._prepareItemsForUpload(verifiedFiles, params, endpoint);\n                }\n            },\n            cancel: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (uploadData && uploadData.status === qq.status.UPLOAD_FINALIZING) {\n                    this.log(qq.format(\"Ignoring cancel for file ID {} ({}).  Finalizing upload.\", id, this.getName(id)), \"error\");\n                } else {\n                    this._handler.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var storedIdsCopy = [], self = this;\n                qq.extend(storedIdsCopy, this._storedIds);\n                qq.each(storedIdsCopy, function(idx, storedFileId) {\n                    self.cancel(storedFileId);\n                });\n                this._handler.cancelAll();\n            },\n            clearStoredFiles: function() {\n                this._storedIds = [];\n            },\n            continueUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (uploadData.status === qq.status.PAUSED) {\n                    this.log(qq.format(\"Paused file ID {} ({}) will be continued.  Not paused.\", id, this.getName(id)));\n                    this._uploadFile(id);\n                    return true;\n                } else {\n                    this.log(qq.format(\"Ignoring continue for file ID {} ({}).  Not paused.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            deleteFile: function(id) {\n                return this._onSubmitDelete(id);\n            },\n            doesExist: function(fileOrBlobId) {\n                return this._handler.isValid(fileOrBlobId);\n            },\n            drawThumbnail: function(fileId, imgOrCanvas, maxSize, fromServer, customResizeFunction) {\n                var promiseToReturn = new qq.Promise(), fileOrUrl, options;\n                if (this._imageGenerator) {\n                    fileOrUrl = this._thumbnailUrls[fileId];\n                    options = {\n                        customResizeFunction: customResizeFunction,\n                        maxSize: maxSize > 0 ? maxSize : null,\n                        scale: maxSize > 0\n                    };\n                    if (!fromServer && qq.supportedFeatures.imagePreviews) {\n                        fileOrUrl = this.getFile(fileId);\n                    }\n                    if (fileOrUrl == null) {\n                        promiseToReturn.failure({\n                            container: imgOrCanvas,\n                            error: \"File or URL not found.\"\n                        });\n                    } else {\n                        this._imageGenerator.generate(fileOrUrl, imgOrCanvas, options).then(function success(modifiedContainer) {\n                            promiseToReturn.success(modifiedContainer);\n                        }, function failure(container, reason) {\n                            promiseToReturn.failure({\n                                container: container,\n                                error: reason || \"Problem generating thumbnail\"\n                            });\n                        });\n                    }\n                } else {\n                    promiseToReturn.failure({\n                        container: imgOrCanvas,\n                        error: \"Missing image generator module\"\n                    });\n                }\n                return promiseToReturn;\n            },\n            getButton: function(fileId) {\n                return this._getButton(this._buttonIdsForFileIds[fileId]);\n            },\n            getEndpoint: function(fileId) {\n                return this._endpointStore.get(fileId);\n            },\n            getFile: function(fileOrBlobId) {\n                var file = this._handler.getFile(fileOrBlobId);\n                var uploadDataRecord;\n                if (!file) {\n                    uploadDataRecord = this._uploadData.retrieve({\n                        id: fileOrBlobId\n                    });\n                    if (uploadDataRecord) {\n                        file = uploadDataRecord.file;\n                    }\n                }\n                return file || null;\n            },\n            getInProgress: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED ]\n                }).length;\n            },\n            getName: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).name;\n            },\n            getParentId: function(id) {\n                var uploadDataEntry = this.getUploads({\n                    id: id\n                }), parentId = null;\n                if (uploadDataEntry) {\n                    if (uploadDataEntry.parentId !== undefined) {\n                        parentId = uploadDataEntry.parentId;\n                    }\n                }\n                return parentId;\n            },\n            getResumableFilesData: function() {\n                return this._handler.getResumableFilesData();\n            },\n            getSize: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).size;\n            },\n            getNetUploads: function() {\n                return this._netUploaded;\n            },\n            getRemainingAllowedItems: function() {\n                var allowedItems = this._currentItemLimit;\n                if (allowedItems > 0) {\n                    return allowedItems - this._netUploadedOrQueued;\n                }\n                return null;\n            },\n            getUploads: function(optionalFilter) {\n                return this._uploadData.retrieve(optionalFilter);\n            },\n            getUuid: function(id) {\n                return this._uploadData.retrieve({\n                    id: id\n                }).uuid;\n            },\n            isResumable: function(id) {\n                return this._handler.hasResumeRecord(id);\n            },\n            log: function(str, level) {\n                if (this._options.debug && (!level || level === \"info\")) {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str);\n                } else if (level && level !== \"info\") {\n                    qq.log(\"[Fine Uploader \" + qq.version + \"] \" + str, level);\n                }\n            },\n            pauseUpload: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!qq.supportedFeatures.pause || !this._options.chunking.enabled) {\n                    return false;\n                }\n                if (qq.indexOf([ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING ], uploadData.status) >= 0) {\n                    if (this._handler.pause(id)) {\n                        this._uploadData.setStatus(id, qq.status.PAUSED);\n                        return true;\n                    } else {\n                        this.log(qq.format(\"Unable to pause file ID {} ({}).\", id, this.getName(id)), \"error\");\n                    }\n                } else {\n                    this.log(qq.format(\"Ignoring pause for file ID {} ({}).  Not in progress.\", id, this.getName(id)), \"error\");\n                }\n                return false;\n            },\n            removeFileRef: function(id) {\n                this._handler.expunge(id);\n                this._uploadData.removeFileRef(id);\n            },\n            reset: function() {\n                this.log(\"Resetting uploader...\");\n                this._handler.reset();\n                this._storedIds = [];\n                this._autoRetries = [];\n                this._retryTimeouts = [];\n                this._preventRetries = [];\n                this._thumbnailUrls = [];\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n                this._paramsStore.reset();\n                this._endpointStore.reset();\n                this._netUploadedOrQueued = 0;\n                this._netUploaded = 0;\n                this._uploadData.reset();\n                this._buttonIdsForFileIds = [];\n                this._pasteHandler && this._pasteHandler.reset();\n                this._options.session.refreshOnReset && this._refreshSessionData();\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n                this._totalProgress && this._totalProgress.reset();\n                this._customResumeDataStore.reset();\n            },\n            retry: function(id) {\n                return this._manualRetry(id);\n            },\n            scaleImage: function(id, specs) {\n                var self = this;\n                return qq.Scaler.prototype.scaleImage(id, specs, {\n                    log: qq.bind(self.log, self),\n                    getFile: qq.bind(self.getFile, self),\n                    uploadData: self._uploadData\n                });\n            },\n            setCustomHeaders: function(headers, id) {\n                this._customHeadersStore.set(headers, id);\n            },\n            setCustomResumeData: function(id, data) {\n                this._customResumeDataStore.set(data, id);\n            },\n            setDeleteFileCustomHeaders: function(headers, id) {\n                this._deleteFileCustomHeadersStore.set(headers, id);\n            },\n            setDeleteFileEndpoint: function(endpoint, id) {\n                this._deleteFileEndpointStore.set(endpoint, id);\n            },\n            setDeleteFileParams: function(params, id) {\n                this._deleteFileParamsStore.set(params, id);\n            },\n            setEndpoint: function(endpoint, id) {\n                this._endpointStore.set(endpoint, id);\n            },\n            setForm: function(elementOrId) {\n                this._updateFormSupportAndParams(elementOrId);\n            },\n            setItemLimit: function(newItemLimit) {\n                this._currentItemLimit = newItemLimit;\n            },\n            setName: function(id, newName) {\n                this._uploadData.updateName(id, newName);\n            },\n            setParams: function(params, id) {\n                this._paramsStore.set(params, id);\n            },\n            setUuid: function(id, newUuid) {\n                return this._uploadData.uuidChanged(id, newUuid);\n            },\n            setStatus: function(id, newStatus) {\n                var fileRecord = this.getUploads({\n                    id: id\n                });\n                if (!fileRecord) {\n                    throw new qq.Error(id + \" is not a valid file ID.\");\n                }\n                switch (newStatus) {\n                  case qq.status.DELETED:\n                    this._onDeleteComplete(id, null, false);\n                    break;\n\n                  case qq.status.DELETE_FAILED:\n                    this._onDeleteComplete(id, null, true);\n                    break;\n\n                  default:\n                    var errorMessage = \"Method setStatus called on '\" + name + \"' not implemented yet for \" + newStatus;\n                    this.log(errorMessage);\n                    throw new qq.Error(errorMessage);\n                }\n            },\n            uploadStoredFiles: function() {\n                if (this._storedIds.length === 0) {\n                    this._itemError(\"noFilesError\");\n                } else {\n                    this._uploadStoredFiles();\n                }\n            }\n        };\n        qq.basePrivateApi = {\n            _addCannedFile: function(sessionData) {\n                var self = this;\n                return this._uploadData.addFile({\n                    uuid: sessionData.uuid,\n                    name: sessionData.name,\n                    size: sessionData.size,\n                    status: qq.status.UPLOAD_SUCCESSFUL,\n                    onBeforeStatusChange: function(id) {\n                        sessionData.deleteFileEndpoint && self.setDeleteFileEndpoint(sessionData.deleteFileEndpoint, id);\n                        sessionData.deleteFileParams && self.setDeleteFileParams(sessionData.deleteFileParams, id);\n                        if (sessionData.thumbnailUrl) {\n                            self._thumbnailUrls[id] = sessionData.thumbnailUrl;\n                        }\n                        self._netUploaded++;\n                        self._netUploadedOrQueued++;\n                    }\n                });\n            },\n            _annotateWithButtonId: function(file, associatedInput) {\n                if (qq.isFile(file)) {\n                    file.qqButtonId = this._getButtonId(associatedInput);\n                }\n            },\n            _batchError: function(message) {\n                this._options.callbacks.onError(null, null, message, undefined);\n            },\n            _createDeleteHandler: function() {\n                var self = this;\n                return new qq.DeleteFileAjaxRequester({\n                    method: this._options.deleteFile.method.toUpperCase(),\n                    maxConnections: this._options.maxConnections,\n                    uuidParamName: this._options.request.uuidName,\n                    customHeaders: this._deleteFileCustomHeadersStore,\n                    paramsStore: this._deleteFileParamsStore,\n                    endpointStore: this._deleteFileEndpointStore,\n                    cors: this._options.cors,\n                    log: qq.bind(self.log, self),\n                    onDelete: function(id) {\n                        self._onDelete(id);\n                        self._options.callbacks.onDelete(id);\n                    },\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {\n                        self._onDeleteComplete(id, xhrOrXdr, isError);\n                        self._options.callbacks.onDeleteComplete(id, xhrOrXdr, isError);\n                    }\n                });\n            },\n            _createPasteHandler: function() {\n                var self = this;\n                return new qq.PasteSupport({\n                    targetElement: this._options.paste.targetElement,\n                    callbacks: {\n                        log: qq.bind(self.log, self),\n                        pasteReceived: function(blob) {\n                            self._handleCheckedCallback({\n                                name: \"onPasteReceived\",\n                                callback: qq.bind(self._options.callbacks.onPasteReceived, self, blob),\n                                onSuccess: qq.bind(self._handlePasteSuccess, self, blob),\n                                identifier: \"pasted image\"\n                            });\n                        }\n                    }\n                });\n            },\n            _createStore: function(initialValue, _readOnlyValues_) {\n                var store = {}, catchall = initialValue, perIdReadOnlyValues = {}, readOnlyValues = _readOnlyValues_, copy = function(orig) {\n                    if (qq.isObject(orig)) {\n                        return qq.extend({}, orig);\n                    }\n                    return orig;\n                }, getReadOnlyValues = function() {\n                    if (qq.isFunction(readOnlyValues)) {\n                        return readOnlyValues();\n                    }\n                    return readOnlyValues;\n                }, includeReadOnlyValues = function(id, existing) {\n                    if (readOnlyValues && qq.isObject(existing)) {\n                        qq.extend(existing, getReadOnlyValues());\n                    }\n                    if (perIdReadOnlyValues[id]) {\n                        qq.extend(existing, perIdReadOnlyValues[id]);\n                    }\n                };\n                return {\n                    set: function(val, id) {\n                        if (id == null) {\n                            store = {};\n                            catchall = copy(val);\n                        } else {\n                            store[id] = copy(val);\n                        }\n                    },\n                    get: function(id) {\n                        var values;\n                        if (id != null && store[id]) {\n                            values = store[id];\n                        } else {\n                            values = copy(catchall);\n                        }\n                        includeReadOnlyValues(id, values);\n                        return copy(values);\n                    },\n                    addReadOnly: function(id, values) {\n                        if (qq.isObject(store)) {\n                            if (id === null) {\n                                if (qq.isFunction(values)) {\n                                    readOnlyValues = values;\n                                } else {\n                                    readOnlyValues = readOnlyValues || {};\n                                    qq.extend(readOnlyValues, values);\n                                }\n                            } else {\n                                perIdReadOnlyValues[id] = perIdReadOnlyValues[id] || {};\n                                qq.extend(perIdReadOnlyValues[id], values);\n                            }\n                        }\n                    },\n                    remove: function(fileId) {\n                        return delete store[fileId];\n                    },\n                    reset: function() {\n                        store = {};\n                        perIdReadOnlyValues = {};\n                        catchall = initialValue;\n                    }\n                };\n            },\n            _createUploadDataTracker: function() {\n                var self = this;\n                return new qq.UploadData({\n                    getName: function(id) {\n                        return self.getName(id);\n                    },\n                    getUuid: function(id) {\n                        return self.getUuid(id);\n                    },\n                    getSize: function(id) {\n                        return self.getSize(id);\n                    },\n                    onStatusChange: function(id, oldStatus, newStatus) {\n                        self._onUploadStatusChange(id, oldStatus, newStatus);\n                        self._options.callbacks.onStatusChange(id, oldStatus, newStatus);\n                        self._maybeAllComplete(id, newStatus);\n                        if (self._totalProgress) {\n                            setTimeout(function() {\n                                self._totalProgress.onStatusChange(id, oldStatus, newStatus);\n                            }, 0);\n                        }\n                    }\n                });\n            },\n            _createUploadButton: function(spec) {\n                var self = this, acceptFiles = spec.accept || this._options.validation.acceptFiles, allowedExtensions = spec.allowedExtensions || this._options.validation.allowedExtensions, button;\n                function allowMultiple() {\n                    if (qq.supportedFeatures.ajaxUploading) {\n                        if (self._options.workarounds.iosEmptyVideos && qq.ios() && !qq.ios6() && self._isAllowedExtension(allowedExtensions, \".mov\")) {\n                            return false;\n                        }\n                        if (spec.multiple === undefined) {\n                            return self._options.multiple;\n                        }\n                        return spec.multiple;\n                    }\n                    return false;\n                }\n                button = new qq.UploadButton({\n                    acceptFiles: acceptFiles,\n                    element: spec.element,\n                    focusClass: this._options.classes.buttonFocus,\n                    folders: spec.folders,\n                    hoverClass: this._options.classes.buttonHover,\n                    ios8BrowserCrashWorkaround: this._options.workarounds.ios8BrowserCrash,\n                    multiple: allowMultiple(),\n                    name: this._options.request.inputName,\n                    onChange: function(input) {\n                        self._onInputChange(input);\n                    },\n                    title: spec.title == null ? this._options.text.fileInputTitle : spec.title\n                });\n                this._disposeSupport.addDisposer(function() {\n                    button.dispose();\n                });\n                self._buttons.push(button);\n                return button;\n            },\n            _createUploadHandler: function(additionalOptions, namespace) {\n                var self = this, lastOnProgress = {}, options = {\n                    debug: this._options.debug,\n                    maxConnections: this._options.maxConnections,\n                    cors: this._options.cors,\n                    paramsStore: this._paramsStore,\n                    endpointStore: this._endpointStore,\n                    chunking: this._options.chunking,\n                    resume: this._options.resume,\n                    blobs: this._options.blobs,\n                    log: qq.bind(self.log, self),\n                    preventRetryParam: this._options.retry.preventRetryResponseProperty,\n                    onProgress: function(id, name, loaded, total) {\n                        if (loaded < 0 || total < 0) {\n                            return;\n                        }\n                        if (lastOnProgress[id]) {\n                            if (lastOnProgress[id].loaded !== loaded || lastOnProgress[id].total !== total) {\n                                self._onProgress(id, name, loaded, total);\n                                self._options.callbacks.onProgress(id, name, loaded, total);\n                            }\n                        } else {\n                            self._onProgress(id, name, loaded, total);\n                            self._options.callbacks.onProgress(id, name, loaded, total);\n                        }\n                        lastOnProgress[id] = {\n                            loaded: loaded,\n                            total: total\n                        };\n                    },\n                    onComplete: function(id, name, result, xhr) {\n                        delete lastOnProgress[id];\n                        var status = self.getUploads({\n                            id: id\n                        }).status, retVal;\n                        if (status === qq.status.UPLOAD_SUCCESSFUL || status === qq.status.UPLOAD_FAILED) {\n                            return;\n                        }\n                        retVal = self._onComplete(id, name, result, xhr);\n                        if (retVal instanceof qq.Promise) {\n                            retVal.done(function() {\n                                self._options.callbacks.onComplete(id, name, result, xhr);\n                            });\n                        } else {\n                            self._options.callbacks.onComplete(id, name, result, xhr);\n                        }\n                    },\n                    onCancel: function(id, name, cancelFinalizationEffort) {\n                        var promise = new qq.Promise();\n                        self._handleCheckedCallback({\n                            name: \"onCancel\",\n                            callback: qq.bind(self._options.callbacks.onCancel, self, id, name),\n                            onFailure: promise.failure,\n                            onSuccess: function() {\n                                cancelFinalizationEffort.then(function() {\n                                    self._onCancel(id, name);\n                                });\n                                promise.success();\n                            },\n                            identifier: id\n                        });\n                        return promise;\n                    },\n                    onUploadPrep: qq.bind(this._onUploadPrep, this),\n                    onUpload: function(id, name) {\n                        self._onUpload(id, name);\n                        var onUploadResult = self._options.callbacks.onUpload(id, name);\n                        if (qq.isGenericPromise(onUploadResult)) {\n                            self.log(qq.format(\"onUpload for {} returned a Promise - waiting for resolution.\", id));\n                            return onUploadResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunk: function(id, name, chunkData) {\n                        self._onUploadChunk(id, chunkData);\n                        var onUploadChunkResult = self._options.callbacks.onUploadChunk(id, name, chunkData);\n                        if (qq.isGenericPromise(onUploadChunkResult)) {\n                            self.log(qq.format(\"onUploadChunk for {}.{} returned a Promise - waiting for resolution.\", id, chunkData.partIndex));\n                            return onUploadChunkResult;\n                        }\n                        return new qq.Promise().success();\n                    },\n                    onUploadChunkSuccess: function(id, chunkData, result, xhr) {\n                        self._onUploadChunkSuccess(id, chunkData);\n                        self._options.callbacks.onUploadChunkSuccess.apply(self, arguments);\n                    },\n                    onResume: function(id, name, chunkData, customResumeData) {\n                        return self._options.callbacks.onResume(id, name, chunkData, customResumeData);\n                    },\n                    onAutoRetry: function(id, name, responseJSON, xhr) {\n                        return self._onAutoRetry.apply(self, arguments);\n                    },\n                    onUuidChanged: function(id, newUuid) {\n                        self.log(\"Server requested UUID change from '\" + self.getUuid(id) + \"' to '\" + newUuid + \"'\");\n                        self.setUuid(id, newUuid);\n                    },\n                    getName: qq.bind(self.getName, self),\n                    getUuid: qq.bind(self.getUuid, self),\n                    getSize: qq.bind(self.getSize, self),\n                    setSize: qq.bind(self._setSize, self),\n                    getDataByUuid: function(uuid) {\n                        return self.getUploads({\n                            uuid: uuid\n                        });\n                    },\n                    isQueued: function(id) {\n                        var status = self.getUploads({\n                            id: id\n                        }).status;\n                        return status === qq.status.QUEUED || status === qq.status.SUBMITTED || status === qq.status.UPLOAD_RETRYING || status === qq.status.PAUSED;\n                    },\n                    getIdsInProxyGroup: self._uploadData.getIdsInProxyGroup,\n                    getIdsInBatch: self._uploadData.getIdsInBatch,\n                    isInProgress: function(id) {\n                        return self.getUploads({\n                            id: id\n                        }).status === qq.status.UPLOADING;\n                    },\n                    getCustomResumeData: qq.bind(self._getCustomResumeData, self),\n                    setStatus: function(id, status) {\n                        self._uploadData.setStatus(id, status);\n                    }\n                };\n                qq.each(this._options.request, function(prop, val) {\n                    options[prop] = val;\n                });\n                options.customHeaders = this._customHeadersStore;\n                if (additionalOptions) {\n                    qq.each(additionalOptions, function(key, val) {\n                        options[key] = val;\n                    });\n                }\n                return new qq.UploadHandlerController(options, namespace);\n            },\n            _fileOrBlobRejected: function(id) {\n                this._netUploadedOrQueued--;\n                this._uploadData.setStatus(id, qq.status.REJECTED);\n            },\n            _formatSize: function(bytes) {\n                if (bytes === 0) {\n                    return bytes + this._options.text.sizeSymbols[0];\n                }\n                var i = -1;\n                do {\n                    bytes = bytes / 1e3;\n                    i++;\n                } while (bytes > 999);\n                return Math.max(bytes, .1).toFixed(1) + this._options.text.sizeSymbols[i];\n            },\n            _generateExtraButtonSpecs: function() {\n                var self = this;\n                this._extraButtonSpecs = {};\n                qq.each(this._options.extraButtons, function(idx, extraButtonOptionEntry) {\n                    var multiple = extraButtonOptionEntry.multiple, validation = qq.extend({}, self._options.validation, true), extraButtonSpec = qq.extend({}, extraButtonOptionEntry);\n                    if (multiple === undefined) {\n                        multiple = self._options.multiple;\n                    }\n                    if (extraButtonSpec.validation) {\n                        qq.extend(validation, extraButtonOptionEntry.validation, true);\n                    }\n                    qq.extend(extraButtonSpec, {\n                        multiple: multiple,\n                        validation: validation\n                    }, true);\n                    self._initExtraButton(extraButtonSpec);\n                });\n            },\n            _getButton: function(buttonId) {\n                var extraButtonsSpec = this._extraButtonSpecs[buttonId];\n                if (extraButtonsSpec) {\n                    return extraButtonsSpec.element;\n                } else if (buttonId === this._defaultButtonId) {\n                    return this._options.button;\n                }\n            },\n            _getButtonId: function(buttonOrFileInputOrFile) {\n                var inputs, fileInput, fileBlobOrInput = buttonOrFileInputOrFile;\n                if (fileBlobOrInput instanceof qq.BlobProxy) {\n                    fileBlobOrInput = fileBlobOrInput.referenceBlob;\n                }\n                if (fileBlobOrInput && !qq.isBlob(fileBlobOrInput)) {\n                    if (qq.isFile(fileBlobOrInput)) {\n                        return fileBlobOrInput.qqButtonId;\n                    } else if (fileBlobOrInput.tagName.toLowerCase() === \"input\" && fileBlobOrInput.type.toLowerCase() === \"file\") {\n                        return fileBlobOrInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                    inputs = fileBlobOrInput.getElementsByTagName(\"input\");\n                    qq.each(inputs, function(idx, input) {\n                        if (input.getAttribute(\"type\") === \"file\") {\n                            fileInput = input;\n                            return false;\n                        }\n                    });\n                    if (fileInput) {\n                        return fileInput.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);\n                    }\n                }\n            },\n            _getCustomResumeData: function(fileId) {\n                return this._customResumeDataStore.get(fileId);\n            },\n            _getNotFinished: function() {\n                return this._uploadData.retrieve({\n                    status: [ qq.status.UPLOADING, qq.status.UPLOAD_RETRYING, qq.status.QUEUED, qq.status.SUBMITTING, qq.status.SUBMITTED, qq.status.PAUSED ]\n                }).length;\n            },\n            _getValidationBase: function(buttonId) {\n                var extraButtonSpec = this._extraButtonSpecs[buttonId];\n                return extraButtonSpec ? extraButtonSpec.validation : this._options.validation;\n            },\n            _getValidationDescriptor: function(fileWrapper) {\n                if (fileWrapper.file instanceof qq.BlobProxy) {\n                    return {\n                        name: qq.getFilename(fileWrapper.file.referenceBlob),\n                        size: fileWrapper.file.referenceBlob.size\n                    };\n                }\n                return {\n                    name: this.getUploads({\n                        id: fileWrapper.id\n                    }).name,\n                    size: this.getUploads({\n                        id: fileWrapper.id\n                    }).size\n                };\n            },\n            _getValidationDescriptors: function(fileWrappers) {\n                var self = this, fileDescriptors = [];\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    fileDescriptors.push(self._getValidationDescriptor(fileWrapper));\n                });\n                return fileDescriptors;\n            },\n            _handleCameraAccess: function() {\n                if (this._options.camera.ios && qq.ios()) {\n                    var acceptIosCamera = \"image/*;capture=camera\", button = this._options.camera.button, buttonId = button ? this._getButtonId(button) : this._defaultButtonId, optionRoot = this._options;\n                    if (buttonId && buttonId !== this._defaultButtonId) {\n                        optionRoot = this._extraButtonSpecs[buttonId];\n                    }\n                    optionRoot.multiple = false;\n                    if (optionRoot.validation.acceptFiles === null) {\n                        optionRoot.validation.acceptFiles = acceptIosCamera;\n                    } else {\n                        optionRoot.validation.acceptFiles += \",\" + acceptIosCamera;\n                    }\n                    qq.each(this._buttons, function(idx, button) {\n                        if (button.getButtonId() === buttonId) {\n                            button.setMultiple(optionRoot.multiple);\n                            button.setAcceptFiles(optionRoot.acceptFiles);\n                            return false;\n                        }\n                    });\n                }\n            },\n            _handleCheckedCallback: function(details) {\n                var self = this, callbackRetVal = details.callback();\n                if (qq.isGenericPromise(callbackRetVal)) {\n                    this.log(details.name + \" - waiting for \" + details.name + \" promise to be fulfilled for \" + details.identifier);\n                    return callbackRetVal.then(function(successParam) {\n                        self.log(details.name + \" promise success for \" + details.identifier);\n                        details.onSuccess(successParam);\n                    }, function() {\n                        if (details.onFailure) {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                            details.onFailure();\n                        } else {\n                            self.log(details.name + \" promise failure for \" + details.identifier);\n                        }\n                    });\n                }\n                if (callbackRetVal !== false) {\n                    details.onSuccess(callbackRetVal);\n                } else {\n                    if (details.onFailure) {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Invoking failure callback.\");\n                        details.onFailure();\n                    } else {\n                        this.log(details.name + \" - return value was 'false' for \" + details.identifier + \".  Will not proceed.\");\n                    }\n                }\n                return callbackRetVal;\n            },\n            _handleNewFile: function(file, batchId, newFileWrapperList) {\n                var self = this, uuid = qq.getUniqueId(), size = -1, name = qq.getFilename(file), actualFile = file.blob || file, handler = this._customNewFileHandler ? this._customNewFileHandler : qq.bind(self._handleNewFileGeneric, self);\n                if (!qq.isInput(actualFile) && actualFile.size >= 0) {\n                    size = actualFile.size;\n                }\n                handler(actualFile, name, uuid, size, newFileWrapperList, batchId, this._options.request.uuidName, {\n                    uploadData: self._uploadData,\n                    paramsStore: self._paramsStore,\n                    addFileToHandler: function(id, file) {\n                        self._handler.add(id, file);\n                        self._netUploadedOrQueued++;\n                        self._trackButton(id);\n                    }\n                });\n            },\n            _handleNewFileGeneric: function(file, name, uuid, size, fileList, batchId) {\n                var id = this._uploadData.addFile({\n                    uuid: uuid,\n                    name: name,\n                    size: size,\n                    batchId: batchId,\n                    file: file\n                });\n                this._handler.add(id, file);\n                this._trackButton(id);\n                this._netUploadedOrQueued++;\n                fileList.push({\n                    id: id,\n                    file: file\n                });\n            },\n            _handlePasteSuccess: function(blob, extSuppliedName) {\n                var extension = blob.type.split(\"/\")[1], name = extSuppliedName;\n                if (name == null) {\n                    name = this._options.paste.defaultName;\n                }\n                name += \".\" + extension;\n                this.addFiles({\n                    name: name,\n                    blob: blob\n                });\n            },\n            _handleDeleteSuccess: function(id) {\n                if (this.getUploads({\n                    id: id\n                }).status !== qq.status.DELETED) {\n                    var name = this.getName(id);\n                    this._netUploadedOrQueued--;\n                    this._netUploaded--;\n                    this._handler.expunge(id);\n                    this._uploadData.setStatus(id, qq.status.DELETED);\n                    this.log(\"Delete request for '\" + name + \"' has succeeded.\");\n                }\n            },\n            _handleDeleteFailed: function(id, xhrOrXdr) {\n                var name = this.getName(id);\n                this._uploadData.setStatus(id, qq.status.DELETE_FAILED);\n                this.log(\"Delete request for '\" + name + \"' has failed.\", \"error\");\n                if (!xhrOrXdr || xhrOrXdr.withCredentials === undefined) {\n                    this._options.callbacks.onError(id, name, \"Delete request failed\", xhrOrXdr);\n                } else {\n                    this._options.callbacks.onError(id, name, \"Delete request failed with response code \" + xhrOrXdr.status, xhrOrXdr);\n                }\n            },\n            _initExtraButton: function(spec) {\n                var button = this._createUploadButton({\n                    accept: spec.validation.acceptFiles,\n                    allowedExtensions: spec.validation.allowedExtensions,\n                    element: spec.element,\n                    folders: spec.folders,\n                    multiple: spec.multiple,\n                    title: spec.fileInputTitle\n                });\n                this._extraButtonSpecs[button.getButtonId()] = spec;\n            },\n            _initFormSupportAndParams: function() {\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore = this._createStore(this._options.request.params, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this._options.request.endpoint = this._formSupport.newEndpoint;\n                    }\n                } else {\n                    this._paramsStore = this._createStore(this._options.request.params);\n                }\n            },\n            _isDeletePossible: function() {\n                if (!qq.DeleteFileAjaxRequester || !this._options.deleteFile.enabled) {\n                    return false;\n                }\n                if (this._options.cors.expected) {\n                    if (qq.supportedFeatures.deleteFileCorsXhr) {\n                        return true;\n                    }\n                    if (qq.supportedFeatures.deleteFileCorsXdr && this._options.cors.allowXdr) {\n                        return true;\n                    }\n                    return false;\n                }\n                return true;\n            },\n            _isAllowedExtension: function(allowed, fileName) {\n                var valid = false;\n                if (!allowed.length) {\n                    return true;\n                }\n                qq.each(allowed, function(idx, allowedExt) {\n                    if (qq.isString(allowedExt)) {\n                        var extRegex = new RegExp(\"\\\\.\" + allowedExt + \"$\", \"i\");\n                        if (fileName.match(extRegex) != null) {\n                            valid = true;\n                            return false;\n                        }\n                    }\n                });\n                return valid;\n            },\n            _itemError: function(code, maybeNameOrNames, item) {\n                var message = this._options.messages[code], allowedExtensions = [], names = [].concat(maybeNameOrNames), name = names[0], buttonId = this._getButtonId(item), validationBase = this._getValidationBase(buttonId), extensionsForMessage, placeholderMatch;\n                function r(name, replacement) {\n                    message = message.replace(name, replacement);\n                }\n                qq.each(validationBase.allowedExtensions, function(idx, allowedExtension) {\n                    if (qq.isString(allowedExtension)) {\n                        allowedExtensions.push(allowedExtension);\n                    }\n                });\n                extensionsForMessage = allowedExtensions.join(\", \").toLowerCase();\n                r(\"{file}\", this._options.formatFileName(name));\n                r(\"{extensions}\", extensionsForMessage);\n                r(\"{sizeLimit}\", this._formatSize(validationBase.sizeLimit));\n                r(\"{minSizeLimit}\", this._formatSize(validationBase.minSizeLimit));\n                placeholderMatch = message.match(/(\\{\\w+\\})/g);\n                if (placeholderMatch !== null) {\n                    qq.each(placeholderMatch, function(idx, placeholder) {\n                        r(placeholder, names[idx]);\n                    });\n                }\n                this._options.callbacks.onError(null, name, message, undefined);\n                return message;\n            },\n            _manualRetry: function(id, callback) {\n                if (this._onBeforeManualRetry(id)) {\n                    this._netUploadedOrQueued++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    if (callback) {\n                        callback(id);\n                    } else {\n                        this._handler.retry(id);\n                    }\n                    return true;\n                }\n            },\n            _maybeAllComplete: function(id, status) {\n                var self = this, notFinished = this._getNotFinished();\n                if (status === qq.status.UPLOAD_SUCCESSFUL) {\n                    this._succeededSinceLastAllComplete.push(id);\n                } else if (status === qq.status.UPLOAD_FAILED) {\n                    this._failedSinceLastAllComplete.push(id);\n                }\n                if (notFinished === 0 && (this._succeededSinceLastAllComplete.length || this._failedSinceLastAllComplete.length)) {\n                    setTimeout(function() {\n                        self._onAllComplete(self._succeededSinceLastAllComplete, self._failedSinceLastAllComplete);\n                    }, 0);\n                }\n            },\n            _maybeHandleIos8SafariWorkaround: function() {\n                var self = this;\n                if (this._options.workarounds.ios8SafariUploads && qq.ios800() && qq.iosSafari()) {\n                    setTimeout(function() {\n                        window.alert(self._options.messages.unsupportedBrowserIos8Safari);\n                    }, 0);\n                    throw new qq.Error(this._options.messages.unsupportedBrowserIos8Safari);\n                }\n            },\n            _maybeParseAndSendUploadError: function(id, name, response, xhr) {\n                if (!response.success) {\n                    if (xhr && xhr.status !== 200 && !response.error) {\n                        this._options.callbacks.onError(id, name, \"XHR returned response code \" + xhr.status, xhr);\n                    } else {\n                        var errorReason = response.error ? response.error : this._options.text.defaultResponseError;\n                        this._options.callbacks.onError(id, name, errorReason, xhr);\n                    }\n                }\n            },\n            _maybeProcessNextItemAfterOnValidateCallback: function(validItem, items, index, params, endpoint) {\n                var self = this;\n                if (items.length > index) {\n                    if (validItem || !this._options.validation.stopOnFirstInvalidFile) {\n                        setTimeout(function() {\n                            var validationDescriptor = self._getValidationDescriptor(items[index]), buttonId = self._getButtonId(items[index].file), button = self._getButton(buttonId);\n                            self._handleCheckedCallback({\n                                name: \"onValidate\",\n                                callback: qq.bind(self._options.callbacks.onValidate, self, validationDescriptor, button),\n                                onSuccess: qq.bind(self._onValidateCallbackSuccess, self, items, index, params, endpoint),\n                                onFailure: qq.bind(self._onValidateCallbackFailure, self, items, index, params, endpoint),\n                                identifier: \"Item '\" + validationDescriptor.name + \"', size: \" + validationDescriptor.size\n                            });\n                        }, 0);\n                    } else if (!validItem) {\n                        for (;index < items.length; index++) {\n                            self._fileOrBlobRejected(items[index].id);\n                        }\n                    }\n                }\n            },\n            _onAllComplete: function(successful, failed) {\n                this._totalProgress && this._totalProgress.onAllComplete(successful, failed, this._preventRetries);\n                this._options.callbacks.onAllComplete(qq.extend([], successful), qq.extend([], failed));\n                this._succeededSinceLastAllComplete = [];\n                this._failedSinceLastAllComplete = [];\n            },\n            _onAutoRetry: function(id, name, responseJSON, xhr, callback) {\n                var self = this;\n                self._preventRetries[id] = responseJSON[self._options.retry.preventRetryResponseProperty];\n                if (self._shouldAutoRetry(id)) {\n                    var retryWaitPeriod = self._options.retry.autoAttemptDelay * 1e3;\n                    self._maybeParseAndSendUploadError.apply(self, arguments);\n                    self._options.callbacks.onAutoRetry(id, name, self._autoRetries[id]);\n                    self._onBeforeAutoRetry(id, name);\n                    self._uploadData.setStatus(id, qq.status.UPLOAD_RETRYING);\n                    self._retryTimeouts[id] = setTimeout(function() {\n                        self.log(\"Starting retry for \" + name + \"...\");\n                        if (callback) {\n                            callback(id);\n                        } else {\n                            self._handler.retry(id);\n                        }\n                    }, retryWaitPeriod);\n                    return true;\n                }\n            },\n            _onBeforeAutoRetry: function(id, name) {\n                this.log(\"Waiting \" + this._options.retry.autoAttemptDelay + \" seconds before retrying \" + name + \"...\");\n            },\n            _onBeforeManualRetry: function(id) {\n                var itemLimit = this._currentItemLimit, fileName;\n                if (this._preventRetries[id]) {\n                    this.log(\"Retries are forbidden for id \" + id, \"warn\");\n                    return false;\n                } else if (this._handler.isValid(id)) {\n                    fileName = this.getName(id);\n                    if (this._options.callbacks.onManualRetry(id, fileName) === false) {\n                        return false;\n                    }\n                    if (itemLimit > 0 && this._netUploadedOrQueued + 1 > itemLimit) {\n                        this._itemError(\"retryFailTooManyItems\");\n                        return false;\n                    }\n                    this.log(\"Retrying upload for '\" + fileName + \"' (id: \" + id + \")...\");\n                    return true;\n                } else {\n                    this.log(\"'\" + id + \"' is not a valid file ID\", \"error\");\n                    return false;\n                }\n            },\n            _onCancel: function(id, name) {\n                this._netUploadedOrQueued--;\n                clearTimeout(this._retryTimeouts[id]);\n                var storedItemIndex = qq.indexOf(this._storedIds, id);\n                if (!this._options.autoUpload && storedItemIndex >= 0) {\n                    this._storedIds.splice(storedItemIndex, 1);\n                }\n                this._uploadData.setStatus(id, qq.status.CANCELED);\n            },\n            _onComplete: function(id, name, result, xhr) {\n                if (!result.success) {\n                    this._netUploadedOrQueued--;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_FAILED);\n                    if (result[this._options.retry.preventRetryResponseProperty] === true) {\n                        this._preventRetries[id] = true;\n                    }\n                } else {\n                    if (result.thumbnailUrl) {\n                        this._thumbnailUrls[id] = result.thumbnailUrl;\n                    }\n                    this._netUploaded++;\n                    this._uploadData.setStatus(id, qq.status.UPLOAD_SUCCESSFUL);\n                }\n                this._maybeParseAndSendUploadError(id, name, result, xhr);\n                return result.success ? true : false;\n            },\n            _onDelete: function(id) {\n                this._uploadData.setStatus(id, qq.status.DELETING);\n            },\n            _onDeleteComplete: function(id, xhrOrXdr, isError) {\n                var name = this.getName(id);\n                if (isError) {\n                    this._handleDeleteFailed(id, xhrOrXdr);\n                } else {\n                    this._handleDeleteSuccess(id);\n                }\n            },\n            _onInputChange: function(input) {\n                var fileIndex;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    for (fileIndex = 0; fileIndex < input.files.length; fileIndex++) {\n                        this._annotateWithButtonId(input.files[fileIndex], input);\n                    }\n                    this.addFiles(input.files);\n                } else if (input.value.length > 0) {\n                    this.addFiles(input);\n                }\n                qq.each(this._buttons, function(idx, button) {\n                    button.reset();\n                });\n            },\n            _onProgress: function(id, name, loaded, total) {\n                this._totalProgress && this._totalProgress.onIndividualProgress(id, loaded, total);\n            },\n            _onSubmit: function(id, name) {},\n            _onSubmitCallbackSuccess: function(id, name) {\n                this._onSubmit.apply(this, arguments);\n                this._uploadData.setStatus(id, qq.status.SUBMITTED);\n                this._onSubmitted.apply(this, arguments);\n                if (this._options.autoUpload) {\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                    this._uploadFile(id);\n                } else {\n                    this._storeForLater(id);\n                    this._options.callbacks.onSubmitted.apply(this, arguments);\n                }\n            },\n            _onSubmitDelete: function(id, onSuccessCallback, additionalMandatedParams) {\n                var uuid = this.getUuid(id), adjustedOnSuccessCallback;\n                if (onSuccessCallback) {\n                    adjustedOnSuccessCallback = qq.bind(onSuccessCallback, this, id, uuid, additionalMandatedParams);\n                }\n                if (this._isDeletePossible()) {\n                    this._handleCheckedCallback({\n                        name: \"onSubmitDelete\",\n                        callback: qq.bind(this._options.callbacks.onSubmitDelete, this, id),\n                        onSuccess: adjustedOnSuccessCallback || qq.bind(this._deleteHandler.sendDelete, this, id, uuid, additionalMandatedParams),\n                        identifier: id\n                    });\n                    return true;\n                } else {\n                    this.log(\"Delete request ignored for ID \" + id + \", delete feature is disabled or request not possible \" + \"due to CORS on a user agent that does not support pre-flighting.\", \"warn\");\n                    return false;\n                }\n            },\n            _onSubmitted: function(id) {},\n            _onTotalProgress: function(loaded, total) {\n                this._options.callbacks.onTotalProgress(loaded, total);\n            },\n            _onUploadPrep: function(id) {},\n            _onUpload: function(id, name) {\n                this._uploadData.setStatus(id, qq.status.UPLOADING);\n            },\n            _onUploadChunk: function(id, chunkData) {},\n            _onUploadChunkSuccess: function(id, chunkData) {\n                if (!this._preventRetries[id] && this._options.retry.enableAuto) {\n                    this._autoRetries[id] = 0;\n                }\n            },\n            _onUploadStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.PAUSED) {\n                    clearTimeout(this._retryTimeouts[id]);\n                }\n            },\n            _onValidateBatchCallbackFailure: function(fileWrappers) {\n                var self = this;\n                qq.each(fileWrappers, function(idx, fileWrapper) {\n                    self._fileOrBlobRejected(fileWrapper.id);\n                });\n            },\n            _onValidateBatchCallbackSuccess: function(validationDescriptors, items, params, endpoint, button) {\n                var errorMessage, itemLimit = this._currentItemLimit, proposedNetFilesUploadedOrQueued = this._netUploadedOrQueued;\n                if (itemLimit === 0 || proposedNetFilesUploadedOrQueued <= itemLimit) {\n                    if (items.length > 0) {\n                        this._handleCheckedCallback({\n                            name: \"onValidate\",\n                            callback: qq.bind(this._options.callbacks.onValidate, this, validationDescriptors[0], button),\n                            onSuccess: qq.bind(this._onValidateCallbackSuccess, this, items, 0, params, endpoint),\n                            onFailure: qq.bind(this._onValidateCallbackFailure, this, items, 0, params, endpoint),\n                            identifier: \"Item '\" + items[0].file.name + \"', size: \" + items[0].file.size\n                        });\n                    } else {\n                        this._itemError(\"noFilesError\");\n                    }\n                } else {\n                    this._onValidateBatchCallbackFailure(items);\n                    errorMessage = this._options.messages.tooManyItemsError.replace(/\\{netItems\\}/g, proposedNetFilesUploadedOrQueued).replace(/\\{itemLimit\\}/g, itemLimit);\n                    this._batchError(errorMessage);\n                }\n            },\n            _onValidateCallbackFailure: function(items, index, params, endpoint) {\n                var nextIndex = index + 1;\n                this._fileOrBlobRejected(items[index].id, items[index].file.name);\n                this._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n            },\n            _onValidateCallbackSuccess: function(items, index, params, endpoint) {\n                var self = this, nextIndex = index + 1, validationDescriptor = this._getValidationDescriptor(items[index]);\n                this._validateFileOrBlobData(items[index], validationDescriptor).then(function() {\n                    self._upload(items[index].id, params, endpoint);\n                    self._maybeProcessNextItemAfterOnValidateCallback(true, items, nextIndex, params, endpoint);\n                }, function() {\n                    self._maybeProcessNextItemAfterOnValidateCallback(false, items, nextIndex, params, endpoint);\n                });\n            },\n            _prepareItemsForUpload: function(items, params, endpoint) {\n                if (items.length === 0) {\n                    this._itemError(\"noFilesError\");\n                    return;\n                }\n                var validationDescriptors = this._getValidationDescriptors(items), buttonId = this._getButtonId(items[0].file), button = this._getButton(buttonId);\n                this._handleCheckedCallback({\n                    name: \"onValidateBatch\",\n                    callback: qq.bind(this._options.callbacks.onValidateBatch, this, validationDescriptors, button),\n                    onSuccess: qq.bind(this._onValidateBatchCallbackSuccess, this, validationDescriptors, items, params, endpoint, button),\n                    onFailure: qq.bind(this._onValidateBatchCallbackFailure, this, items),\n                    identifier: \"batch validation\"\n                });\n            },\n            _preventLeaveInProgress: function() {\n                var self = this;\n                this._disposeSupport.attach(window, \"beforeunload\", function(e) {\n                    if (self.getInProgress()) {\n                        e = e || window.event;\n                        e.returnValue = self._options.messages.onLeave;\n                        return self._options.messages.onLeave;\n                    }\n                });\n            },\n            _refreshSessionData: function() {\n                var self = this, options = this._options.session;\n                if (qq.Session && this._options.session.endpoint != null) {\n                    if (!this._session) {\n                        qq.extend(options, {\n                            cors: this._options.cors\n                        });\n                        options.log = qq.bind(this.log, this);\n                        options.addFileRecord = qq.bind(this._addCannedFile, this);\n                        this._session = new qq.Session(options);\n                    }\n                    setTimeout(function() {\n                        self._session.refresh().then(function(response, xhrOrXdr) {\n                            self._sessionRequestComplete();\n                            self._options.callbacks.onSessionRequestComplete(response, true, xhrOrXdr);\n                        }, function(response, xhrOrXdr) {\n                            self._options.callbacks.onSessionRequestComplete(response, false, xhrOrXdr);\n                        });\n                    }, 0);\n                }\n            },\n            _sessionRequestComplete: function() {},\n            _setSize: function(id, newSize) {\n                this._uploadData.updateSize(id, newSize);\n                this._totalProgress && this._totalProgress.onNewSize(id);\n            },\n            _shouldAutoRetry: function(id) {\n                var uploadData = this._uploadData.retrieve({\n                    id: id\n                });\n                if (!this._preventRetries[id] && this._options.retry.enableAuto && uploadData.status !== qq.status.PAUSED) {\n                    if (this._autoRetries[id] === undefined) {\n                        this._autoRetries[id] = 0;\n                    }\n                    if (this._autoRetries[id] < this._options.retry.maxAutoAttempts) {\n                        this._autoRetries[id] += 1;\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _storeForLater: function(id) {\n                this._storedIds.push(id);\n            },\n            _trackButton: function(id) {\n                var buttonId;\n                if (qq.supportedFeatures.ajaxUploading) {\n                    buttonId = this._handler.getFile(id).qqButtonId;\n                } else {\n                    buttonId = this._getButtonId(this._handler.getInput(id));\n                }\n                if (buttonId) {\n                    this._buttonIdsForFileIds[id] = buttonId;\n                }\n            },\n            _updateFormSupportAndParams: function(formElementOrId) {\n                this._options.form.element = formElementOrId;\n                this._formSupport = qq.FormSupport && new qq.FormSupport(this._options.form, qq.bind(this.uploadStoredFiles, this), qq.bind(this.log, this));\n                if (this._formSupport && this._formSupport.attachedToForm) {\n                    this._paramsStore.addReadOnly(null, this._formSupport.getFormInputsAsObject);\n                    this._options.autoUpload = this._formSupport.newAutoUpload;\n                    if (this._formSupport.newEndpoint) {\n                        this.setEndpoint(this._formSupport.newEndpoint);\n                    }\n                }\n            },\n            _upload: function(id, params, endpoint) {\n                var name = this.getName(id);\n                if (params) {\n                    this.setParams(params, id);\n                }\n                if (endpoint) {\n                    this.setEndpoint(endpoint, id);\n                }\n                this._handleCheckedCallback({\n                    name: \"onSubmit\",\n                    callback: qq.bind(this._options.callbacks.onSubmit, this, id, name),\n                    onSuccess: qq.bind(this._onSubmitCallbackSuccess, this, id, name),\n                    onFailure: qq.bind(this._fileOrBlobRejected, this, id, name),\n                    identifier: id\n                });\n            },\n            _uploadFile: function(id) {\n                if (!this._handler.upload(id)) {\n                    this._uploadData.setStatus(id, qq.status.QUEUED);\n                }\n            },\n            _uploadStoredFiles: function() {\n                var idToUpload, stillSubmitting, self = this;\n                while (this._storedIds.length) {\n                    idToUpload = this._storedIds.shift();\n                    this._uploadFile(idToUpload);\n                }\n                stillSubmitting = this.getUploads({\n                    status: qq.status.SUBMITTING\n                }).length;\n                if (stillSubmitting) {\n                    qq.log(\"Still waiting for \" + stillSubmitting + \" files to clear submit queue. Will re-parse stored IDs array shortly.\");\n                    setTimeout(function() {\n                        self._uploadStoredFiles();\n                    }, 1e3);\n                }\n            },\n            _validateFileOrBlobData: function(fileWrapper, validationDescriptor) {\n                var self = this, file = function() {\n                    if (fileWrapper.file instanceof qq.BlobProxy) {\n                        return fileWrapper.file.referenceBlob;\n                    }\n                    return fileWrapper.file;\n                }(), name = validationDescriptor.name, size = validationDescriptor.size, buttonId = this._getButtonId(fileWrapper.file), validationBase = this._getValidationBase(buttonId), validityChecker = new qq.Promise();\n                validityChecker.then(function() {}, function() {\n                    self._fileOrBlobRejected(fileWrapper.id, name);\n                });\n                if (qq.isFileOrInput(file) && !this._isAllowedExtension(validationBase.allowedExtensions, name)) {\n                    this._itemError(\"typeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (!this._options.validation.allowEmpty && size === 0) {\n                    this._itemError(\"emptyError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && validationBase.sizeLimit && size > validationBase.sizeLimit) {\n                    this._itemError(\"sizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (size > 0 && size < validationBase.minSizeLimit) {\n                    this._itemError(\"minSizeError\", name, file);\n                    return validityChecker.failure();\n                }\n                if (qq.ImageValidation && qq.supportedFeatures.imagePreviews && qq.isFile(file)) {\n                    new qq.ImageValidation(file, qq.bind(self.log, self)).validate(validationBase.image).then(validityChecker.success, function(errorCode) {\n                        self._itemError(errorCode + \"ImageError\", name, file);\n                        validityChecker.failure();\n                    });\n                } else {\n                    validityChecker.success();\n                }\n                return validityChecker;\n            },\n            _wrapCallbacks: function() {\n                var self, safeCallback, prop;\n                self = this;\n                safeCallback = function(name, callback, args) {\n                    var errorMsg;\n                    try {\n                        return callback.apply(self, args);\n                    } catch (exception) {\n                        errorMsg = exception.message || exception.toString();\n                        self.log(\"Caught exception in '\" + name + \"' callback - \" + errorMsg, \"error\");\n                    }\n                };\n                for (prop in this._options.callbacks) {\n                    (function() {\n                        var callbackName, callbackFunc;\n                        callbackName = prop;\n                        callbackFunc = self._options.callbacks[callbackName];\n                        self._options.callbacks[callbackName] = function() {\n                            return safeCallback(callbackName, callbackFunc, arguments);\n                        };\n                    })();\n                }\n            }\n        };\n    })();\n    (function() {\n        \"use strict\";\n        qq.FineUploaderBasic = function(o) {\n            var self = this;\n            this._options = {\n                debug: false,\n                button: null,\n                multiple: true,\n                maxConnections: 3,\n                disableCancelForFormUploads: false,\n                autoUpload: true,\n                warnBeforeUnload: true,\n                request: {\n                    customHeaders: {},\n                    endpoint: \"/server/upload\",\n                    filenameParam: \"qqfilename\",\n                    forceMultipart: true,\n                    inputName: \"qqfile\",\n                    method: \"POST\",\n                    omitDefaultParams: false,\n                    params: {},\n                    paramsInBody: true,\n                    requireSuccessJson: true,\n                    totalFileSizeName: \"qqtotalfilesize\",\n                    uuidName: \"qquuid\"\n                },\n                validation: {\n                    allowedExtensions: [],\n                    sizeLimit: 0,\n                    minSizeLimit: 0,\n                    itemLimit: 0,\n                    stopOnFirstInvalidFile: true,\n                    acceptFiles: null,\n                    image: {\n                        maxHeight: 0,\n                        maxWidth: 0,\n                        minHeight: 0,\n                        minWidth: 0\n                    },\n                    allowEmpty: false\n                },\n                callbacks: {\n                    onSubmit: function(id, name) {},\n                    onSubmitted: function(id, name) {},\n                    onComplete: function(id, name, responseJSON, maybeXhr) {},\n                    onAllComplete: function(successful, failed) {},\n                    onCancel: function(id, name) {},\n                    onUpload: function(id, name) {},\n                    onUploadChunk: function(id, name, chunkData) {},\n                    onUploadChunkSuccess: function(id, chunkData, responseJSON, xhr) {},\n                    onResume: function(id, fileName, chunkData, customResumeData) {},\n                    onProgress: function(id, name, loaded, total) {},\n                    onTotalProgress: function(loaded, total) {},\n                    onError: function(id, name, reason, maybeXhrOrXdr) {},\n                    onAutoRetry: function(id, name, attemptNumber) {},\n                    onManualRetry: function(id, name) {},\n                    onValidateBatch: function(fileOrBlobData) {},\n                    onValidate: function(fileOrBlobData) {},\n                    onSubmitDelete: function(id) {},\n                    onDelete: function(id) {},\n                    onDeleteComplete: function(id, xhrOrXdr, isError) {},\n                    onPasteReceived: function(blob) {},\n                    onStatusChange: function(id, oldStatus, newStatus) {},\n                    onSessionRequestComplete: function(response, success, xhrOrXdr) {}\n                },\n                messages: {\n                    typeError: \"{file} has an invalid extension. Valid extension(s): {extensions}.\",\n                    sizeError: \"{file} is too large, maximum file size is {sizeLimit}.\",\n                    minSizeError: \"{file} is too small, minimum file size is {minSizeLimit}.\",\n                    emptyError: \"{file} is empty, please select files again without it.\",\n                    noFilesError: \"No files to upload.\",\n                    tooManyItemsError: \"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.\",\n                    maxHeightImageError: \"Image is too tall.\",\n                    maxWidthImageError: \"Image is too wide.\",\n                    minHeightImageError: \"Image is not tall enough.\",\n                    minWidthImageError: \"Image is not wide enough.\",\n                    retryFailTooManyItems: \"Retry failed - you have reached your file limit.\",\n                    onLeave: \"The files are being uploaded, if you leave now the upload will be canceled.\",\n                    unsupportedBrowserIos8Safari: \"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues.\"\n                },\n                retry: {\n                    enableAuto: false,\n                    maxAutoAttempts: 3,\n                    autoAttemptDelay: 5,\n                    preventRetryResponseProperty: \"preventRetry\"\n                },\n                classes: {\n                    buttonHover: \"qq-upload-button-hover\",\n                    buttonFocus: \"qq-upload-button-focus\"\n                },\n                chunking: {\n                    enabled: false,\n                    concurrent: {\n                        enabled: false\n                    },\n                    mandatory: false,\n                    paramNames: {\n                        partIndex: \"qqpartindex\",\n                        partByteOffset: \"qqpartbyteoffset\",\n                        chunkSize: \"qqchunksize\",\n                        totalFileSize: \"qqtotalfilesize\",\n                        totalParts: \"qqtotalparts\"\n                    },\n                    partSize: function(id) {\n                        return 2e6;\n                    },\n                    success: {\n                        endpoint: null,\n                        headers: function(id) {\n                            return null;\n                        },\n                        jsonPayload: false,\n                        method: \"POST\",\n                        params: function(id) {\n                            return null;\n                        },\n                        resetOnStatus: []\n                    }\n                },\n                resume: {\n                    enabled: false,\n                    recordsExpireIn: 7,\n                    paramNames: {\n                        resuming: \"qqresume\"\n                    },\n                    customKeys: function(fileId) {\n                        return [];\n                    }\n                },\n                formatFileName: function(fileOrBlobName) {\n                    return fileOrBlobName;\n                },\n                text: {\n                    defaultResponseError: \"Upload failure reason unknown\",\n                    fileInputTitle: \"file input\",\n                    sizeSymbols: [ \"kB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\" ]\n                },\n                deleteFile: {\n                    enabled: false,\n                    method: \"DELETE\",\n                    endpoint: \"/server/upload\",\n                    customHeaders: {},\n                    params: {}\n                },\n                cors: {\n                    expected: false,\n                    sendCredentials: false,\n                    allowXdr: false\n                },\n                blobs: {\n                    defaultName: \"misc_data\"\n                },\n                paste: {\n                    targetElement: null,\n                    defaultName: \"pasted_image\"\n                },\n                camera: {\n                    ios: false,\n                    button: null\n                },\n                extraButtons: [],\n                session: {\n                    endpoint: null,\n                    params: {},\n                    customHeaders: {},\n                    refreshOnReset: true\n                },\n                form: {\n                    element: \"qq-form\",\n                    autoUpload: false,\n                    interceptSubmit: true\n                },\n                scaling: {\n                    customResizer: null,\n                    sendOriginal: true,\n                    orient: true,\n                    defaultType: null,\n                    defaultQuality: 80,\n                    failureText: \"Failed to scale\",\n                    includeExif: false,\n                    sizes: []\n                },\n                workarounds: {\n                    iosEmptyVideos: true,\n                    ios8SafariUploads: true,\n                    ios8BrowserCrash: false\n                }\n            };\n            qq.extend(this._options, o, true);\n            this._buttons = [];\n            this._extraButtonSpecs = {};\n            this._buttonIdsForFileIds = [];\n            this._wrapCallbacks();\n            this._disposeSupport = new qq.DisposeSupport();\n            this._storedIds = [];\n            this._autoRetries = [];\n            this._retryTimeouts = [];\n            this._preventRetries = [];\n            this._thumbnailUrls = [];\n            this._netUploadedOrQueued = 0;\n            this._netUploaded = 0;\n            this._uploadData = this._createUploadDataTracker();\n            this._initFormSupportAndParams();\n            this._customHeadersStore = this._createStore(this._options.request.customHeaders);\n            this._deleteFileCustomHeadersStore = this._createStore(this._options.deleteFile.customHeaders);\n            this._deleteFileParamsStore = this._createStore(this._options.deleteFile.params);\n            this._endpointStore = this._createStore(this._options.request.endpoint);\n            this._deleteFileEndpointStore = this._createStore(this._options.deleteFile.endpoint);\n            this._handler = this._createUploadHandler();\n            this._deleteHandler = qq.DeleteFileAjaxRequester && this._createDeleteHandler();\n            if (this._options.button) {\n                this._defaultButtonId = this._createUploadButton({\n                    element: this._options.button,\n                    title: this._options.text.fileInputTitle\n                }).getButtonId();\n            }\n            this._generateExtraButtonSpecs();\n            this._handleCameraAccess();\n            if (this._options.paste.targetElement) {\n                if (qq.PasteSupport) {\n                    this._pasteHandler = this._createPasteHandler();\n                } else {\n                    this.log(\"Paste support module not found\", \"error\");\n                }\n            }\n            this._options.warnBeforeUnload && this._preventLeaveInProgress();\n            this._imageGenerator = qq.ImageGenerator && new qq.ImageGenerator(qq.bind(this.log, this));\n            this._refreshSessionData();\n            this._succeededSinceLastAllComplete = [];\n            this._failedSinceLastAllComplete = [];\n            this._scaler = qq.Scaler && new qq.Scaler(this._options.scaling, qq.bind(this.log, this)) || {};\n            if (this._scaler.enabled) {\n                this._customNewFileHandler = qq.bind(this._scaler.handleNewFile, this._scaler);\n            }\n            if (qq.TotalProgress && qq.supportedFeatures.progressBar) {\n                this._totalProgress = new qq.TotalProgress(qq.bind(this._onTotalProgress, this), function(id) {\n                    var entry = self._uploadData.retrieve({\n                        id: id\n                    });\n                    return entry && entry.size || 0;\n                });\n            }\n            this._currentItemLimit = this._options.validation.itemLimit;\n            this._customResumeDataStore = this._createStore();\n        };\n        qq.FineUploaderBasic.prototype = qq.basePublicApi;\n        qq.extend(qq.FineUploaderBasic.prototype, qq.basePrivateApi);\n    })();\n    qq.AjaxRequester = function(o) {\n        \"use strict\";\n        var log, shouldParamsBeInQueryString, queue = [], requestData = {}, options = {\n            acceptHeader: null,\n            validMethods: [ \"PATCH\", \"POST\", \"PUT\" ],\n            method: \"POST\",\n            contentType: \"application/x-www-form-urlencoded\",\n            maxConnections: 3,\n            customHeaders: {},\n            endpointStore: {},\n            paramsStore: {},\n            mandatedParams: {},\n            allowXRequestedWithAndCacheControl: true,\n            successfulResponseCodes: {\n                DELETE: [ 200, 202, 204 ],\n                PATCH: [ 200, 201, 202, 203, 204 ],\n                POST: [ 200, 201, 202, 203, 204 ],\n                PUT: [ 200, 201, 202, 203, 204 ],\n                GET: [ 200 ]\n            },\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onSend: function(id) {},\n            onComplete: function(id, xhrOrXdr, isError) {},\n            onProgress: null\n        };\n        qq.extend(options, o);\n        log = options.log;\n        if (qq.indexOf(options.validMethods, options.method) < 0) {\n            throw new Error(\"'\" + options.method + \"' is not a supported method for this type of request!\");\n        }\n        function isSimpleMethod() {\n            return qq.indexOf([ \"GET\", \"POST\", \"HEAD\" ], options.method) >= 0;\n        }\n        function containsNonSimpleHeaders(headers) {\n            var containsNonSimple = false;\n            qq.each(containsNonSimple, function(idx, header) {\n                if (qq.indexOf([ \"Accept\", \"Accept-Language\", \"Content-Language\", \"Content-Type\" ], header) < 0) {\n                    containsNonSimple = true;\n                    return false;\n                }\n            });\n            return containsNonSimple;\n        }\n        function isXdr(xhr) {\n            return options.cors.expected && xhr.withCredentials === undefined;\n        }\n        function getCorsAjaxTransport() {\n            var xhrOrXdr;\n            if (window.XMLHttpRequest || window.ActiveXObject) {\n                xhrOrXdr = qq.createXhrInstance();\n                if (xhrOrXdr.withCredentials === undefined) {\n                    xhrOrXdr = new XDomainRequest();\n                    xhrOrXdr.onload = function() {};\n                    xhrOrXdr.onerror = function() {};\n                    xhrOrXdr.ontimeout = function() {};\n                    xhrOrXdr.onprogress = function() {};\n                }\n            }\n            return xhrOrXdr;\n        }\n        function getXhrOrXdr(id, suppliedXhr) {\n            var xhrOrXdr = requestData[id] && requestData[id].xhr;\n            if (!xhrOrXdr) {\n                if (suppliedXhr) {\n                    xhrOrXdr = suppliedXhr;\n                } else {\n                    if (options.cors.expected) {\n                        xhrOrXdr = getCorsAjaxTransport();\n                    } else {\n                        xhrOrXdr = qq.createXhrInstance();\n                    }\n                }\n                requestData[id].xhr = xhrOrXdr;\n            }\n            return xhrOrXdr;\n        }\n        function dequeue(id) {\n            var i = qq.indexOf(queue, id), max = options.maxConnections, nextId;\n            delete requestData[id];\n            queue.splice(i, 1);\n            if (queue.length >= max && i < max) {\n                nextId = queue[max - 1];\n                sendRequest(nextId);\n            }\n        }\n        function onComplete(id, xdrError) {\n            var xhr = getXhrOrXdr(id), method = options.method, isError = xdrError === true;\n            dequeue(id);\n            if (isError) {\n                log(method + \" request for \" + id + \" has failed\", \"error\");\n            } else if (!isXdr(xhr) && !isResponseSuccessful(xhr.status)) {\n                isError = true;\n                log(method + \" request for \" + id + \" has failed - response code \" + xhr.status, \"error\");\n            }\n            options.onComplete(id, xhr, isError);\n        }\n        function getParams(id) {\n            var onDemandParams = requestData[id].additionalParams, mandatedParams = options.mandatedParams, params;\n            if (options.paramsStore.get) {\n                params = options.paramsStore.get(id);\n            }\n            if (onDemandParams) {\n                qq.each(onDemandParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            if (mandatedParams) {\n                qq.each(mandatedParams, function(name, val) {\n                    params = params || {};\n                    params[name] = val;\n                });\n            }\n            return params;\n        }\n        function sendRequest(id, optXhr) {\n            var xhr = getXhrOrXdr(id, optXhr), method = options.method, params = getParams(id), payload = requestData[id].payload, url;\n            options.onSend(id);\n            url = createUrl(id, params, requestData[id].additionalQueryParams);\n            if (isXdr(xhr)) {\n                xhr.onload = getXdrLoadHandler(id);\n                xhr.onerror = getXdrErrorHandler(id);\n            } else {\n                xhr.onreadystatechange = getXhrReadyStateChangeHandler(id);\n            }\n            registerForUploadProgress(id);\n            xhr.open(method, url, true);\n            if (options.cors.expected && options.cors.sendCredentials && !isXdr(xhr)) {\n                xhr.withCredentials = true;\n            }\n            setHeaders(id);\n            log(\"Sending \" + method + \" request for \" + id);\n            if (payload) {\n                xhr.send(payload);\n            } else if (shouldParamsBeInQueryString || !params) {\n                xhr.send();\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/x-www-form-urlencoded\") >= 0) {\n                xhr.send(qq.obj2url(params, \"\"));\n            } else if (params && options.contentType && options.contentType.toLowerCase().indexOf(\"application/json\") >= 0) {\n                xhr.send(JSON.stringify(params));\n            } else {\n                xhr.send(params);\n            }\n            return xhr;\n        }\n        function createUrl(id, params, additionalQueryParams) {\n            var endpoint = options.endpointStore.get(id), addToPath = requestData[id].addToPath;\n            if (addToPath != undefined) {\n                endpoint += \"/\" + addToPath;\n            }\n            if (shouldParamsBeInQueryString && params) {\n                endpoint = qq.obj2url(params, endpoint);\n            }\n            if (additionalQueryParams) {\n                endpoint = qq.obj2url(additionalQueryParams, endpoint);\n            }\n            return endpoint;\n        }\n        function getXhrReadyStateChangeHandler(id) {\n            return function() {\n                if (getXhrOrXdr(id).readyState === 4) {\n                    onComplete(id);\n                }\n            };\n        }\n        function registerForUploadProgress(id) {\n            var onProgress = options.onProgress;\n            if (onProgress) {\n                getXhrOrXdr(id).upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        onProgress(id, e.loaded, e.total);\n                    }\n                };\n            }\n        }\n        function getXdrLoadHandler(id) {\n            return function() {\n                onComplete(id);\n            };\n        }\n        function getXdrErrorHandler(id) {\n            return function() {\n                onComplete(id, true);\n            };\n        }\n        function setHeaders(id) {\n            var xhr = getXhrOrXdr(id), customHeaders = options.customHeaders, onDemandHeaders = requestData[id].additionalHeaders || {}, method = options.method, allHeaders = {};\n            if (!isXdr(xhr)) {\n                options.acceptHeader && xhr.setRequestHeader(\"Accept\", options.acceptHeader);\n                if (options.allowXRequestedWithAndCacheControl) {\n                    if (!options.cors.expected || (!isSimpleMethod() || containsNonSimpleHeaders(customHeaders))) {\n                        xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                        xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n                    }\n                }\n                if (options.contentType && (method === \"POST\" || method === \"PUT\")) {\n                    xhr.setRequestHeader(\"Content-Type\", options.contentType);\n                }\n                qq.extend(allHeaders, qq.isFunction(customHeaders) ? customHeaders(id) : customHeaders);\n                qq.extend(allHeaders, onDemandHeaders);\n                qq.each(allHeaders, function(name, val) {\n                    xhr.setRequestHeader(name, val);\n                });\n            }\n        }\n        function isResponseSuccessful(responseCode) {\n            return qq.indexOf(options.successfulResponseCodes[options.method], responseCode) >= 0;\n        }\n        function prepareToSend(id, optXhr, addToPath, additionalParams, additionalQueryParams, additionalHeaders, payload) {\n            requestData[id] = {\n                addToPath: addToPath,\n                additionalParams: additionalParams,\n                additionalQueryParams: additionalQueryParams,\n                additionalHeaders: additionalHeaders,\n                payload: payload\n            };\n            var len = queue.push(id);\n            if (len <= options.maxConnections) {\n                return sendRequest(id, optXhr);\n            }\n        }\n        shouldParamsBeInQueryString = options.method === \"GET\" || options.method === \"DELETE\";\n        qq.extend(this, {\n            initTransport: function(id) {\n                var path, params, headers, payload, cacheBuster, additionalQueryParams;\n                return {\n                    withPath: function(appendToPath) {\n                        path = appendToPath;\n                        return this;\n                    },\n                    withParams: function(additionalParams) {\n                        params = additionalParams;\n                        return this;\n                    },\n                    withQueryParams: function(_additionalQueryParams_) {\n                        additionalQueryParams = _additionalQueryParams_;\n                        return this;\n                    },\n                    withHeaders: function(additionalHeaders) {\n                        headers = additionalHeaders;\n                        return this;\n                    },\n                    withPayload: function(thePayload) {\n                        payload = thePayload;\n                        return this;\n                    },\n                    withCacheBuster: function() {\n                        cacheBuster = true;\n                        return this;\n                    },\n                    send: function(optXhr) {\n                        if (cacheBuster && qq.indexOf([ \"GET\", \"DELETE\" ], options.method) >= 0) {\n                            params.qqtimestamp = new Date().getTime();\n                        }\n                        return prepareToSend(id, optXhr, path, params, additionalQueryParams, headers, payload);\n                    }\n                };\n            },\n            canceled: function(id) {\n                dequeue(id);\n            }\n        });\n    };\n    qq.UploadHandler = function(spec) {\n        \"use strict\";\n        var proxy = spec.proxy, fileState = {}, onCancel = proxy.onCancel, getName = proxy.getName;\n        qq.extend(this, {\n            add: function(id, fileItem) {\n                fileState[id] = fileItem;\n                fileState[id].temp = {};\n            },\n            cancel: function(id) {\n                var self = this, cancelFinalizationEffort = new qq.Promise(), onCancelRetVal = onCancel(id, getName(id), cancelFinalizationEffort);\n                onCancelRetVal.then(function() {\n                    if (self.isValid(id)) {\n                        fileState[id].canceled = true;\n                        self.expunge(id);\n                    }\n                    cancelFinalizationEffort.success();\n                });\n            },\n            expunge: function(id) {\n                delete fileState[id];\n            },\n            getThirdPartyFileId: function(id) {\n                return fileState[id].key;\n            },\n            isValid: function(id) {\n                return fileState[id] !== undefined;\n            },\n            reset: function() {\n                fileState = {};\n            },\n            _getFileState: function(id) {\n                return fileState[id];\n            },\n            _setThirdPartyFileId: function(id, thirdPartyFileId) {\n                fileState[id].key = thirdPartyFileId;\n            },\n            _wasCanceled: function(id) {\n                return !!fileState[id].canceled;\n            }\n        });\n    };\n    qq.UploadHandlerController = function(o, namespace) {\n        \"use strict\";\n        var controller = this, chunkingPossible = false, concurrentChunkingPossible = false, chunking, preventRetryResponse, log, handler, options = {\n            paramsStore: {},\n            maxConnections: 3,\n            chunking: {\n                enabled: false,\n                multiple: {\n                    enabled: false\n                }\n            },\n            log: function(str, level) {},\n            onProgress: function(id, fileName, loaded, total) {},\n            onComplete: function(id, fileName, response, xhr) {},\n            onCancel: function(id, fileName) {},\n            onUploadPrep: function(id) {},\n            onUpload: function(id, fileName) {},\n            onUploadChunk: function(id, fileName, chunkData) {},\n            onUploadChunkSuccess: function(id, chunkData, response, xhr) {},\n            onAutoRetry: function(id, fileName, response, xhr) {},\n            onResume: function(id, fileName, chunkData, customResumeData) {},\n            onUuidChanged: function(id, newUuid) {},\n            getName: function(id) {},\n            setSize: function(id, newSize) {},\n            isQueued: function(id) {},\n            getIdsInProxyGroup: function(id) {},\n            getIdsInBatch: function(id) {},\n            isInProgress: function(id) {}\n        }, chunked = {\n            done: function(id, chunkIdx, response, xhr) {\n                var chunkData = handler._getChunkData(id, chunkIdx);\n                handler._getFileState(id).attemptingResume = false;\n                delete handler._getFileState(id).temp.chunkProgress[chunkIdx];\n                handler._getFileState(id).loaded += chunkData.size;\n                options.onUploadChunkSuccess(id, handler._getChunkDataForCallback(chunkData), response, xhr);\n            },\n            finalize: function(id) {\n                var size = options.getSize(id), name = options.getName(id);\n                log(\"All chunks have been uploaded for \" + id + \" - finalizing....\");\n                handler.finalizeChunks(id).then(function(response, xhr) {\n                    log(\"Finalize successful for \" + id);\n                    var normaizedResponse = upload.normalizeResponse(response, true);\n                    options.onProgress(id, name, size, size);\n                    handler._maybeDeletePersistedChunkData(id);\n                    upload.cleanup(id, normaizedResponse, xhr);\n                }, function(response, xhr) {\n                    var normalizedResponse = upload.normalizeResponse(response, false);\n                    log(\"Problem finalizing chunks for file ID \" + id + \" - \" + normalizedResponse.error, \"error\");\n                    if (normalizedResponse.reset || xhr && options.chunking.success.resetOnStatus.indexOf(xhr.status) >= 0) {\n                        chunked.reset(id);\n                    }\n                    if (!options.onAutoRetry(id, name, normalizedResponse, xhr)) {\n                        upload.cleanup(id, normalizedResponse, xhr);\n                    }\n                });\n            },\n            handleFailure: function(chunkIdx, id, response, xhr) {\n                var name = options.getName(id);\n                log(\"Chunked upload request failed for \" + id + \", chunk \" + chunkIdx);\n                handler.clearCachedChunk(id, chunkIdx);\n                var responseToReport = upload.normalizeResponse(response, false), inProgressIdx;\n                if (responseToReport.reset) {\n                    chunked.reset(id);\n                } else {\n                    var inProgressChunksArray = handler._getFileState(id).chunking.inProgress;\n                    inProgressIdx = inProgressChunksArray ? qq.indexOf(inProgressChunksArray, chunkIdx) : -1;\n                    if (inProgressIdx >= 0) {\n                        handler._getFileState(id).chunking.inProgress.splice(inProgressIdx, 1);\n                        handler._getFileState(id).chunking.remaining.unshift(chunkIdx);\n                    }\n                }\n                if (!handler._getFileState(id).temp.ignoreFailure) {\n                    if (concurrentChunkingPossible) {\n                        handler._getFileState(id).temp.ignoreFailure = true;\n                        log(qq.format(\"Going to attempt to abort these chunks: {}. These are currently in-progress: {}.\", JSON.stringify(Object.keys(handler._getXhrs(id))), JSON.stringify(handler._getFileState(id).chunking.inProgress)));\n                        qq.each(handler._getXhrs(id), function(ckid, ckXhr) {\n                            log(qq.format(\"Attempting to abort file {}.{}. XHR readyState {}. \", id, ckid, ckXhr.readyState));\n                            ckXhr.abort();\n                            ckXhr._cancelled = true;\n                        });\n                        handler.moveInProgressToRemaining(id);\n                        connectionManager.free(id, true);\n                    }\n                    if (!options.onAutoRetry(id, name, responseToReport, xhr)) {\n                        upload.cleanup(id, responseToReport, xhr);\n                    }\n                }\n            },\n            hasMoreParts: function(id) {\n                return !!handler._getFileState(id).chunking.remaining.length;\n            },\n            nextPart: function(id) {\n                var nextIdx = handler._getFileState(id).chunking.remaining.shift();\n                if (nextIdx >= handler._getTotalChunks(id)) {\n                    nextIdx = null;\n                }\n                return nextIdx;\n            },\n            reset: function(id) {\n                log(\"Server or callback has ordered chunking effort to be restarted on next attempt for item ID \" + id, \"error\");\n                handler._maybeDeletePersistedChunkData(id);\n                handler.reevaluateChunking(id);\n                handler._getFileState(id).loaded = 0;\n                handler._getFileState(id).attemptingResume = false;\n            },\n            sendNext: function(id) {\n                var size = options.getSize(id), name = options.getName(id), chunkIdx = chunked.nextPart(id), chunkData = handler._getChunkData(id, chunkIdx), fileState = handler._getFileState(id), resuming = fileState.attemptingResume, inProgressChunks = fileState.chunking.inProgress || [];\n                if (fileState.loaded == null) {\n                    fileState.loaded = 0;\n                }\n                if (resuming && options.onResume(id, name, chunkData, fileState.customResumeData) === false) {\n                    chunked.reset(id);\n                    chunkIdx = chunked.nextPart(id);\n                    chunkData = handler._getChunkData(id, chunkIdx);\n                    resuming = false;\n                }\n                if (chunkIdx == null && inProgressChunks.length === 0) {\n                    chunked.finalize(id);\n                } else {\n                    inProgressChunks.push(chunkIdx);\n                    handler._getFileState(id).chunking.inProgress = inProgressChunks;\n                    if (concurrentChunkingPossible) {\n                        connectionManager.open(id, chunkIdx);\n                    }\n                    if (concurrentChunkingPossible && connectionManager.available() && handler._getFileState(id).chunking.remaining.length) {\n                        chunked.sendNext(id);\n                    }\n                    if (chunkData.blob.size === 0) {\n                        log(qq.format(\"Chunk {} for file {} will not be uploaded, zero sized chunk.\", chunkIdx, id), \"error\");\n                        chunked.handleFailure(chunkIdx, id, \"File is no longer available\", null);\n                    }\n                    var onUploadChunkPromise = options.onUploadChunk(id, name, handler._getChunkDataForCallback(chunkData));\n                    onUploadChunkPromise.then(function(requestOverrides) {\n                        if (!options.isInProgress(id)) {\n                            log(qq.format(\"Not sending chunked upload request for item {}.{} - no longer in progress.\", id, chunkIdx));\n                        } else {\n                            log(qq.format(\"Sending chunked upload request for item {}.{}, bytes {}-{} of {}.\", id, chunkIdx, chunkData.start + 1, chunkData.end, size));\n                            var uploadChunkData = {\n                                chunkIdx: chunkIdx,\n                                id: id,\n                                overrides: requestOverrides,\n                                resuming: resuming\n                            };\n                            handler.uploadChunk(uploadChunkData).then(function success(response, xhr) {\n                                log(\"Chunked upload request succeeded for \" + id + \", chunk \" + chunkIdx);\n                                handler.clearCachedChunk(id, chunkIdx);\n                                var inProgressChunks = handler._getFileState(id).chunking.inProgress || [], responseToReport = upload.normalizeResponse(response, true), inProgressChunkIdx = qq.indexOf(inProgressChunks, chunkIdx);\n                                log(qq.format(\"Chunk {} for file {} uploaded successfully.\", chunkIdx, id));\n                                chunked.done(id, chunkIdx, responseToReport, xhr);\n                                if (inProgressChunkIdx >= 0) {\n                                    inProgressChunks.splice(inProgressChunkIdx, 1);\n                                }\n                                handler._maybePersistChunkedState(id);\n                                if (!chunked.hasMoreParts(id) && inProgressChunks.length === 0) {\n                                    chunked.finalize(id);\n                                } else if (chunked.hasMoreParts(id)) {\n                                    chunked.sendNext(id);\n                                } else {\n                                    log(qq.format(\"File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}\", id, JSON.stringify(inProgressChunks)));\n                                }\n                            }, function failure(response, xhr) {\n                                chunked.handleFailure(chunkIdx, id, response, xhr);\n                            }).done(function() {\n                                handler.clearXhr(id, chunkIdx);\n                            });\n                        }\n                    }, function(error) {\n                        chunked.handleFailure(chunkIdx, id, error, null);\n                    });\n                }\n            }\n        }, connectionManager = {\n            _open: [],\n            _openChunks: {},\n            _waiting: [],\n            available: function() {\n                var max = options.maxConnections, openChunkEntriesCount = 0, openChunksCount = 0;\n                qq.each(connectionManager._openChunks, function(fileId, openChunkIndexes) {\n                    openChunkEntriesCount++;\n                    openChunksCount += openChunkIndexes.length;\n                });\n                return max - (connectionManager._open.length - openChunkEntriesCount + openChunksCount);\n            },\n            free: function(id, dontAllowNext) {\n                var allowNext = !dontAllowNext, waitingIndex = qq.indexOf(connectionManager._waiting, id), connectionsIndex = qq.indexOf(connectionManager._open, id), nextId;\n                delete connectionManager._openChunks[id];\n                if (upload.getProxyOrBlob(id) instanceof qq.BlobProxy) {\n                    log(\"Generated blob upload has ended for \" + id + \", disposing generated blob.\");\n                    delete handler._getFileState(id).file;\n                }\n                if (waitingIndex >= 0) {\n                    connectionManager._waiting.splice(waitingIndex, 1);\n                } else if (allowNext && connectionsIndex >= 0) {\n                    connectionManager._open.splice(connectionsIndex, 1);\n                    nextId = connectionManager._waiting.shift();\n                    if (nextId >= 0) {\n                        connectionManager._open.push(nextId);\n                        upload.start(nextId);\n                    }\n                }\n            },\n            getWaitingOrConnected: function() {\n                var waitingOrConnected = [];\n                qq.each(connectionManager._openChunks, function(fileId, chunks) {\n                    if (chunks && chunks.length) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                qq.each(connectionManager._open, function(idx, fileId) {\n                    if (!connectionManager._openChunks[fileId]) {\n                        waitingOrConnected.push(parseInt(fileId));\n                    }\n                });\n                waitingOrConnected = waitingOrConnected.concat(connectionManager._waiting);\n                return waitingOrConnected;\n            },\n            isUsingConnection: function(id) {\n                return qq.indexOf(connectionManager._open, id) >= 0;\n            },\n            open: function(id, chunkIdx) {\n                if (chunkIdx == null) {\n                    connectionManager._waiting.push(id);\n                }\n                if (connectionManager.available()) {\n                    if (chunkIdx == null) {\n                        connectionManager._waiting.pop();\n                        connectionManager._open.push(id);\n                    } else {\n                        (function() {\n                            var openChunksEntry = connectionManager._openChunks[id] || [];\n                            openChunksEntry.push(chunkIdx);\n                            connectionManager._openChunks[id] = openChunksEntry;\n                        })();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            reset: function() {\n                connectionManager._waiting = [];\n                connectionManager._open = [];\n            }\n        }, simple = {\n            send: function(id, name) {\n                var fileState = handler._getFileState(id);\n                if (!fileState) {\n                    log(\"Ignoring send request as this upload may have been cancelled, File ID \" + id, \"warn\");\n                    return;\n                }\n                fileState.loaded = 0;\n                log(\"Sending simple upload request for \" + id);\n                handler.uploadFile(id).then(function(response, optXhr) {\n                    log(\"Simple upload request succeeded for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, true), size = options.getSize(id);\n                    options.onProgress(id, name, size, size);\n                    upload.maybeNewUuid(id, responseToReport);\n                    upload.cleanup(id, responseToReport, optXhr);\n                }, function(response, optXhr) {\n                    log(\"Simple upload request failed for \" + id);\n                    var responseToReport = upload.normalizeResponse(response, false);\n                    if (!options.onAutoRetry(id, name, responseToReport, optXhr)) {\n                        upload.cleanup(id, responseToReport, optXhr);\n                    }\n                });\n            }\n        }, upload = {\n            cancel: function(id) {\n                log(\"Cancelling \" + id);\n                options.paramsStore.remove(id);\n                connectionManager.free(id);\n            },\n            cleanup: function(id, response, optXhr) {\n                var name = options.getName(id);\n                options.onComplete(id, name, response, optXhr);\n                if (handler._getFileState(id)) {\n                    handler._clearXhrs && handler._clearXhrs(id);\n                }\n                connectionManager.free(id);\n            },\n            getProxyOrBlob: function(id) {\n                return handler.getProxy && handler.getProxy(id) || handler.getFile && handler.getFile(id);\n            },\n            initHandler: function() {\n                var handlerType = namespace ? qq[namespace] : qq.traditional, handlerModuleSubtype = qq.supportedFeatures.ajaxUploading ? \"Xhr\" : \"Form\";\n                handler = new handlerType[handlerModuleSubtype + \"UploadHandler\"](options, {\n                    getCustomResumeData: options.getCustomResumeData,\n                    getDataByUuid: options.getDataByUuid,\n                    getName: options.getName,\n                    getSize: options.getSize,\n                    getUuid: options.getUuid,\n                    log: log,\n                    onCancel: options.onCancel,\n                    onProgress: options.onProgress,\n                    onUuidChanged: options.onUuidChanged,\n                    onFinalizing: function(id) {\n                        options.setStatus(id, qq.status.UPLOAD_FINALIZING);\n                    }\n                });\n                if (handler._removeExpiredChunkingRecords) {\n                    handler._removeExpiredChunkingRecords();\n                }\n            },\n            isDeferredEligibleForUpload: function(id) {\n                return options.isQueued(id);\n            },\n            maybeDefer: function(id, blob) {\n                if (blob && !handler.getFile(id) && blob instanceof qq.BlobProxy) {\n                    options.onUploadPrep(id);\n                    log(\"Attempting to generate a blob on-demand for \" + id);\n                    blob.create().then(function(generatedBlob) {\n                        log(\"Generated an on-demand blob for \" + id);\n                        handler.updateBlob(id, generatedBlob);\n                        options.setSize(id, generatedBlob.size);\n                        handler.reevaluateChunking(id);\n                        upload.maybeSendDeferredFiles(id);\n                    }, function(errorMessage) {\n                        var errorResponse = {};\n                        if (errorMessage) {\n                            errorResponse.error = errorMessage;\n                        }\n                        log(qq.format(\"Failed to generate blob for ID {}.  Error message: {}.\", id, errorMessage), \"error\");\n                        options.onComplete(id, options.getName(id), qq.extend(errorResponse, preventRetryResponse), null);\n                        upload.maybeSendDeferredFiles(id);\n                        connectionManager.free(id);\n                    });\n                } else {\n                    return upload.maybeSendDeferredFiles(id);\n                }\n                return false;\n            },\n            maybeSendDeferredFiles: function(id) {\n                var idsInGroup = options.getIdsInProxyGroup(id), uploadedThisId = false;\n                if (idsInGroup && idsInGroup.length) {\n                    log(\"Maybe ready to upload proxy group file \" + id);\n                    qq.each(idsInGroup, function(idx, idInGroup) {\n                        if (upload.isDeferredEligibleForUpload(idInGroup) && !!handler.getFile(idInGroup)) {\n                            uploadedThisId = idInGroup === id;\n                            upload.now(idInGroup);\n                        } else if (upload.isDeferredEligibleForUpload(idInGroup)) {\n                            return false;\n                        }\n                    });\n                } else {\n                    uploadedThisId = true;\n                    upload.now(id);\n                }\n                return uploadedThisId;\n            },\n            maybeNewUuid: function(id, response) {\n                if (response.newUuid !== undefined) {\n                    options.onUuidChanged(id, response.newUuid);\n                }\n            },\n            normalizeResponse: function(originalResponse, successful) {\n                var response = originalResponse;\n                if (!qq.isObject(originalResponse)) {\n                    response = {};\n                    if (qq.isString(originalResponse) && !successful) {\n                        response.error = originalResponse;\n                    }\n                }\n                response.success = successful;\n                return response;\n            },\n            now: function(id) {\n                var name = options.getName(id);\n                if (!controller.isValid(id)) {\n                    throw new qq.Error(id + \" is not a valid file ID to upload!\");\n                }\n                options.onUpload(id, name).then(function(response) {\n                    if (response && response.pause) {\n                        options.setStatus(id, qq.status.PAUSED);\n                        handler.pause(id);\n                        connectionManager.free(id);\n                    } else {\n                        if (chunkingPossible && handler._shouldChunkThisFile(id)) {\n                            chunked.sendNext(id);\n                        } else {\n                            simple.send(id, name);\n                        }\n                    }\n                }, function(error) {\n                    error = error || {};\n                    log(id + \" upload start aborted due to rejected onUpload Promise - details: \" + error, \"error\");\n                    if (!options.onAutoRetry(id, name, error.responseJSON || {})) {\n                        var response = upload.normalizeResponse(error.responseJSON, false);\n                        upload.cleanup(id, response);\n                    }\n                });\n            },\n            start: function(id) {\n                var blobToUpload = upload.getProxyOrBlob(id);\n                if (blobToUpload) {\n                    return upload.maybeDefer(id, blobToUpload);\n                } else {\n                    upload.now(id);\n                    return true;\n                }\n            }\n        };\n        qq.extend(this, {\n            add: function(id, file) {\n                handler.add.apply(this, arguments);\n            },\n            upload: function(id) {\n                if (connectionManager.open(id)) {\n                    return upload.start(id);\n                }\n                return false;\n            },\n            retry: function(id) {\n                if (concurrentChunkingPossible) {\n                    handler._getFileState(id).temp.ignoreFailure = false;\n                }\n                if (connectionManager.isUsingConnection(id)) {\n                    return upload.start(id);\n                } else {\n                    return controller.upload(id);\n                }\n            },\n            cancel: function(id) {\n                var cancelRetVal = handler.cancel(id);\n                if (qq.isGenericPromise(cancelRetVal)) {\n                    cancelRetVal.then(function() {\n                        upload.cancel(id);\n                    });\n                } else if (cancelRetVal !== false) {\n                    upload.cancel(id);\n                }\n            },\n            cancelAll: function() {\n                var waitingOrConnected = connectionManager.getWaitingOrConnected(), i;\n                if (waitingOrConnected.length) {\n                    for (i = waitingOrConnected.length - 1; i >= 0; i--) {\n                        controller.cancel(waitingOrConnected[i]);\n                    }\n                }\n                connectionManager.reset();\n            },\n            getFile: function(id) {\n                if (handler.getProxy && handler.getProxy(id)) {\n                    return handler.getProxy(id).referenceBlob;\n                }\n                return handler.getFile && handler.getFile(id);\n            },\n            isProxied: function(id) {\n                return !!(handler.getProxy && handler.getProxy(id));\n            },\n            getInput: function(id) {\n                if (handler.getInput) {\n                    return handler.getInput(id);\n                }\n            },\n            reset: function() {\n                log(\"Resetting upload handler\");\n                controller.cancelAll();\n                connectionManager.reset();\n                handler.reset();\n            },\n            expunge: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.expunge(id);\n                }\n            },\n            isValid: function(id) {\n                return handler.isValid(id);\n            },\n            hasResumeRecord: function(id) {\n                var key = handler.isValid(id) && handler._getLocalStorageId && handler._getLocalStorageId(id);\n                if (key) {\n                    return !!localStorage.getItem(key);\n                }\n                return false;\n            },\n            getResumableFilesData: function() {\n                if (handler.getResumableFilesData) {\n                    return handler.getResumableFilesData();\n                }\n                return [];\n            },\n            getThirdPartyFileId: function(id) {\n                if (controller.isValid(id)) {\n                    return handler.getThirdPartyFileId(id);\n                }\n            },\n            pause: function(id) {\n                if (controller.isResumable(id) && handler.pause && controller.isValid(id) && handler.pause(id)) {\n                    connectionManager.free(id);\n                    handler.moveInProgressToRemaining(id);\n                    return true;\n                }\n                return false;\n            },\n            isAttemptingResume: function(id) {\n                return !!handler.isAttemptingResume && handler.isAttemptingResume(id);\n            },\n            isResumable: function(id) {\n                return !!handler.isResumable && handler.isResumable(id);\n            }\n        });\n        qq.extend(options, o);\n        log = options.log;\n        chunkingPossible = options.chunking.enabled && qq.supportedFeatures.chunking;\n        concurrentChunkingPossible = chunkingPossible && options.chunking.concurrent.enabled;\n        preventRetryResponse = function() {\n            var response = {};\n            response[options.preventRetryParam] = true;\n            return response;\n        }();\n        upload.initHandler();\n    };\n    qq.WindowReceiveMessage = function(o) {\n        \"use strict\";\n        var options = {\n            log: function(message, level) {}\n        }, callbackWrapperDetachers = {};\n        qq.extend(options, o);\n        qq.extend(this, {\n            receiveMessage: function(id, callback) {\n                var onMessageCallbackWrapper = function(event) {\n                    callback(event.data);\n                };\n                if (window.postMessage) {\n                    callbackWrapperDetachers[id] = qq(window).attach(\"message\", onMessageCallbackWrapper);\n                } else {\n                    log(\"iframe message passing not supported in this browser!\", \"error\");\n                }\n            },\n            stopReceivingMessages: function(id) {\n                if (window.postMessage) {\n                    var detacher = callbackWrapperDetachers[id];\n                    if (detacher) {\n                        detacher();\n                    }\n                }\n            }\n        });\n    };\n    qq.FormUploadHandler = function(spec) {\n        \"use strict\";\n        var options = spec.options, handler = this, proxy = spec.proxy, formHandlerInstanceId = qq.getUniqueId(), onloadCallbacks = {}, detachLoadEvents = {}, postMessageCallbackTimers = {}, isCors = options.isCors, inputName = options.inputName, getUuid = proxy.getUuid, log = proxy.log, corsMessageReceiver = new qq.WindowReceiveMessage({\n            log: log\n        });\n        function expungeFile(id) {\n            delete detachLoadEvents[id];\n            if (isCors) {\n                clearTimeout(postMessageCallbackTimers[id]);\n                delete postMessageCallbackTimers[id];\n                corsMessageReceiver.stopReceivingMessages(id);\n            }\n            var iframe = document.getElementById(handler._getIframeName(id));\n            if (iframe) {\n                iframe.setAttribute(\"src\", \"javascript:false;\");\n                qq(iframe).remove();\n            }\n        }\n        function getFileIdForIframeName(iframeName) {\n            return iframeName.split(\"_\")[0];\n        }\n        function initIframeForUpload(name) {\n            var iframe = qq.toElement(\"<iframe src='javascript:false;' name='\" + name + \"' />\");\n            iframe.setAttribute(\"id\", name);\n            iframe.style.display = \"none\";\n            document.body.appendChild(iframe);\n            return iframe;\n        }\n        function registerPostMessageCallback(iframe, callback) {\n            var iframeName = iframe.id, fileId = getFileIdForIframeName(iframeName), uuid = getUuid(fileId);\n            onloadCallbacks[uuid] = callback;\n            detachLoadEvents[fileId] = qq(iframe).attach(\"load\", function() {\n                if (handler.getInput(fileId)) {\n                    log(\"Received iframe load event for CORS upload request (iframe name \" + iframeName + \")\");\n                    postMessageCallbackTimers[iframeName] = setTimeout(function() {\n                        var errorMessage = \"No valid message received from loaded iframe for iframe name \" + iframeName;\n                        log(errorMessage, \"error\");\n                        callback({\n                            error: errorMessage\n                        });\n                    }, 1e3);\n                }\n            });\n            corsMessageReceiver.receiveMessage(iframeName, function(message) {\n                log(\"Received the following window message: '\" + message + \"'\");\n                var fileId = getFileIdForIframeName(iframeName), response = handler._parseJsonResponse(message), uuid = response.uuid, onloadCallback;\n                if (uuid && onloadCallbacks[uuid]) {\n                    log(\"Handling response for iframe name \" + iframeName);\n                    clearTimeout(postMessageCallbackTimers[iframeName]);\n                    delete postMessageCallbackTimers[iframeName];\n                    handler._detachLoadEvent(iframeName);\n                    onloadCallback = onloadCallbacks[uuid];\n                    delete onloadCallbacks[uuid];\n                    corsMessageReceiver.stopReceivingMessages(iframeName);\n                    onloadCallback(response);\n                } else if (!uuid) {\n                    log(\"'\" + message + \"' does not contain a UUID - ignoring.\");\n                }\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, fileInput) {\n                    super_.add(id, {\n                        input: fileInput\n                    });\n                    fileInput.setAttribute(\"name\", inputName);\n                    if (fileInput.parentNode) {\n                        qq(fileInput).remove();\n                    }\n                },\n                expunge: function(id) {\n                    expungeFile(id);\n                    super_.expunge(id);\n                },\n                isValid: function(id) {\n                    return super_.isValid(id) && handler._getFileState(id).input !== undefined;\n                }\n            };\n        });\n        qq.extend(this, {\n            getInput: function(id) {\n                return handler._getFileState(id).input;\n            },\n            _attachLoadEvent: function(iframe, callback) {\n                var responseDescriptor;\n                if (isCors) {\n                    registerPostMessageCallback(iframe, callback);\n                } else {\n                    detachLoadEvents[iframe.id] = qq(iframe).attach(\"load\", function() {\n                        log(\"Received response for \" + iframe.id);\n                        if (!iframe.parentNode) {\n                            return;\n                        }\n                        try {\n                            if (iframe.contentDocument && iframe.contentDocument.body && iframe.contentDocument.body.innerHTML == \"false\") {\n                                return;\n                            }\n                        } catch (error) {\n                            log(\"Error when attempting to access iframe during handling of upload response (\" + error.message + \")\", \"error\");\n                            responseDescriptor = {\n                                success: false\n                            };\n                        }\n                        callback(responseDescriptor);\n                    });\n                }\n            },\n            _createIframe: function(id) {\n                var iframeName = handler._getIframeName(id);\n                return initIframeForUpload(iframeName);\n            },\n            _detachLoadEvent: function(id) {\n                if (detachLoadEvents[id] !== undefined) {\n                    detachLoadEvents[id]();\n                    delete detachLoadEvents[id];\n                }\n            },\n            _getIframeName: function(fileId) {\n                return fileId + \"_\" + formHandlerInstanceId;\n            },\n            _initFormForUpload: function(spec) {\n                var method = spec.method, endpoint = spec.endpoint, params = spec.params, paramsInBody = spec.paramsInBody, targetName = spec.targetName, form = qq.toElement(\"<form method='\" + method + \"' enctype='multipart/form-data'></form>\"), url = endpoint;\n                if (paramsInBody) {\n                    qq.obj2Inputs(params, form);\n                } else {\n                    url = qq.obj2url(params, endpoint);\n                }\n                form.setAttribute(\"action\", url);\n                form.setAttribute(\"target\", targetName);\n                form.style.display = \"none\";\n                document.body.appendChild(form);\n                return form;\n            },\n            _parseJsonResponse: function(innerHtmlOrMessage) {\n                var response = {};\n                try {\n                    response = qq.parseJson(innerHtmlOrMessage);\n                } catch (error) {\n                    log(\"Error when attempting to parse iframe upload response (\" + error.message + \")\", \"error\");\n                }\n                return response;\n            }\n        });\n    };\n    qq.XhrUploadHandler = function(spec) {\n        \"use strict\";\n        var handler = this, namespace = spec.options.namespace, proxy = spec.proxy, chunking = spec.options.chunking, getChunkSize = function(id) {\n            var fileState = handler._getFileState(id);\n            if (fileState.chunkSize) {\n                return fileState.chunkSize;\n            } else {\n                var chunkSize = chunking.partSize;\n                if (qq.isFunction(chunkSize)) {\n                    chunkSize = chunkSize(id, getSize(id));\n                }\n                fileState.chunkSize = chunkSize;\n                return chunkSize;\n            }\n        }, resume = spec.options.resume, chunkFiles = chunking && spec.options.chunking.enabled && qq.supportedFeatures.chunking, resumeEnabled = resume && spec.options.resume.enabled && chunkFiles && qq.supportedFeatures.resume, getName = proxy.getName, getSize = proxy.getSize, getUuid = proxy.getUuid, getEndpoint = proxy.getEndpoint, getDataByUuid = proxy.getDataByUuid, onUuidChanged = proxy.onUuidChanged, onProgress = proxy.onProgress, log = proxy.log, getCustomResumeData = proxy.getCustomResumeData;\n        function abort(id) {\n            qq.each(handler._getXhrs(id), function(xhrId, xhr) {\n                var ajaxRequester = handler._getAjaxRequester(id, xhrId);\n                xhr.onreadystatechange = null;\n                xhr.upload.onprogress = null;\n                xhr.abort();\n                ajaxRequester && ajaxRequester.canceled && ajaxRequester.canceled(id);\n            });\n        }\n        qq.extend(this, new qq.UploadHandler(spec));\n        qq.override(this, function(super_) {\n            return {\n                add: function(id, blobOrProxy) {\n                    if (qq.isFile(blobOrProxy) || qq.isBlob(blobOrProxy)) {\n                        super_.add(id, {\n                            file: blobOrProxy\n                        });\n                    } else if (blobOrProxy instanceof qq.BlobProxy) {\n                        super_.add(id, {\n                            proxy: blobOrProxy\n                        });\n                    } else {\n                        throw new Error(\"Passed obj is not a File, Blob, or proxy\");\n                    }\n                    handler._initTempState(id);\n                    resumeEnabled && handler._maybePrepareForResume(id);\n                },\n                expunge: function(id) {\n                    abort(id);\n                    handler._maybeDeletePersistedChunkData(id);\n                    handler._clearXhrs(id);\n                    super_.expunge(id);\n                }\n            };\n        });\n        qq.extend(this, {\n            clearCachedChunk: function(id, chunkIdx) {\n                var fileState = handler._getFileState(id);\n                if (fileState) {\n                    delete fileState.temp.cachedChunks[chunkIdx];\n                }\n            },\n            clearXhr: function(id, chunkIdx) {\n                var tempState = handler._getFileState(id).temp;\n                if (tempState.xhrs) {\n                    delete tempState.xhrs[chunkIdx];\n                }\n                if (tempState.ajaxRequesters) {\n                    delete tempState.ajaxRequesters[chunkIdx];\n                }\n            },\n            finalizeChunks: function(id, responseParser) {\n                var lastChunkIdx = handler._getTotalChunks(id) - 1, xhr = handler._getXhr(id, lastChunkIdx);\n                if (responseParser) {\n                    return new qq.Promise().success(responseParser(xhr), xhr);\n                }\n                return new qq.Promise().success({}, xhr);\n            },\n            getFile: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).file;\n            },\n            getProxy: function(id) {\n                return handler.isValid(id) && handler._getFileState(id).proxy;\n            },\n            getResumableFilesData: function() {\n                var resumableFilesData = [];\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    handler.moveInProgressToRemaining(null, uploadData.chunking.inProgress, uploadData.chunking.remaining);\n                    var data = {\n                        name: uploadData.name,\n                        remaining: uploadData.chunking.remaining,\n                        size: uploadData.size,\n                        uuid: uploadData.uuid\n                    };\n                    if (uploadData.key) {\n                        data.key = uploadData.key;\n                    }\n                    if (uploadData.customResumeData) {\n                        data.customResumeData = uploadData.customResumeData;\n                    }\n                    resumableFilesData.push(data);\n                });\n                return resumableFilesData;\n            },\n            isAttemptingResume: function(id) {\n                return handler._getFileState(id).attemptingResume;\n            },\n            isResumable: function(id) {\n                return !!chunking && handler.isValid(id) && !handler._getFileState(id).notResumable;\n            },\n            moveInProgressToRemaining: function(id, optInProgress, optRemaining) {\n                var fileState = handler._getFileState(id) || {}, chunkingState = fileState.chunking || {}, inProgress = optInProgress || chunkingState.inProgress, remaining = optRemaining || chunkingState.remaining;\n                if (inProgress) {\n                    log(qq.format(\"Moving these chunks from in-progress {}, to remaining.\", JSON.stringify(inProgress)));\n                    inProgress.reverse();\n                    qq.each(inProgress, function(idx, chunkIdx) {\n                        remaining.unshift(chunkIdx);\n                    });\n                    inProgress.length = 0;\n                }\n            },\n            pause: function(id) {\n                if (handler.isValid(id)) {\n                    log(qq.format(\"Aborting XHR upload for {} '{}' due to pause instruction.\", id, getName(id)));\n                    handler._getFileState(id).paused = true;\n                    abort(id);\n                    return true;\n                }\n            },\n            reevaluateChunking: function(id) {\n                if (chunking && handler.isValid(id)) {\n                    var state = handler._getFileState(id), totalChunks, i;\n                    delete state.chunking;\n                    state.chunking = {};\n                    totalChunks = handler._getTotalChunks(id);\n                    if (totalChunks > 1 || chunking.mandatory) {\n                        state.chunking.enabled = true;\n                        state.chunking.parts = totalChunks;\n                        state.chunking.remaining = [];\n                        for (i = 0; i < totalChunks; i++) {\n                            state.chunking.remaining.push(i);\n                        }\n                        handler._initTempState(id);\n                    } else {\n                        state.chunking.enabled = false;\n                    }\n                }\n            },\n            updateBlob: function(id, newBlob) {\n                if (handler.isValid(id)) {\n                    handler._getFileState(id).file = newBlob;\n                }\n            },\n            _clearXhrs: function(id) {\n                var tempState = handler._getFileState(id).temp;\n                qq.each(tempState.ajaxRequesters, function(chunkId) {\n                    delete tempState.ajaxRequesters[chunkId];\n                });\n                qq.each(tempState.xhrs, function(chunkId) {\n                    delete tempState.xhrs[chunkId];\n                });\n            },\n            _createXhr: function(id, optChunkIdx) {\n                return handler._registerXhr(id, optChunkIdx, qq.createXhrInstance());\n            },\n            _getAjaxRequester: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.ajaxRequesters[chunkIdx];\n            },\n            _getChunkData: function(id, chunkIndex) {\n                var chunkSize = getChunkSize(id), fileSize = getSize(id), fileOrBlob = handler.getFile(id), startBytes = chunkSize * chunkIndex, endBytes = startBytes + chunkSize >= fileSize ? fileSize : startBytes + chunkSize, totalChunks = handler._getTotalChunks(id), cachedChunks = this._getFileState(id).temp.cachedChunks, blob = cachedChunks[chunkIndex] || qq.sliceBlob(fileOrBlob, startBytes, endBytes);\n                cachedChunks[chunkIndex] = blob;\n                return {\n                    part: chunkIndex,\n                    start: startBytes,\n                    end: endBytes,\n                    count: totalChunks,\n                    blob: blob,\n                    size: endBytes - startBytes\n                };\n            },\n            _getChunkDataForCallback: function(chunkData) {\n                return {\n                    partIndex: chunkData.part,\n                    startByte: chunkData.start + 1,\n                    endByte: chunkData.end,\n                    totalParts: chunkData.count\n                };\n            },\n            _getLocalStorageId: function(id) {\n                var formatVersion = \"5.0\", name = getName(id), size = getSize(id), chunkSize = getChunkSize(id), endpoint = getEndpoint(id), customKeys = resume.customKeys(id), localStorageId = qq.format(\"qq{}resume{}-{}-{}-{}-{}\", namespace, formatVersion, name, size, chunkSize, endpoint);\n                customKeys.forEach(function(key) {\n                    localStorageId += \"-\" + key;\n                });\n                return localStorageId;\n            },\n            _getMimeType: function(id) {\n                return handler.getFile(id).type;\n            },\n            _getPersistableData: function(id) {\n                return handler._getFileState(id).chunking;\n            },\n            _getTotalChunks: function(id) {\n                if (chunking) {\n                    var fileSize = getSize(id), chunkSize = getChunkSize(id);\n                    return Math.ceil(fileSize / chunkSize);\n                }\n            },\n            _getXhr: function(id, optChunkIdx) {\n                var chunkIdx = optChunkIdx == null ? -1 : optChunkIdx;\n                return handler._getFileState(id).temp.xhrs[chunkIdx];\n            },\n            _getXhrs: function(id) {\n                return handler._getFileState(id).temp.xhrs;\n            },\n            _iterateResumeRecords: function(callback) {\n                if (resumeEnabled) {\n                    qq.each(localStorage, function(key, item) {\n                        if (key.indexOf(qq.format(\"qq{}resume\", namespace)) === 0) {\n                            var uploadData = JSON.parse(item);\n                            callback(key, uploadData);\n                        }\n                    });\n                }\n            },\n            _initTempState: function(id) {\n                handler._getFileState(id).temp = {\n                    ajaxRequesters: {},\n                    chunkProgress: {},\n                    xhrs: {},\n                    cachedChunks: {}\n                };\n            },\n            _markNotResumable: function(id) {\n                handler._getFileState(id).notResumable = true;\n            },\n            _maybeDeletePersistedChunkData: function(id) {\n                var localStorageId;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    if (localStorageId && localStorage.getItem(localStorageId)) {\n                        localStorage.removeItem(localStorageId);\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _maybePrepareForResume: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && state.key === undefined) {\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = localStorage.getItem(localStorageId);\n                    if (persistedData) {\n                        persistedData = JSON.parse(persistedData);\n                        if (getDataByUuid(persistedData.uuid)) {\n                            handler._markNotResumable(id);\n                        } else {\n                            log(qq.format(\"Identified file with ID {} and name of {} as resumable.\", id, getName(id)));\n                            onUuidChanged(id, persistedData.uuid);\n                            state.key = persistedData.key;\n                            state.chunking = persistedData.chunking;\n                            state.loaded = persistedData.loaded;\n                            state.customResumeData = persistedData.customResumeData;\n                            state.attemptingResume = true;\n                            handler.moveInProgressToRemaining(id);\n                        }\n                    }\n                }\n            },\n            _maybePersistChunkedState: function(id) {\n                var state = handler._getFileState(id), localStorageId, persistedData;\n                if (resumeEnabled && handler.isResumable(id)) {\n                    var customResumeData = getCustomResumeData(id);\n                    localStorageId = handler._getLocalStorageId(id);\n                    persistedData = {\n                        name: getName(id),\n                        size: getSize(id),\n                        uuid: getUuid(id),\n                        key: state.key,\n                        chunking: state.chunking,\n                        loaded: state.loaded,\n                        lastUpdated: Date.now()\n                    };\n                    if (customResumeData) {\n                        persistedData.customResumeData = customResumeData;\n                    }\n                    try {\n                        localStorage.setItem(localStorageId, JSON.stringify(persistedData));\n                    } catch (error) {\n                        log(qq.format(\"Unable to save resume data for '{}' due to error: '{}'.\", id, error.toString()), \"warn\");\n                    }\n                }\n            },\n            _registerProgressHandler: function(id, chunkIdx, chunkSize) {\n                var xhr = handler._getXhr(id, chunkIdx), name = getName(id), progressCalculator = {\n                    simple: function(loaded, total) {\n                        var fileSize = getSize(id);\n                        if (loaded === total) {\n                            onProgress(id, name, fileSize, fileSize);\n                        } else {\n                            onProgress(id, name, loaded >= fileSize ? fileSize - 1 : loaded, fileSize);\n                        }\n                    },\n                    chunked: function(loaded, total) {\n                        var chunkProgress = handler._getFileState(id).temp.chunkProgress, totalSuccessfullyLoadedForFile = handler._getFileState(id).loaded, loadedForRequest = loaded, totalForRequest = total, totalFileSize = getSize(id), estActualChunkLoaded = loadedForRequest - (totalForRequest - chunkSize), totalLoadedForFile = totalSuccessfullyLoadedForFile;\n                        chunkProgress[chunkIdx] = estActualChunkLoaded;\n                        qq.each(chunkProgress, function(chunkIdx, chunkLoaded) {\n                            totalLoadedForFile += chunkLoaded;\n                        });\n                        onProgress(id, name, totalLoadedForFile, totalFileSize);\n                    }\n                };\n                xhr.upload.onprogress = function(e) {\n                    if (e.lengthComputable) {\n                        var type = chunkSize == null ? \"simple\" : \"chunked\";\n                        progressCalculator[type](e.loaded, e.total);\n                    }\n                };\n            },\n            _registerXhr: function(id, optChunkIdx, xhr, optAjaxRequester) {\n                var xhrsId = optChunkIdx == null ? -1 : optChunkIdx, tempState = handler._getFileState(id).temp;\n                tempState.xhrs = tempState.xhrs || {};\n                tempState.ajaxRequesters = tempState.ajaxRequesters || {};\n                tempState.xhrs[xhrsId] = xhr;\n                if (optAjaxRequester) {\n                    tempState.ajaxRequesters[xhrsId] = optAjaxRequester;\n                }\n                return xhr;\n            },\n            _removeExpiredChunkingRecords: function() {\n                var expirationDays = resume.recordsExpireIn;\n                handler._iterateResumeRecords(function(key, uploadData) {\n                    var expirationDate = new Date(uploadData.lastUpdated);\n                    expirationDate.setDate(expirationDate.getDate() + expirationDays);\n                    if (expirationDate.getTime() <= Date.now()) {\n                        log(\"Removing expired resume record with key \" + key);\n                        localStorage.removeItem(key);\n                    }\n                });\n            },\n            _shouldChunkThisFile: function(id) {\n                var state = handler._getFileState(id);\n                if (state) {\n                    if (!state.chunking) {\n                        handler.reevaluateChunking(id);\n                    }\n                    return state.chunking.enabled;\n                }\n            }\n        });\n    };\n    qq.DeleteFileAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            method: \"DELETE\",\n            uuidParamName: \"qquuid\",\n            endpointStore: {},\n            maxConnections: 3,\n            customHeaders: function(id) {\n                return {};\n            },\n            paramsStore: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            log: function(str, level) {},\n            onDelete: function(id) {},\n            onDeleteComplete: function(id, xhrOrXdr, isError) {}\n        };\n        qq.extend(options, o);\n        function getMandatedParams() {\n            if (options.method.toUpperCase() === \"POST\") {\n                return {\n                    _method: \"DELETE\"\n                };\n            }\n            return {};\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"POST\", \"DELETE\" ],\n            method: options.method,\n            endpointStore: options.endpointStore,\n            paramsStore: options.paramsStore,\n            mandatedParams: getMandatedParams(),\n            maxConnections: options.maxConnections,\n            customHeaders: function(id) {\n                return options.customHeaders.get(id);\n            },\n            log: options.log,\n            onSend: options.onDelete,\n            onComplete: options.onDeleteComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            sendDelete: function(id, uuid, additionalMandatedParams) {\n                var additionalOptions = additionalMandatedParams || {};\n                options.log(\"Submitting delete file request for \" + id);\n                if (options.method === \"DELETE\") {\n                    requester.initTransport(id).withPath(uuid).withParams(additionalOptions).send();\n                } else {\n                    additionalOptions[options.uuidParamName] = uuid;\n                    requester.initTransport(id).withParams(additionalOptions).send();\n                }\n            }\n        });\n    };\n    (function() {\n        function detectSubsampling(img) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, canvas = document.createElement(\"canvas\"), ctx;\n            if (iw * ih > 1024 * 1024) {\n                canvas.width = canvas.height = 1;\n                ctx = canvas.getContext(\"2d\");\n                ctx.drawImage(img, -iw + 1, 0);\n                return ctx.getImageData(0, 0, 1, 1).data[3] === 0;\n            } else {\n                return false;\n            }\n        }\n        function detectVerticalSquash(img, iw, ih) {\n            var canvas = document.createElement(\"canvas\"), sy = 0, ey = ih, py = ih, ctx, data, alpha, ratio;\n            canvas.width = 1;\n            canvas.height = ih;\n            ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(img, 0, 0);\n            data = ctx.getImageData(0, 0, 1, ih).data;\n            while (py > sy) {\n                alpha = data[(py - 1) * 4 + 3];\n                if (alpha === 0) {\n                    ey = py;\n                } else {\n                    sy = py;\n                }\n                py = ey + sy >> 1;\n            }\n            ratio = py / ih;\n            return ratio === 0 ? 1 : ratio;\n        }\n        function renderImageToDataURL(img, blob, options, doSquash) {\n            var canvas = document.createElement(\"canvas\"), mime = options.mime || \"image/jpeg\", promise = new qq.Promise();\n            renderImageToCanvas(img, blob, canvas, options, doSquash).then(function() {\n                promise.success(canvas.toDataURL(mime, options.quality || .8));\n            });\n            return promise;\n        }\n        function maybeCalculateDownsampledDimensions(spec) {\n            var maxPixels = 5241e3;\n            if (!qq.ios()) {\n                throw new qq.Error(\"Downsampled dimensions can only be reliably calculated for iOS!\");\n            }\n            if (spec.origHeight * spec.origWidth > maxPixels) {\n                return {\n                    newHeight: Math.round(Math.sqrt(maxPixels * (spec.origHeight / spec.origWidth))),\n                    newWidth: Math.round(Math.sqrt(maxPixels * (spec.origWidth / spec.origHeight)))\n                };\n            }\n        }\n        function renderImageToCanvas(img, blob, canvas, options, doSquash) {\n            var iw = img.naturalWidth, ih = img.naturalHeight, width = options.width, height = options.height, ctx = canvas.getContext(\"2d\"), promise = new qq.Promise(), modifiedDimensions;\n            ctx.save();\n            if (options.resize) {\n                return renderImageToCanvasWithCustomResizer({\n                    blob: blob,\n                    canvas: canvas,\n                    image: img,\n                    imageHeight: ih,\n                    imageWidth: iw,\n                    orientation: options.orientation,\n                    resize: options.resize,\n                    targetHeight: height,\n                    targetWidth: width\n                });\n            }\n            if (!qq.supportedFeatures.unlimitedScaledImageSize) {\n                modifiedDimensions = maybeCalculateDownsampledDimensions({\n                    origWidth: width,\n                    origHeight: height\n                });\n                if (modifiedDimensions) {\n                    qq.log(qq.format(\"Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h\", width, height, modifiedDimensions.newWidth, modifiedDimensions.newHeight), \"warn\");\n                    width = modifiedDimensions.newWidth;\n                    height = modifiedDimensions.newHeight;\n                }\n            }\n            transformCoordinate(canvas, width, height, options.orientation);\n            if (qq.ios()) {\n                (function() {\n                    if (detectSubsampling(img)) {\n                        iw /= 2;\n                        ih /= 2;\n                    }\n                    var d = 1024, tmpCanvas = document.createElement(\"canvas\"), vertSquashRatio = doSquash ? detectVerticalSquash(img, iw, ih) : 1, dw = Math.ceil(d * width / iw), dh = Math.ceil(d * height / ih / vertSquashRatio), sy = 0, dy = 0, tmpCtx, sx, dx;\n                    tmpCanvas.width = tmpCanvas.height = d;\n                    tmpCtx = tmpCanvas.getContext(\"2d\");\n                    while (sy < ih) {\n                        sx = 0;\n                        dx = 0;\n                        while (sx < iw) {\n                            tmpCtx.clearRect(0, 0, d, d);\n                            tmpCtx.drawImage(img, -sx, -sy);\n                            ctx.drawImage(tmpCanvas, 0, 0, d, d, dx, dy, dw, dh);\n                            sx += d;\n                            dx += dw;\n                        }\n                        sy += d;\n                        dy += dh;\n                    }\n                    ctx.restore();\n                    tmpCanvas = tmpCtx = null;\n                })();\n            } else {\n                ctx.drawImage(img, 0, 0, width, height);\n            }\n            canvas.qqImageRendered && canvas.qqImageRendered();\n            promise.success();\n            return promise;\n        }\n        function renderImageToCanvasWithCustomResizer(resizeInfo) {\n            var blob = resizeInfo.blob, image = resizeInfo.image, imageHeight = resizeInfo.imageHeight, imageWidth = resizeInfo.imageWidth, orientation = resizeInfo.orientation, promise = new qq.Promise(), resize = resizeInfo.resize, sourceCanvas = document.createElement(\"canvas\"), sourceCanvasContext = sourceCanvas.getContext(\"2d\"), targetCanvas = resizeInfo.canvas, targetHeight = resizeInfo.targetHeight, targetWidth = resizeInfo.targetWidth;\n            transformCoordinate(sourceCanvas, imageWidth, imageHeight, orientation);\n            targetCanvas.height = targetHeight;\n            targetCanvas.width = targetWidth;\n            sourceCanvasContext.drawImage(image, 0, 0);\n            resize({\n                blob: blob,\n                height: targetHeight,\n                image: image,\n                sourceCanvas: sourceCanvas,\n                targetCanvas: targetCanvas,\n                width: targetWidth\n            }).then(function success() {\n                targetCanvas.qqImageRendered && targetCanvas.qqImageRendered();\n                promise.success();\n            }, promise.failure);\n            return promise;\n        }\n        function transformCoordinate(canvas, width, height, orientation) {\n            switch (orientation) {\n              case 5:\n              case 6:\n              case 7:\n              case 8:\n                canvas.width = height;\n                canvas.height = width;\n                break;\n\n              default:\n                canvas.width = width;\n                canvas.height = height;\n            }\n            var ctx = canvas.getContext(\"2d\");\n            switch (orientation) {\n              case 2:\n                ctx.translate(width, 0);\n                ctx.scale(-1, 1);\n                break;\n\n              case 3:\n                ctx.translate(width, height);\n                ctx.rotate(Math.PI);\n                break;\n\n              case 4:\n                ctx.translate(0, height);\n                ctx.scale(1, -1);\n                break;\n\n              case 5:\n                ctx.rotate(.5 * Math.PI);\n                ctx.scale(1, -1);\n                break;\n\n              case 6:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(0, -height);\n                break;\n\n              case 7:\n                ctx.rotate(.5 * Math.PI);\n                ctx.translate(width, -height);\n                ctx.scale(-1, 1);\n                break;\n\n              case 8:\n                ctx.rotate(-.5 * Math.PI);\n                ctx.translate(-width, 0);\n                break;\n\n              default:\n                break;\n            }\n        }\n        function MegaPixImage(srcImage, errorCallback) {\n            var self = this;\n            if (window.Blob && srcImage instanceof Blob) {\n                (function() {\n                    var img = new Image(), URL = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                    if (!URL) {\n                        throw Error(\"No createObjectURL function found to create blob url\");\n                    }\n                    img.src = URL.createObjectURL(srcImage);\n                    self.blob = srcImage;\n                    srcImage = img;\n                })();\n            }\n            if (!srcImage.naturalWidth && !srcImage.naturalHeight) {\n                srcImage.onload = function() {\n                    var listeners = self.imageLoadListeners;\n                    if (listeners) {\n                        self.imageLoadListeners = null;\n                        setTimeout(function() {\n                            for (var i = 0, len = listeners.length; i < len; i++) {\n                                listeners[i]();\n                            }\n                        }, 0);\n                    }\n                };\n                srcImage.onerror = errorCallback;\n                this.imageLoadListeners = [];\n            }\n            this.srcImage = srcImage;\n        }\n        MegaPixImage.prototype.render = function(target, options) {\n            options = options || {};\n            var self = this, imgWidth = this.srcImage.naturalWidth, imgHeight = this.srcImage.naturalHeight, width = options.width, height = options.height, maxWidth = options.maxWidth, maxHeight = options.maxHeight, doSquash = !this.blob || this.blob.type === \"image/jpeg\", tagName = target.tagName.toLowerCase(), opt;\n            if (this.imageLoadListeners) {\n                this.imageLoadListeners.push(function() {\n                    self.render(target, options);\n                });\n                return;\n            }\n            if (width && !height) {\n                height = imgHeight * width / imgWidth << 0;\n            } else if (height && !width) {\n                width = imgWidth * height / imgHeight << 0;\n            } else {\n                width = imgWidth;\n                height = imgHeight;\n            }\n            if (maxWidth && width > maxWidth) {\n                width = maxWidth;\n                height = imgHeight * width / imgWidth << 0;\n            }\n            if (maxHeight && height > maxHeight) {\n                height = maxHeight;\n                width = imgWidth * height / imgHeight << 0;\n            }\n            opt = {\n                width: width,\n                height: height\n            }, qq.each(options, function(optionsKey, optionsValue) {\n                opt[optionsKey] = optionsValue;\n            });\n            if (tagName === \"img\") {\n                (function() {\n                    var oldTargetSrc = target.src;\n                    renderImageToDataURL(self.srcImage, self.blob, opt, doSquash).then(function(dataUri) {\n                        target.src = dataUri;\n                        oldTargetSrc === target.src && target.onload();\n                    });\n                })();\n            } else if (tagName === \"canvas\") {\n                renderImageToCanvas(this.srcImage, this.blob, target, opt, doSquash);\n            }\n            if (typeof this.onrender === \"function\") {\n                this.onrender(target);\n            }\n        };\n        qq.MegaPixImage = MegaPixImage;\n    })();\n    qq.ImageGenerator = function(log) {\n        \"use strict\";\n        function isImg(el) {\n            return el.tagName.toLowerCase() === \"img\";\n        }\n        function isCanvas(el) {\n            return el.tagName.toLowerCase() === \"canvas\";\n        }\n        function isImgCorsSupported() {\n            return new Image().crossOrigin !== undefined;\n        }\n        function isCanvasSupported() {\n            var canvas = document.createElement(\"canvas\");\n            return canvas.getContext && canvas.getContext(\"2d\");\n        }\n        function determineMimeOfFileName(nameWithPath) {\n            var pathSegments = nameWithPath.split(\"/\"), name = pathSegments[pathSegments.length - 1].split(\"?\")[0], extension = qq.getExtension(name);\n            extension = extension && extension.toLowerCase();\n            switch (extension) {\n              case \"jpeg\":\n              case \"jpg\":\n                return \"image/jpeg\";\n\n              case \"png\":\n                return \"image/png\";\n\n              case \"bmp\":\n                return \"image/bmp\";\n\n              case \"gif\":\n                return \"image/gif\";\n\n              case \"tiff\":\n              case \"tif\":\n                return \"image/tiff\";\n            }\n        }\n        function isCrossOrigin(url) {\n            var targetAnchor = document.createElement(\"a\"), targetProtocol, targetHostname, targetPort;\n            targetAnchor.href = url;\n            targetProtocol = targetAnchor.protocol;\n            targetPort = targetAnchor.port;\n            targetHostname = targetAnchor.hostname;\n            if (targetProtocol.toLowerCase() !== window.location.protocol.toLowerCase()) {\n                return true;\n            }\n            if (targetHostname.toLowerCase() !== window.location.hostname.toLowerCase()) {\n                return true;\n            }\n            if (targetPort !== window.location.port && !qq.ie()) {\n                return true;\n            }\n            return false;\n        }\n        function registerImgLoadListeners(img, promise) {\n            img.onload = function() {\n                img.onload = null;\n                img.onerror = null;\n                promise.success(img);\n            };\n            img.onerror = function() {\n                img.onload = null;\n                img.onerror = null;\n                log(\"Problem drawing thumbnail!\", \"error\");\n                promise.failure(img, \"Problem drawing thumbnail!\");\n            };\n        }\n        function registerCanvasDrawImageListener(canvas, promise) {\n            canvas.qqImageRendered = function() {\n                promise.success(canvas);\n            };\n        }\n        function registerThumbnailRenderedListener(imgOrCanvas, promise) {\n            var registered = isImg(imgOrCanvas) || isCanvas(imgOrCanvas);\n            if (isImg(imgOrCanvas)) {\n                registerImgLoadListeners(imgOrCanvas, promise);\n            } else if (isCanvas(imgOrCanvas)) {\n                registerCanvasDrawImageListener(imgOrCanvas, promise);\n            } else {\n                promise.failure(imgOrCanvas);\n                log(qq.format(\"Element container of type {} is not supported!\", imgOrCanvas.tagName), \"error\");\n            }\n            return registered;\n        }\n        function draw(fileOrBlob, container, options) {\n            var drawPreview = new qq.Promise(), identifier = new qq.Identify(fileOrBlob, log), maxSize = options.maxSize, orient = options.orient == null ? true : options.orient, megapixErrorHandler = function() {\n                container.onerror = null;\n                container.onload = null;\n                log(\"Could not render preview, file may be too large!\", \"error\");\n                drawPreview.failure(container, \"Browser cannot render image!\");\n            };\n            identifier.isPreviewable().then(function(mime) {\n                var dummyExif = {\n                    parse: function() {\n                        return new qq.Promise().success();\n                    }\n                }, exif = orient ? new qq.Exif(fileOrBlob, log) : dummyExif, mpImg = new qq.MegaPixImage(fileOrBlob, megapixErrorHandler);\n                if (registerThumbnailRenderedListener(container, drawPreview)) {\n                    exif.parse().then(function(exif) {\n                        var orientation = exif && exif.Orientation;\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            orientation: orientation,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    }, function(failureMsg) {\n                        log(qq.format(\"EXIF data could not be parsed ({}).  Assuming orientation = 1.\", failureMsg));\n                        mpImg.render(container, {\n                            maxWidth: maxSize,\n                            maxHeight: maxSize,\n                            mime: mime,\n                            resize: options.customResizeFunction\n                        });\n                    });\n                }\n            }, function() {\n                log(\"Not previewable\");\n                drawPreview.failure(container, \"Not previewable\");\n            });\n            return drawPreview;\n        }\n        function drawOnCanvasOrImgFromUrl(url, canvasOrImg, draw, maxSize, customResizeFunction) {\n            var tempImg = new Image(), tempImgRender = new qq.Promise();\n            registerThumbnailRenderedListener(tempImg, tempImgRender);\n            if (isCrossOrigin(url)) {\n                tempImg.crossOrigin = \"anonymous\";\n            }\n            tempImg.src = url;\n            tempImgRender.then(function rendered() {\n                registerThumbnailRenderedListener(canvasOrImg, draw);\n                var mpImg = new qq.MegaPixImage(tempImg);\n                mpImg.render(canvasOrImg, {\n                    maxWidth: maxSize,\n                    maxHeight: maxSize,\n                    mime: determineMimeOfFileName(url),\n                    resize: customResizeFunction\n                });\n            }, draw.failure);\n        }\n        function drawOnImgFromUrlWithCssScaling(url, img, draw, maxSize) {\n            registerThumbnailRenderedListener(img, draw);\n            qq(img).css({\n                maxWidth: maxSize + \"px\",\n                maxHeight: maxSize + \"px\"\n            });\n            img.src = url;\n        }\n        function drawFromUrl(url, container, options) {\n            var draw = new qq.Promise(), scale = options.scale, maxSize = scale ? options.maxSize : null;\n            if (scale && isImg(container)) {\n                if (isCanvasSupported()) {\n                    if (isCrossOrigin(url) && !isImgCorsSupported()) {\n                        drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                    } else {\n                        drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n                    }\n                } else {\n                    drawOnImgFromUrlWithCssScaling(url, container, draw, maxSize);\n                }\n            } else if (isCanvas(container)) {\n                drawOnCanvasOrImgFromUrl(url, container, draw, maxSize);\n            } else if (registerThumbnailRenderedListener(container, draw)) {\n                container.src = url;\n            }\n            return draw;\n        }\n        qq.extend(this, {\n            generate: function(fileBlobOrUrl, container, options) {\n                if (qq.isString(fileBlobOrUrl)) {\n                    log(\"Attempting to update thumbnail based on server response.\");\n                    return drawFromUrl(fileBlobOrUrl, container, options || {});\n                } else {\n                    log(\"Attempting to draw client-side image preview.\");\n                    return draw(fileBlobOrUrl, container, options || {});\n                }\n            }\n        });\n        this._testing = {};\n        this._testing.isImg = isImg;\n        this._testing.isCanvas = isCanvas;\n        this._testing.isCrossOrigin = isCrossOrigin;\n        this._testing.determineMimeOfFileName = determineMimeOfFileName;\n    };\n    qq.Exif = function(fileOrBlob, log) {\n        \"use strict\";\n        var TAG_IDS = [ 274 ], TAG_INFO = {\n            274: {\n                name: \"Orientation\",\n                bytes: 2\n            }\n        };\n        function parseLittleEndian(hex) {\n            var result = 0, pow = 0;\n            while (hex.length > 0) {\n                result += parseInt(hex.substring(0, 2), 16) * Math.pow(2, pow);\n                hex = hex.substring(2, hex.length);\n                pow += 8;\n            }\n            return result;\n        }\n        function seekToApp1(offset, promise) {\n            var theOffset = offset, thePromise = promise;\n            if (theOffset === undefined) {\n                theOffset = 2;\n                thePromise = new qq.Promise();\n            }\n            qq.readBlobToHex(fileOrBlob, theOffset, 4).then(function(hex) {\n                var match = /^ffe([0-9])/.exec(hex), segmentLength;\n                if (match) {\n                    if (match[1] !== \"1\") {\n                        segmentLength = parseInt(hex.slice(4, 8), 16);\n                        seekToApp1(theOffset + segmentLength + 2, thePromise);\n                    } else {\n                        thePromise.success(theOffset);\n                    }\n                } else {\n                    thePromise.failure(\"No EXIF header to be found!\");\n                }\n            });\n            return thePromise;\n        }\n        function getApp1Offset() {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, 0, 6).then(function(hex) {\n                if (hex.indexOf(\"ffd8\") !== 0) {\n                    promise.failure(\"Not a valid JPEG!\");\n                } else {\n                    seekToApp1().then(function(offset) {\n                        promise.success(offset);\n                    }, function(error) {\n                        promise.failure(error);\n                    });\n                }\n            });\n            return promise;\n        }\n        function isLittleEndian(app1Start) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 10, 2).then(function(hex) {\n                promise.success(hex === \"4949\");\n            });\n            return promise;\n        }\n        function getDirEntryCount(app1Start, littleEndian) {\n            var promise = new qq.Promise();\n            qq.readBlobToHex(fileOrBlob, app1Start + 18, 2).then(function(hex) {\n                if (littleEndian) {\n                    return promise.success(parseLittleEndian(hex));\n                } else {\n                    promise.success(parseInt(hex, 16));\n                }\n            });\n            return promise;\n        }\n        function getIfd(app1Start, dirEntries) {\n            var offset = app1Start + 20, bytes = dirEntries * 12;\n            return qq.readBlobToHex(fileOrBlob, offset, bytes);\n        }\n        function getDirEntries(ifdHex) {\n            var entries = [], offset = 0;\n            while (offset + 24 <= ifdHex.length) {\n                entries.push(ifdHex.slice(offset, offset + 24));\n                offset += 24;\n            }\n            return entries;\n        }\n        function getTagValues(littleEndian, dirEntries) {\n            var TAG_VAL_OFFSET = 16, tagsToFind = qq.extend([], TAG_IDS), vals = {};\n            qq.each(dirEntries, function(idx, entry) {\n                var idHex = entry.slice(0, 4), id = littleEndian ? parseLittleEndian(idHex) : parseInt(idHex, 16), tagsToFindIdx = tagsToFind.indexOf(id), tagValHex, tagName, tagValLength;\n                if (tagsToFindIdx >= 0) {\n                    tagName = TAG_INFO[id].name;\n                    tagValLength = TAG_INFO[id].bytes;\n                    tagValHex = entry.slice(TAG_VAL_OFFSET, TAG_VAL_OFFSET + tagValLength * 2);\n                    vals[tagName] = littleEndian ? parseLittleEndian(tagValHex) : parseInt(tagValHex, 16);\n                    tagsToFind.splice(tagsToFindIdx, 1);\n                }\n                if (tagsToFind.length === 0) {\n                    return false;\n                }\n            });\n            return vals;\n        }\n        qq.extend(this, {\n            parse: function() {\n                var parser = new qq.Promise(), onParseFailure = function(message) {\n                    log(qq.format(\"EXIF header parse failed: '{}' \", message));\n                    parser.failure(message);\n                };\n                getApp1Offset().then(function(app1Offset) {\n                    log(qq.format(\"Moving forward with EXIF header parsing for '{}'\", fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name));\n                    isLittleEndian(app1Offset).then(function(littleEndian) {\n                        log(qq.format(\"EXIF Byte order is {} endian\", littleEndian ? \"little\" : \"big\"));\n                        getDirEntryCount(app1Offset, littleEndian).then(function(dirEntryCount) {\n                            log(qq.format(\"Found {} APP1 directory entries\", dirEntryCount));\n                            getIfd(app1Offset, dirEntryCount).then(function(ifdHex) {\n                                var dirEntries = getDirEntries(ifdHex), tagValues = getTagValues(littleEndian, dirEntries);\n                                log(\"Successfully parsed some EXIF tags\");\n                                parser.success(tagValues);\n                            }, onParseFailure);\n                        }, onParseFailure);\n                    }, onParseFailure);\n                }, onParseFailure);\n                return parser;\n            }\n        });\n        this._testing = {};\n        this._testing.parseLittleEndian = parseLittleEndian;\n    };\n    qq.Identify = function(fileOrBlob, log) {\n        \"use strict\";\n        function isIdentifiable(magicBytes, questionableBytes) {\n            var identifiable = false, magicBytesEntries = [].concat(magicBytes);\n            qq.each(magicBytesEntries, function(idx, magicBytesArrayEntry) {\n                if (questionableBytes.indexOf(magicBytesArrayEntry) === 0) {\n                    identifiable = true;\n                    return false;\n                }\n            });\n            return identifiable;\n        }\n        qq.extend(this, {\n            isPreviewable: function() {\n                var self = this, identifier = new qq.Promise(), previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                log(qq.format(\"Attempting to determine if {} can be rendered in this browser\", name));\n                log(\"First pass: check type attribute of blob object.\");\n                if (this.isPreviewableSync()) {\n                    log(\"Second pass: check for magic bytes in file header.\");\n                    qq.readBlobToHex(fileOrBlob, 0, 4).then(function(hex) {\n                        qq.each(self.PREVIEWABLE_MIME_TYPES, function(mime, bytes) {\n                            if (isIdentifiable(bytes, hex)) {\n                                if (mime !== \"image/tiff\" || qq.supportedFeatures.tiffPreviews) {\n                                    previewable = true;\n                                    identifier.success(mime);\n                                }\n                                return false;\n                            }\n                        });\n                        log(qq.format(\"'{}' is {} able to be rendered in this browser\", name, previewable ? \"\" : \"NOT\"));\n                        if (!previewable) {\n                            identifier.failure();\n                        }\n                    }, function() {\n                        log(\"Error reading file w/ name '\" + name + \"'.  Not able to be rendered in this browser.\");\n                        identifier.failure();\n                    });\n                } else {\n                    identifier.failure();\n                }\n                return identifier;\n            },\n            isPreviewableSync: function() {\n                var fileMime = fileOrBlob.type, isRecognizedImage = qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES), fileMime) >= 0, previewable = false, name = fileOrBlob.name === undefined ? \"blob\" : fileOrBlob.name;\n                if (isRecognizedImage) {\n                    if (fileMime === \"image/tiff\") {\n                        previewable = qq.supportedFeatures.tiffPreviews;\n                    } else {\n                        previewable = true;\n                    }\n                }\n                !previewable && log(name + \" is not previewable in this browser per the blob's type attr\");\n                return previewable;\n            }\n        });\n    };\n    qq.Identify.prototype.PREVIEWABLE_MIME_TYPES = {\n        \"image/jpeg\": \"ffd8ff\",\n        \"image/gif\": \"474946\",\n        \"image/png\": \"89504e\",\n        \"image/bmp\": \"424d\",\n        \"image/tiff\": [ \"49492a00\", \"4d4d002a\" ]\n    };\n    qq.ImageValidation = function(blob, log) {\n        \"use strict\";\n        function hasNonZeroLimits(limits) {\n            var atLeastOne = false;\n            qq.each(limits, function(limit, value) {\n                if (value > 0) {\n                    atLeastOne = true;\n                    return false;\n                }\n            });\n            return atLeastOne;\n        }\n        function getWidthHeight() {\n            var sizeDetermination = new qq.Promise();\n            new qq.Identify(blob, log).isPreviewable().then(function() {\n                var image = new Image(), url = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL && window.webkitURL.createObjectURL ? window.webkitURL : null;\n                if (url) {\n                    image.onerror = function() {\n                        log(\"Cannot determine dimensions for image.  May be too large.\", \"error\");\n                        sizeDetermination.failure();\n                    };\n                    image.onload = function() {\n                        sizeDetermination.success({\n                            width: this.width,\n                            height: this.height\n                        });\n                    };\n                    image.src = url.createObjectURL(blob);\n                } else {\n                    log(\"No createObjectURL function available to generate image URL!\", \"error\");\n                    sizeDetermination.failure();\n                }\n            }, sizeDetermination.failure);\n            return sizeDetermination;\n        }\n        function getFailingLimit(limits, dimensions) {\n            var failingLimit;\n            qq.each(limits, function(limitName, limitValue) {\n                if (limitValue > 0) {\n                    var limitMatcher = /(max|min)(Width|Height)/.exec(limitName), dimensionPropName = limitMatcher[2].charAt(0).toLowerCase() + limitMatcher[2].slice(1), actualValue = dimensions[dimensionPropName];\n                    switch (limitMatcher[1]) {\n                      case \"min\":\n                        if (actualValue < limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n\n                      case \"max\":\n                        if (actualValue > limitValue) {\n                            failingLimit = limitName;\n                            return false;\n                        }\n                        break;\n                    }\n                }\n            });\n            return failingLimit;\n        }\n        this.validate = function(limits) {\n            var validationEffort = new qq.Promise();\n            log(\"Attempting to validate image.\");\n            if (hasNonZeroLimits(limits)) {\n                getWidthHeight().then(function(dimensions) {\n                    var failingLimit = getFailingLimit(limits, dimensions);\n                    if (failingLimit) {\n                        validationEffort.failure(failingLimit);\n                    } else {\n                        validationEffort.success();\n                    }\n                }, validationEffort.success);\n            } else {\n                validationEffort.success();\n            }\n            return validationEffort;\n        };\n    };\n    qq.Session = function(spec) {\n        \"use strict\";\n        var options = {\n            endpoint: null,\n            params: {},\n            customHeaders: {},\n            cors: {},\n            addFileRecord: function(sessionData) {},\n            log: function(message, level) {}\n        };\n        qq.extend(options, spec, true);\n        function isJsonResponseValid(response) {\n            if (qq.isArray(response)) {\n                return true;\n            }\n            options.log(\"Session response is not an array.\", \"error\");\n        }\n        function handleFileItems(fileItems, success, xhrOrXdr, promise) {\n            var someItemsIgnored = false;\n            success = success && isJsonResponseValid(fileItems);\n            if (success) {\n                qq.each(fileItems, function(idx, fileItem) {\n                    if (fileItem.uuid == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid UUID - ignoring.\", idx), \"error\");\n                    } else if (fileItem.name == null) {\n                        someItemsIgnored = true;\n                        options.log(qq.format(\"Session response item {} did not include a valid name - ignoring.\", idx), \"error\");\n                    } else {\n                        try {\n                            options.addFileRecord(fileItem);\n                            return true;\n                        } catch (err) {\n                            someItemsIgnored = true;\n                            options.log(err.message, \"error\");\n                        }\n                    }\n                    return false;\n                });\n            }\n            promise[success && !someItemsIgnored ? \"success\" : \"failure\"](fileItems, xhrOrXdr);\n        }\n        this.refresh = function() {\n            var refreshEffort = new qq.Promise(), refreshCompleteCallback = function(response, success, xhrOrXdr) {\n                handleFileItems(response, success, xhrOrXdr, refreshEffort);\n            }, requesterOptions = qq.extend({}, options), requester = new qq.SessionAjaxRequester(qq.extend(requesterOptions, {\n                onComplete: refreshCompleteCallback\n            }));\n            requester.queryServer();\n            return refreshEffort;\n        };\n    };\n    qq.SessionAjaxRequester = function(spec) {\n        \"use strict\";\n        var requester, options = {\n            endpoint: null,\n            customHeaders: {},\n            params: {},\n            cors: {\n                expected: false,\n                sendCredentials: false\n            },\n            onComplete: function(response, success, xhrOrXdr) {},\n            log: function(str, level) {}\n        };\n        qq.extend(options, spec);\n        function onComplete(id, xhrOrXdr, isError) {\n            var response = null;\n            if (xhrOrXdr.responseText != null) {\n                try {\n                    response = qq.parseJson(xhrOrXdr.responseText);\n                } catch (err) {\n                    options.log(\"Problem parsing session response: \" + err.message, \"error\");\n                    isError = true;\n                }\n            }\n            options.onComplete(response, !isError, xhrOrXdr);\n        }\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            validMethods: [ \"GET\" ],\n            method: \"GET\",\n            endpointStore: {\n                get: function() {\n                    return options.endpoint;\n                }\n            },\n            customHeaders: options.customHeaders,\n            log: options.log,\n            onComplete: onComplete,\n            cors: options.cors\n        }));\n        qq.extend(this, {\n            queryServer: function() {\n                var params = qq.extend({}, options.params);\n                options.log(\"Session query request.\");\n                requester.initTransport(\"sessionRefresh\").withParams(params).withCacheBuster().send();\n            }\n        });\n    };\n    qq.Scaler = function(spec, log) {\n        \"use strict\";\n        var self = this, customResizeFunction = spec.customResizer, includeOriginal = spec.sendOriginal, orient = spec.orient, defaultType = spec.defaultType, defaultQuality = spec.defaultQuality / 100, failedToScaleText = spec.failureText, includeExif = spec.includeExif, sizes = this._getSortedSizes(spec.sizes);\n        qq.extend(this, {\n            enabled: qq.supportedFeatures.scaling && sizes.length > 0,\n            getFileRecords: function(originalFileUuid, originalFileName, originalBlobOrBlobData) {\n                var self = this, records = [], originalBlob = originalBlobOrBlobData.blob ? originalBlobOrBlobData.blob : originalBlobOrBlobData, identifier = new qq.Identify(originalBlob, log);\n                if (identifier.isPreviewableSync()) {\n                    qq.each(sizes, function(idx, sizeRecord) {\n                        var outputType = self._determineOutputType({\n                            defaultType: defaultType,\n                            requestedType: sizeRecord.type,\n                            refType: originalBlob.type\n                        });\n                        records.push({\n                            uuid: qq.getUniqueId(),\n                            name: self._getName(originalFileName, {\n                                name: sizeRecord.name,\n                                type: outputType,\n                                refType: originalBlob.type\n                            }),\n                            blob: new qq.BlobProxy(originalBlob, qq.bind(self._generateScaledImage, self, {\n                                customResizeFunction: customResizeFunction,\n                                maxSize: sizeRecord.maxSize,\n                                orient: orient,\n                                type: outputType,\n                                quality: defaultQuality,\n                                failedText: failedToScaleText,\n                                includeExif: includeExif,\n                                log: log\n                            }))\n                        });\n                    });\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: includeOriginal ? originalBlob : null\n                    });\n                } else {\n                    records.push({\n                        uuid: originalFileUuid,\n                        name: originalFileName,\n                        size: originalBlob.size,\n                        blob: originalBlob\n                    });\n                }\n                return records;\n            },\n            handleNewFile: function(file, name, uuid, size, fileList, batchId, uuidParamName, api) {\n                var self = this, buttonId = file.qqButtonId || file.blob && file.blob.qqButtonId, scaledIds = [], originalId = null, addFileToHandler = api.addFileToHandler, uploadData = api.uploadData, paramsStore = api.paramsStore, proxyGroupId = qq.getUniqueId();\n                qq.each(self.getFileRecords(uuid, name, file), function(idx, record) {\n                    var blobSize = record.size, id;\n                    if (record.blob instanceof qq.BlobProxy) {\n                        blobSize = -1;\n                    }\n                    id = uploadData.addFile({\n                        uuid: record.uuid,\n                        name: record.name,\n                        size: blobSize,\n                        batchId: batchId,\n                        proxyGroupId: proxyGroupId\n                    });\n                    if (record.blob instanceof qq.BlobProxy) {\n                        scaledIds.push(id);\n                    } else {\n                        originalId = id;\n                    }\n                    if (record.blob) {\n                        addFileToHandler(id, record.blob);\n                        fileList.push({\n                            id: id,\n                            file: record.blob\n                        });\n                    } else {\n                        uploadData.setStatus(id, qq.status.REJECTED);\n                    }\n                });\n                if (originalId !== null) {\n                    qq.each(scaledIds, function(idx, scaledId) {\n                        var params = {\n                            qqparentuuid: uploadData.retrieve({\n                                id: originalId\n                            }).uuid,\n                            qqparentsize: uploadData.retrieve({\n                                id: originalId\n                            }).size\n                        };\n                        params[uuidParamName] = uploadData.retrieve({\n                            id: scaledId\n                        }).uuid;\n                        uploadData.setParentId(scaledId, originalId);\n                        paramsStore.addReadOnly(scaledId, params);\n                    });\n                    if (scaledIds.length) {\n                        (function() {\n                            var param = {};\n                            param[uuidParamName] = uploadData.retrieve({\n                                id: originalId\n                            }).uuid;\n                            paramsStore.addReadOnly(originalId, param);\n                        })();\n                    }\n                }\n            }\n        });\n    };\n    qq.extend(qq.Scaler.prototype, {\n        scaleImage: function(id, specs, api) {\n            \"use strict\";\n            if (!qq.supportedFeatures.scaling) {\n                throw new qq.Error(\"Scaling is not supported in this browser!\");\n            }\n            var scalingEffort = new qq.Promise(), log = api.log, file = api.getFile(id), uploadData = api.uploadData.retrieve({\n                id: id\n            }), name = uploadData && uploadData.name, uuid = uploadData && uploadData.uuid, scalingOptions = {\n                customResizer: specs.customResizer,\n                sendOriginal: false,\n                orient: specs.orient,\n                defaultType: specs.type || null,\n                defaultQuality: specs.quality,\n                failedToScaleText: \"Unable to scale\",\n                sizes: [ {\n                    name: \"\",\n                    maxSize: specs.maxSize\n                } ]\n            }, scaler = new qq.Scaler(scalingOptions, log);\n            if (!qq.Scaler || !qq.supportedFeatures.imagePreviews || !file) {\n                scalingEffort.failure();\n                log(\"Could not generate requested scaled image for \" + id + \".  \" + \"Scaling is either not possible in this browser, or the file could not be located.\", \"error\");\n            } else {\n                qq.bind(function() {\n                    var record = scaler.getFileRecords(uuid, name, file)[0];\n                    if (record && record.blob instanceof qq.BlobProxy) {\n                        record.blob.create().then(scalingEffort.success, scalingEffort.failure);\n                    } else {\n                        log(id + \" is not a scalable image!\", \"error\");\n                        scalingEffort.failure();\n                    }\n                }, this)();\n            }\n            return scalingEffort;\n        },\n        _determineOutputType: function(spec) {\n            \"use strict\";\n            var requestedType = spec.requestedType, defaultType = spec.defaultType, referenceType = spec.refType;\n            if (!defaultType && !requestedType) {\n                if (referenceType !== \"image/jpeg\") {\n                    return \"image/png\";\n                }\n                return referenceType;\n            }\n            if (!requestedType) {\n                return defaultType;\n            }\n            if (qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES), requestedType) >= 0) {\n                if (requestedType === \"image/tiff\") {\n                    return qq.supportedFeatures.tiffPreviews ? requestedType : defaultType;\n                }\n                return requestedType;\n            }\n            return defaultType;\n        },\n        _getName: function(originalName, scaledVersionProperties) {\n            \"use strict\";\n            var startOfExt = originalName.lastIndexOf(\".\"), versionType = scaledVersionProperties.type || \"image/png\", referenceType = scaledVersionProperties.refType, scaledName = \"\", scaledExt = qq.getExtension(originalName), nameAppendage = \"\";\n            if (scaledVersionProperties.name && scaledVersionProperties.name.trim().length) {\n                nameAppendage = \" (\" + scaledVersionProperties.name + \")\";\n            }\n            if (startOfExt >= 0) {\n                scaledName = originalName.substr(0, startOfExt);\n                if (referenceType !== versionType) {\n                    scaledExt = versionType.split(\"/\")[1];\n                }\n                scaledName += nameAppendage + \".\" + scaledExt;\n            } else {\n                scaledName = originalName + nameAppendage;\n            }\n            return scaledName;\n        },\n        _getSortedSizes: function(sizes) {\n            \"use strict\";\n            sizes = qq.extend([], sizes);\n            return sizes.sort(function(a, b) {\n                if (a.maxSize > b.maxSize) {\n                    return 1;\n                }\n                if (a.maxSize < b.maxSize) {\n                    return -1;\n                }\n                return 0;\n            });\n        },\n        _generateScaledImage: function(spec, sourceFile) {\n            \"use strict\";\n            var self = this, customResizeFunction = spec.customResizeFunction, log = spec.log, maxSize = spec.maxSize, orient = spec.orient, type = spec.type, quality = spec.quality, failedText = spec.failedText, includeExif = spec.includeExif && sourceFile.type === \"image/jpeg\" && type === \"image/jpeg\", scalingEffort = new qq.Promise(), imageGenerator = new qq.ImageGenerator(log), canvas = document.createElement(\"canvas\");\n            log(\"Attempting to generate scaled version for \" + sourceFile.name);\n            imageGenerator.generate(sourceFile, canvas, {\n                maxSize: maxSize,\n                orient: orient,\n                customResizeFunction: customResizeFunction\n            }).then(function() {\n                var scaledImageDataUri = canvas.toDataURL(type, quality), signalSuccess = function() {\n                    log(\"Success generating scaled version for \" + sourceFile.name);\n                    var blob = qq.dataUriToBlob(scaledImageDataUri);\n                    scalingEffort.success(blob);\n                };\n                if (includeExif) {\n                    self._insertExifHeader(sourceFile, scaledImageDataUri, log).then(function(scaledImageDataUriWithExif) {\n                        scaledImageDataUri = scaledImageDataUriWithExif;\n                        signalSuccess();\n                    }, function() {\n                        log(\"Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.\", \"error\");\n                        signalSuccess();\n                    });\n                } else {\n                    signalSuccess();\n                }\n            }, function() {\n                log(\"Failed attempt to generate scaled version for \" + sourceFile.name, \"error\");\n                scalingEffort.failure(failedText);\n            });\n            return scalingEffort;\n        },\n        _insertExifHeader: function(originalImage, scaledImageDataUri, log) {\n            \"use strict\";\n            var reader = new FileReader(), insertionEffort = new qq.Promise(), originalImageDataUri = \"\";\n            reader.onload = function() {\n                originalImageDataUri = reader.result;\n                insertionEffort.success(qq.ExifRestorer.restore(originalImageDataUri, scaledImageDataUri));\n            };\n            reader.onerror = function() {\n                log(\"Problem reading \" + originalImage.name + \" during attempt to transfer EXIF data to scaled version.\", \"error\");\n                insertionEffort.failure();\n            };\n            reader.readAsDataURL(originalImage);\n            return insertionEffort;\n        },\n        _dataUriToBlob: function(dataUri) {\n            \"use strict\";\n            var byteString, mimeString, arrayBuffer, intArray;\n            if (dataUri.split(\",\")[0].indexOf(\"base64\") >= 0) {\n                byteString = atob(dataUri.split(\",\")[1]);\n            } else {\n                byteString = decodeURI(dataUri.split(\",\")[1]);\n            }\n            mimeString = dataUri.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n            arrayBuffer = new ArrayBuffer(byteString.length);\n            intArray = new Uint8Array(arrayBuffer);\n            qq.each(byteString, function(idx, character) {\n                intArray[idx] = character.charCodeAt(0);\n            });\n            return this._createBlob(arrayBuffer, mimeString);\n        },\n        _createBlob: function(data, mime) {\n            \"use strict\";\n            var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder, blobBuilder = BlobBuilder && new BlobBuilder();\n            if (blobBuilder) {\n                blobBuilder.append(data);\n                return blobBuilder.getBlob(mime);\n            } else {\n                return new Blob([ data ], {\n                    type: mime\n                });\n            }\n        }\n    });\n    qq.ExifRestorer = function() {\n        var ExifRestorer = {};\n        ExifRestorer.KEY_STR = \"ABCDEFGHIJKLMNOP\" + \"QRSTUVWXYZabcdef\" + \"ghijklmnopqrstuv\" + \"wxyz0123456789+/\" + \"=\";\n        ExifRestorer.encode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0;\n            do {\n                chr1 = input[i++];\n                chr2 = input[i++];\n                chr3 = input[i++];\n                enc1 = chr1 >> 2;\n                enc2 = (chr1 & 3) << 4 | chr2 >> 4;\n                enc3 = (chr2 & 15) << 2 | chr3 >> 6;\n                enc4 = chr3 & 63;\n                if (isNaN(chr2)) {\n                    enc3 = enc4 = 64;\n                } else if (isNaN(chr3)) {\n                    enc4 = 64;\n                }\n                output = output + this.KEY_STR.charAt(enc1) + this.KEY_STR.charAt(enc2) + this.KEY_STR.charAt(enc3) + this.KEY_STR.charAt(enc4);\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return output;\n        };\n        ExifRestorer.restore = function(origFileBase64, resizedFileBase64) {\n            var expectedBase64Header = \"data:image/jpeg;base64,\";\n            if (!origFileBase64.match(expectedBase64Header)) {\n                return resizedFileBase64;\n            }\n            var rawImage = this.decode64(origFileBase64.replace(expectedBase64Header, \"\"));\n            var segments = this.slice2Segments(rawImage);\n            var image = this.exifManipulation(resizedFileBase64, segments);\n            return expectedBase64Header + this.encode64(image);\n        };\n        ExifRestorer.exifManipulation = function(resizedFileBase64, segments) {\n            var exifArray = this.getExifArray(segments), newImageArray = this.insertExif(resizedFileBase64, exifArray), aBuffer = new Uint8Array(newImageArray);\n            return aBuffer;\n        };\n        ExifRestorer.getExifArray = function(segments) {\n            var seg;\n            for (var x = 0; x < segments.length; x++) {\n                seg = segments[x];\n                if (seg[0] == 255 & seg[1] == 225) {\n                    return seg;\n                }\n            }\n            return [];\n        };\n        ExifRestorer.insertExif = function(resizedFileBase64, exifArray) {\n            var imageData = resizedFileBase64.replace(\"data:image/jpeg;base64,\", \"\"), buf = this.decode64(imageData), separatePoint = buf.indexOf(255, 3), mae = buf.slice(0, separatePoint), ato = buf.slice(separatePoint), array = mae;\n            array = array.concat(exifArray);\n            array = array.concat(ato);\n            return array;\n        };\n        ExifRestorer.slice2Segments = function(rawImageArray) {\n            var head = 0, segments = [];\n            while (1) {\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 218) {\n                    break;\n                }\n                if (rawImageArray[head] == 255 & rawImageArray[head + 1] == 216) {\n                    head += 2;\n                } else {\n                    var length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3], endPoint = head + length + 2, seg = rawImageArray.slice(head, endPoint);\n                    segments.push(seg);\n                    head = endPoint;\n                }\n                if (head > rawImageArray.length) {\n                    break;\n                }\n            }\n            return segments;\n        };\n        ExifRestorer.decode64 = function(input) {\n            var output = \"\", chr1, chr2, chr3 = \"\", enc1, enc2, enc3, enc4 = \"\", i = 0, buf = [];\n            var base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\n            if (base64test.exec(input)) {\n                throw new Error(\"There were invalid base64 characters in the input text.  \" + \"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\");\n            }\n            input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n            do {\n                enc1 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc2 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc3 = this.KEY_STR.indexOf(input.charAt(i++));\n                enc4 = this.KEY_STR.indexOf(input.charAt(i++));\n                chr1 = enc1 << 2 | enc2 >> 4;\n                chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n                chr3 = (enc3 & 3) << 6 | enc4;\n                buf.push(chr1);\n                if (enc3 != 64) {\n                    buf.push(chr2);\n                }\n                if (enc4 != 64) {\n                    buf.push(chr3);\n                }\n                chr1 = chr2 = chr3 = \"\";\n                enc1 = enc2 = enc3 = enc4 = \"\";\n            } while (i < input.length);\n            return buf;\n        };\n        return ExifRestorer;\n    }();\n    qq.TotalProgress = function(callback, getSize) {\n        \"use strict\";\n        var perFileProgress = {}, totalLoaded = 0, totalSize = 0, lastLoadedSent = -1, lastTotalSent = -1, callbackProxy = function(loaded, total) {\n            if (loaded !== lastLoadedSent || total !== lastTotalSent) {\n                callback(loaded, total);\n            }\n            lastLoadedSent = loaded;\n            lastTotalSent = total;\n        }, noRetryableFiles = function(failed, retryable) {\n            var none = true;\n            qq.each(failed, function(idx, failedId) {\n                if (qq.indexOf(retryable, failedId) >= 0) {\n                    none = false;\n                    return false;\n                }\n            });\n            return none;\n        }, onCancel = function(id) {\n            updateTotalProgress(id, -1, -1);\n            delete perFileProgress[id];\n        }, onAllComplete = function(successful, failed, retryable) {\n            if (failed.length === 0 || noRetryableFiles(failed, retryable)) {\n                callbackProxy(totalSize, totalSize);\n                this.reset();\n            }\n        }, onNew = function(id) {\n            var size = getSize(id);\n            if (size > 0) {\n                updateTotalProgress(id, 0, size);\n                perFileProgress[id] = {\n                    loaded: 0,\n                    total: size\n                };\n            }\n        }, updateTotalProgress = function(id, newLoaded, newTotal) {\n            var oldLoaded = perFileProgress[id] ? perFileProgress[id].loaded : 0, oldTotal = perFileProgress[id] ? perFileProgress[id].total : 0;\n            if (newLoaded === -1 && newTotal === -1) {\n                totalLoaded -= oldLoaded;\n                totalSize -= oldTotal;\n            } else {\n                if (newLoaded) {\n                    totalLoaded += newLoaded - oldLoaded;\n                }\n                if (newTotal) {\n                    totalSize += newTotal - oldTotal;\n                }\n            }\n            callbackProxy(totalLoaded, totalSize);\n        };\n        qq.extend(this, {\n            onAllComplete: onAllComplete,\n            onStatusChange: function(id, oldStatus, newStatus) {\n                if (newStatus === qq.status.CANCELED || newStatus === qq.status.REJECTED) {\n                    onCancel(id);\n                } else if (newStatus === qq.status.SUBMITTING) {\n                    onNew(id);\n                }\n            },\n            onIndividualProgress: function(id, loaded, total) {\n                updateTotalProgress(id, loaded, total);\n                perFileProgress[id] = {\n                    loaded: loaded,\n                    total: total\n                };\n            },\n            onNewSize: function(id) {\n                onNew(id);\n            },\n            reset: function() {\n                perFileProgress = {};\n                totalLoaded = 0;\n                totalSize = 0;\n            }\n        });\n    };\n    qq.PasteSupport = function(o) {\n        \"use strict\";\n        var options, detachPasteHandler;\n        options = {\n            targetElement: null,\n            callbacks: {\n                log: function(message, level) {},\n                pasteReceived: function(blob) {}\n            }\n        };\n        function isImage(item) {\n            return item.type && item.type.indexOf(\"image/\") === 0;\n        }\n        function registerPasteHandler() {\n            detachPasteHandler = qq(options.targetElement).attach(\"paste\", function(event) {\n                var clipboardData = event.clipboardData;\n                if (clipboardData) {\n                    qq.each(clipboardData.items, function(idx, item) {\n                        if (isImage(item)) {\n                            var blob = item.getAsFile();\n                            options.callbacks.pasteReceived(blob);\n                        }\n                    });\n                }\n            });\n        }\n        function unregisterPasteHandler() {\n            if (detachPasteHandler) {\n                detachPasteHandler();\n            }\n        }\n        qq.extend(options, o);\n        registerPasteHandler();\n        qq.extend(this, {\n            reset: function() {\n                unregisterPasteHandler();\n            }\n        });\n    };\n    qq.FormSupport = function(options, startUpload, log) {\n        \"use strict\";\n        var self = this, interceptSubmit = options.interceptSubmit, formEl = options.element, autoUpload = options.autoUpload;\n        qq.extend(this, {\n            newEndpoint: null,\n            newAutoUpload: autoUpload,\n            attachedToForm: false,\n            getFormInputsAsObject: function() {\n                if (formEl == null) {\n                    return null;\n                }\n                return self._form2Obj(formEl);\n            }\n        });\n        function determineNewEndpoint(formEl) {\n            if (formEl.getAttribute(\"action\")) {\n                self.newEndpoint = formEl.getAttribute(\"action\");\n            }\n        }\n        function validateForm(formEl, nativeSubmit) {\n            if (formEl.checkValidity && !formEl.checkValidity()) {\n                log(\"Form did not pass validation checks - will not upload.\", \"error\");\n                nativeSubmit();\n            } else {\n                return true;\n            }\n        }\n        function maybeUploadOnSubmit(formEl) {\n            var nativeSubmit = formEl.submit;\n            qq(formEl).attach(\"submit\", function(event) {\n                event = event || window.event;\n                if (event.preventDefault) {\n                    event.preventDefault();\n                } else {\n                    event.returnValue = false;\n                }\n                validateForm(formEl, nativeSubmit) && startUpload();\n            });\n            formEl.submit = function() {\n                validateForm(formEl, nativeSubmit) && startUpload();\n            };\n        }\n        function determineFormEl(formEl) {\n            if (formEl) {\n                if (qq.isString(formEl)) {\n                    formEl = document.getElementById(formEl);\n                }\n                if (formEl) {\n                    log(\"Attaching to form element.\");\n                    determineNewEndpoint(formEl);\n                    interceptSubmit && maybeUploadOnSubmit(formEl);\n                }\n            }\n            return formEl;\n        }\n        formEl = determineFormEl(formEl);\n        this.attachedToForm = !!formEl;\n    };\n    qq.extend(qq.FormSupport.prototype, {\n        _form2Obj: function(form) {\n            \"use strict\";\n            var obj = {}, notIrrelevantType = function(type) {\n                var irrelevantTypes = [ \"button\", \"image\", \"reset\", \"submit\" ];\n                return qq.indexOf(irrelevantTypes, type.toLowerCase()) < 0;\n            }, radioOrCheckbox = function(type) {\n                return qq.indexOf([ \"checkbox\", \"radio\" ], type.toLowerCase()) >= 0;\n            }, ignoreValue = function(el) {\n                if (radioOrCheckbox(el.type) && !el.checked) {\n                    return true;\n                }\n                return el.disabled && el.type.toLowerCase() !== \"hidden\";\n            }, selectValue = function(select) {\n                var value = null;\n                qq.each(qq(select).children(), function(idx, child) {\n                    if (child.tagName.toLowerCase() === \"option\" && child.selected) {\n                        value = child.value;\n                        return false;\n                    }\n                });\n                return value;\n            };\n            qq.each(form.elements, function(idx, el) {\n                if ((qq.isInput(el, true) || el.tagName.toLowerCase() === \"textarea\") && notIrrelevantType(el.type) && !ignoreValue(el)) {\n                    obj[el.name] = el.value;\n                } else if (el.tagName.toLowerCase() === \"select\" && !ignoreValue(el)) {\n                    var value = selectValue(el);\n                    if (value !== null) {\n                        obj[el.name] = value;\n                    }\n                }\n            });\n            return obj;\n        }\n    });\n    qq.traditional = qq.traditional || {};\n    qq.traditional.FormUploadHandler = function(options, proxy) {\n        \"use strict\";\n        var handler = this, getName = proxy.getName, getUuid = proxy.getUuid, log = proxy.log;\n        function getIframeContentJson(id, iframe) {\n            var response, doc, innerHtml;\n            try {\n                doc = iframe.contentDocument || iframe.contentWindow.document;\n                innerHtml = doc.body.innerHTML;\n                log(\"converting iframe's innerHTML to JSON\");\n                log(\"innerHTML = \" + innerHtml);\n                if (innerHtml && innerHtml.match(/^<pre/i)) {\n                    innerHtml = doc.body.firstChild.firstChild.nodeValue;\n                }\n                response = handler._parseJsonResponse(innerHtml);\n            } catch (error) {\n                log(\"Error when attempting to parse form upload response (\" + error.message + \")\", \"error\");\n                response = {\n                    success: false\n                };\n            }\n            return response;\n        }\n        function createForm(id, iframe) {\n            var params = options.paramsStore.get(id), method = options.method.toLowerCase() === \"get\" ? \"GET\" : \"POST\", endpoint = options.endpointStore.get(id), name = getName(id);\n            params[options.uuidName] = getUuid(id);\n            params[options.filenameParam] = name;\n            return handler._initFormForUpload({\n                method: method,\n                endpoint: endpoint,\n                params: params,\n                paramsInBody: options.paramsInBody,\n                targetName: iframe.name\n            });\n        }\n        this.uploadFile = function(id) {\n            var input = handler.getInput(id), iframe = handler._createIframe(id), promise = new qq.Promise(), form;\n            form = createForm(id, iframe);\n            form.appendChild(input);\n            handler._attachLoadEvent(iframe, function(responseFromMessage) {\n                log(\"iframe loaded\");\n                var response = responseFromMessage ? responseFromMessage : getIframeContentJson(id, iframe);\n                handler._detachLoadEvent(id);\n                if (!options.cors.expected) {\n                    qq(iframe).remove();\n                }\n                if (response.success) {\n                    promise.success(response);\n                } else {\n                    promise.failure(response);\n                }\n            });\n            log(\"Sending upload request for \" + id);\n            form.submit();\n            qq(form).remove();\n            return promise;\n        };\n        qq.extend(this, new qq.FormUploadHandler({\n            options: {\n                isCors: options.cors.expected,\n                inputName: options.inputName\n            },\n            proxy: {\n                onCancel: options.onCancel,\n                getName: getName,\n                getUuid: getUuid,\n                log: log\n            }\n        }));\n    };\n    qq.traditional = qq.traditional || {};\n    qq.traditional.XhrUploadHandler = function(spec, proxy) {\n        \"use strict\";\n        var handler = this, getName = proxy.getName, getSize = proxy.getSize, getUuid = proxy.getUuid, log = proxy.log, multipart = spec.forceMultipart || spec.paramsInBody, addChunkingSpecificParams = function(id, params, chunkData) {\n            var size = getSize(id), name = getName(id);\n            if (!spec.omitDefaultParams) {\n                params[spec.chunking.paramNames.partIndex] = chunkData.part;\n                params[spec.chunking.paramNames.partByteOffset] = chunkData.start;\n                params[spec.chunking.paramNames.chunkSize] = chunkData.size;\n                params[spec.chunking.paramNames.totalParts] = chunkData.count;\n                params[spec.totalFileSizeName] = size;\n            }\n            if (multipart && !spec.omitDefaultParams) {\n                params[spec.filenameParam] = name;\n            }\n        }, allChunksDoneRequester = new qq.traditional.AllChunksDoneAjaxRequester({\n            cors: spec.cors,\n            endpoint: spec.chunking.success.endpoint,\n            headers: spec.chunking.success.headers,\n            jsonPayload: spec.chunking.success.jsonPayload,\n            log: log,\n            method: spec.chunking.success.method,\n            params: spec.chunking.success.params\n        }), createReadyStateChangedHandler = function(id, xhr) {\n            var promise = new qq.Promise();\n            xhr.onreadystatechange = function() {\n                if (xhr.readyState === 4) {\n                    var result = onUploadOrChunkComplete(id, xhr);\n                    if (result.success) {\n                        promise.success(result.response, xhr);\n                    } else {\n                        promise.failure(result.response, xhr);\n                    }\n                }\n            };\n            return promise;\n        }, getChunksCompleteParams = function(id) {\n            var params = spec.paramsStore.get(id), name = getName(id), size = getSize(id);\n            params[spec.uuidName] = getUuid(id);\n            params[spec.filenameParam] = name;\n            params[spec.totalFileSizeName] = size;\n            params[spec.chunking.paramNames.totalParts] = handler._getTotalChunks(id);\n            return params;\n        }, isErrorUploadResponse = function(xhr, response) {\n            return qq.indexOf([ 200, 201, 202, 203, 204 ], xhr.status) < 0 || spec.requireSuccessJson && !response.success || response.reset;\n        }, onUploadOrChunkComplete = function(id, xhr) {\n            var response;\n            log(\"xhr - server response received for \" + id);\n            log(\"responseText = \" + xhr.responseText);\n            response = parseResponse(true, xhr);\n            return {\n                success: !isErrorUploadResponse(xhr, response),\n                response: response\n            };\n        }, parseResponse = function(upload, xhr) {\n            var response = {};\n            try {\n                log(qq.format(\"Received response status {} with body: {}\", xhr.status, xhr.responseText));\n                response = qq.parseJson(xhr.responseText);\n            } catch (error) {\n                upload && spec.requireSuccessJson && log(\"Error when attempting to parse xhr response text (\" + error.message + \")\", \"error\");\n            }\n            return response;\n        }, sendChunksCompleteRequest = function(id) {\n            var promise = new qq.Promise();\n            allChunksDoneRequester.complete(id, handler._createXhr(id), getChunksCompleteParams(id), spec.customHeaders.get(id)).then(function(xhr) {\n                promise.success(parseResponse(false, xhr), xhr);\n            }, function(xhr) {\n                promise.failure(parseResponse(false, xhr), xhr);\n            });\n            return promise;\n        }, setParamsAndGetEntityToSend = function(entityToSendParams) {\n            var fileOrBlob = entityToSendParams.fileOrBlob;\n            var id = entityToSendParams.id;\n            var xhr = entityToSendParams.xhr;\n            var xhrOverrides = entityToSendParams.xhrOverrides || {};\n            var customParams = entityToSendParams.customParams || {};\n            var defaultParams = entityToSendParams.params || {};\n            var xhrOverrideParams = xhrOverrides.params || {};\n            var params;\n            var formData = multipart ? new FormData() : null, method = xhrOverrides.method || spec.method, endpoint = xhrOverrides.endpoint || spec.endpointStore.get(id), name = getName(id), size = getSize(id);\n            if (spec.omitDefaultParams) {\n                params = qq.extend({}, customParams);\n                qq.extend(params, xhrOverrideParams);\n            } else {\n                params = qq.extend({}, customParams);\n                qq.extend(params, xhrOverrideParams);\n                qq.extend(params, defaultParams);\n                params[spec.uuidName] = getUuid(id);\n                params[spec.filenameParam] = name;\n                if (multipart) {\n                    params[spec.totalFileSizeName] = size;\n                } else if (!spec.paramsInBody) {\n                    params[spec.inputName] = name;\n                }\n            }\n            if (!spec.paramsInBody) {\n                endpoint = qq.obj2url(params, endpoint);\n            }\n            xhr.open(method, endpoint, true);\n            if (spec.cors.expected && spec.cors.sendCredentials) {\n                xhr.withCredentials = true;\n            }\n            if (multipart) {\n                if (spec.paramsInBody) {\n                    qq.obj2FormData(params, formData);\n                }\n                formData.append(spec.inputName, fileOrBlob);\n                return formData;\n            }\n            return fileOrBlob;\n        }, setUploadHeaders = function(headersOptions) {\n            var headerOverrides = headersOptions.headerOverrides;\n            var id = headersOptions.id;\n            var xhr = headersOptions.xhr;\n            if (headerOverrides) {\n                qq.each(headerOverrides, function(headerName, headerValue) {\n                    xhr.setRequestHeader(headerName, headerValue);\n                });\n            } else {\n                var extraHeaders = spec.customHeaders.get(id), fileOrBlob = handler.getFile(id);\n                xhr.setRequestHeader(\"Accept\", \"application/json\");\n                xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n                xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n                if (!multipart) {\n                    xhr.setRequestHeader(\"Content-Type\", \"application/octet-stream\");\n                    xhr.setRequestHeader(\"X-Mime-Type\", fileOrBlob.type);\n                }\n                qq.each(extraHeaders, function(name, val) {\n                    xhr.setRequestHeader(name, val);\n                });\n            }\n        };\n        qq.extend(this, {\n            uploadChunk: function(uploadChunkParams) {\n                var id = uploadChunkParams.id;\n                var chunkIdx = uploadChunkParams.chunkIdx;\n                var overrides = uploadChunkParams.overrides || {};\n                var resuming = uploadChunkParams.resuming;\n                var chunkData = handler._getChunkData(id, chunkIdx), xhr = handler._createXhr(id, chunkIdx), promise, toSend, customParams, params = {};\n                promise = createReadyStateChangedHandler(id, xhr);\n                handler._registerProgressHandler(id, chunkIdx, chunkData.size);\n                customParams = spec.paramsStore.get(id);\n                addChunkingSpecificParams(id, params, chunkData);\n                if (resuming) {\n                    params[spec.resume.paramNames.resuming] = true;\n                }\n                toSend = setParamsAndGetEntityToSend({\n                    fileOrBlob: chunkData.blob,\n                    id: id,\n                    customParams: customParams,\n                    params: params,\n                    xhr: xhr,\n                    xhrOverrides: overrides\n                });\n                setUploadHeaders({\n                    headerOverrides: overrides.headers,\n                    id: id,\n                    xhr: xhr\n                });\n                xhr.send(toSend);\n                return promise;\n            },\n            uploadFile: function(id) {\n                var fileOrBlob = handler.getFile(id), promise, xhr, customParams, toSend;\n                xhr = handler._createXhr(id);\n                handler._registerProgressHandler(id);\n                promise = createReadyStateChangedHandler(id, xhr);\n                customParams = spec.paramsStore.get(id);\n                toSend = setParamsAndGetEntityToSend({\n                    fileOrBlob: fileOrBlob,\n                    id: id,\n                    customParams: customParams,\n                    xhr: xhr\n                });\n                setUploadHeaders({\n                    id: id,\n                    xhr: xhr\n                });\n                xhr.send(toSend);\n                return promise;\n            }\n        });\n        qq.extend(this, new qq.XhrUploadHandler({\n            options: qq.extend({\n                namespace: \"traditional\"\n            }, spec),\n            proxy: qq.extend({\n                getEndpoint: spec.endpointStore.get\n            }, proxy)\n        }));\n        qq.override(this, function(super_) {\n            return {\n                finalizeChunks: function(id) {\n                    proxy.onFinalizing(id);\n                    if (spec.chunking.success.endpoint) {\n                        return sendChunksCompleteRequest(id);\n                    } else {\n                        return super_.finalizeChunks(id, qq.bind(parseResponse, this, true));\n                    }\n                }\n            };\n        });\n    };\n    qq.traditional.AllChunksDoneAjaxRequester = function(o) {\n        \"use strict\";\n        var requester, options = {\n            cors: {\n                allowXdr: false,\n                expected: false,\n                sendCredentials: false\n            },\n            endpoint: null,\n            log: function(str, level) {},\n            method: \"POST\"\n        }, promises = {}, endpointHandler = {\n            get: function(id) {\n                if (qq.isFunction(options.endpoint)) {\n                    return options.endpoint(id);\n                }\n                return options.endpoint;\n            }\n        };\n        qq.extend(options, o);\n        requester = qq.extend(this, new qq.AjaxRequester({\n            acceptHeader: \"application/json\",\n            contentType: options.jsonPayload ? \"application/json\" : \"application/x-www-form-urlencoded\",\n            validMethods: [ options.method ],\n            method: options.method,\n            endpointStore: endpointHandler,\n            allowXRequestedWithAndCacheControl: false,\n            cors: options.cors,\n            log: options.log,\n            onComplete: function(id, xhr, isError) {\n                var promise = promises[id];\n                delete promises[id];\n                if (isError) {\n                    promise.failure(xhr);\n                } else {\n                    promise.success(xhr);\n                }\n            }\n        }));\n        qq.extend(this, {\n            complete: function(id, xhr, params, headers) {\n                var promise = new qq.Promise();\n                options.log(\"Submitting All Chunks Done request for \" + id);\n                promises[id] = promise;\n                requester.initTransport(id).withParams(options.params(id) || params).withHeaders(options.headers(id) || headers).send(xhr);\n                return promise;\n            }\n        });\n    };\n    qq.DragAndDrop = function(o) {\n        \"use strict\";\n        var options, HIDE_ZONES_EVENT_NAME = \"qq-hidezones\", HIDE_BEFORE_ENTER_ATTR = \"qq-hide-dropzone\", uploadDropZones = [], droppedFiles = [], disposeSupport = new qq.DisposeSupport();\n        options = {\n            dropZoneElements: [],\n            allowMultipleItems: true,\n            classes: {\n                dropActive: null\n            },\n            callbacks: new qq.DragAndDrop.callbacks()\n        };\n        qq.extend(options, o, true);\n        function uploadDroppedFiles(files, uploadDropZone) {\n            var filesAsArray = Array.prototype.slice.call(files);\n            options.callbacks.dropLog(\"Grabbed \" + files.length + \" dropped files.\");\n            uploadDropZone.dropDisabled(false);\n            options.callbacks.processingDroppedFilesComplete(filesAsArray, uploadDropZone.getElement());\n        }\n        function traverseFileTree(entry) {\n            var parseEntryPromise = new qq.Promise();\n            if (entry.isFile) {\n                entry.file(function(file) {\n                    file.qqPath = extractDirectoryPath(entry);\n                    droppedFiles.push(file);\n                    parseEntryPromise.success();\n                }, function(fileError) {\n                    options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n                    parseEntryPromise.failure();\n                });\n            } else if (entry.isDirectory) {\n                getFilesInDirectory(entry).then(function allEntriesRead(entries) {\n                    var entriesLeft = entries.length;\n                    qq.each(entries, function(idx, entry) {\n                        traverseFileTree(entry).done(function() {\n                            entriesLeft -= 1;\n                            if (entriesLeft === 0) {\n                                parseEntryPromise.success();\n                            }\n                        });\n                    });\n                    if (!entries.length) {\n                        parseEntryPromise.success();\n                    }\n                }, function readFailure(fileError) {\n                    options.callbacks.dropLog(\"Problem parsing '\" + entry.fullPath + \"'.  FileError code \" + fileError.code + \".\", \"error\");\n                    parseEntryPromise.failure();\n                });\n            }\n            return parseEntryPromise;\n        }\n        function extractDirectoryPath(entry) {\n            var name = entry.name, fullPath = entry.fullPath, indexOfNameInFullPath = fullPath.lastIndexOf(name);\n            fullPath = fullPath.substr(0, indexOfNameInFullPath);\n            if (fullPath.charAt(0) === \"/\") {\n                fullPath = fullPath.substr(1);\n            }\n            return fullPath;\n        }\n        function getFilesInDirectory(entry, reader, accumEntries, existingPromise) {\n            var promise = existingPromise || new qq.Promise(), dirReader = reader || entry.createReader();\n            dirReader.readEntries(function readSuccess(entries) {\n                var newEntries = accumEntries ? accumEntries.concat(entries) : entries;\n                if (entries.length) {\n                    setTimeout(function() {\n                        getFilesInDirectory(entry, dirReader, newEntries, promise);\n                    }, 0);\n                } else {\n                    promise.success(newEntries);\n                }\n            }, promise.failure);\n            return promise;\n        }\n        function handleDataTransfer(dataTransfer, uploadDropZone) {\n            var pendingFolderPromises = [], handleDataTransferPromise = new qq.Promise();\n            options.callbacks.processingDroppedFiles();\n            uploadDropZone.dropDisabled(true);\n            if (dataTransfer.files.length > 1 && !options.allowMultipleItems) {\n                options.callbacks.processingDroppedFilesComplete([]);\n                options.callbacks.dropError(\"tooManyFilesError\", \"\");\n                uploadDropZone.dropDisabled(false);\n                handleDataTransferPromise.failure();\n            } else {\n                droppedFiles = [];\n                if (qq.isFolderDropSupported(dataTransfer)) {\n                    qq.each(dataTransfer.items, function(idx, item) {\n                        var entry = item.webkitGetAsEntry();\n                        if (entry) {\n                            if (entry.isFile) {\n                                droppedFiles.push(item.getAsFile());\n                            } else {\n                                pendingFolderPromises.push(traverseFileTree(entry).done(function() {\n                                    pendingFolderPromises.pop();\n                                    if (pendingFolderPromises.length === 0) {\n                                        handleDataTransferPromise.success();\n                                    }\n                                }));\n                            }\n                        }\n                    });\n                } else {\n                    droppedFiles = dataTransfer.files;\n                }\n                if (pendingFolderPromises.length === 0) {\n                    handleDataTransferPromise.success();\n                }\n            }\n            return handleDataTransferPromise;\n        }\n        function setupDropzone(dropArea) {\n            var dropZone = new qq.UploadDropZone({\n                HIDE_ZONES_EVENT_NAME: HIDE_ZONES_EVENT_NAME,\n                element: dropArea,\n                onEnter: function(e) {\n                    qq(dropArea).addClass(options.classes.dropActive);\n                    e.stopPropagation();\n                },\n                onLeaveNotDescendants: function(e) {\n                    qq(dropArea).removeClass(options.classes.dropActive);\n                },\n                onDrop: function(e) {\n                    handleDataTransfer(e.dataTransfer, dropZone).then(function() {\n                        uploadDroppedFiles(droppedFiles, dropZone);\n                    }, function() {\n                        options.callbacks.dropLog(\"Drop event DataTransfer parsing failed.  No files will be uploaded.\", \"error\");\n                    });\n                }\n            });\n            disposeSupport.addDisposer(function() {\n                dropZone.dispose();\n            });\n            qq(dropArea).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropArea).hide();\n            uploadDropZones.push(dropZone);\n            return dropZone;\n        }\n        function isFileDrag(dragEvent) {\n            var fileDrag;\n            qq.each(dragEvent.dataTransfer.types, function(key, val) {\n                if (val === \"Files\") {\n                    fileDrag = true;\n                    return false;\n                }\n            });\n            return fileDrag;\n        }\n        function leavingDocumentOut(e) {\n            if (qq.safari()) {\n                return e.x < 0 || e.y < 0;\n            }\n            return e.x === 0 && e.y === 0;\n        }\n        function setupDragDrop() {\n            var dropZones = options.dropZoneElements, maybeHideDropZones = function() {\n                setTimeout(function() {\n                    qq.each(dropZones, function(idx, dropZone) {\n                        qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR) && qq(dropZone).hide();\n                        qq(dropZone).removeClass(options.classes.dropActive);\n                    });\n                }, 10);\n            };\n            qq.each(dropZones, function(idx, dropZone) {\n                var uploadDropZone = setupDropzone(dropZone);\n                if (dropZones.length && qq.supportedFeatures.fileDrop) {\n                    disposeSupport.attach(document, \"dragenter\", function(e) {\n                        if (!uploadDropZone.dropDisabled() && isFileDrag(e)) {\n                            qq.each(dropZones, function(idx, dropZone) {\n                                if (dropZone instanceof HTMLElement && qq(dropZone).hasAttribute(HIDE_BEFORE_ENTER_ATTR)) {\n                                    qq(dropZone).css({\n                                        display: \"block\"\n                                    });\n                                }\n                            });\n                        }\n                    });\n                }\n            });\n            disposeSupport.attach(document, \"dragleave\", function(e) {\n                if (leavingDocumentOut(e)) {\n                    maybeHideDropZones();\n                }\n            });\n            disposeSupport.attach(qq(document).children()[0], \"mouseenter\", function(e) {\n                maybeHideDropZones();\n            });\n            disposeSupport.attach(document, \"drop\", function(e) {\n                if (isFileDrag(e)) {\n                    e.preventDefault();\n                    maybeHideDropZones();\n                }\n            });\n            disposeSupport.attach(document, HIDE_ZONES_EVENT_NAME, maybeHideDropZones);\n        }\n        setupDragDrop();\n        qq.extend(this, {\n            setupExtraDropzone: function(element) {\n                options.dropZoneElements.push(element);\n                setupDropzone(element);\n            },\n            removeDropzone: function(element) {\n                var i, dzs = options.dropZoneElements;\n                for (i in dzs) {\n                    if (dzs[i] === element) {\n                        return dzs.splice(i, 1);\n                    }\n                }\n            },\n            dispose: function() {\n                disposeSupport.dispose();\n                qq.each(uploadDropZones, function(idx, dropZone) {\n                    dropZone.dispose();\n                });\n            }\n        });\n        this._testing = {};\n        this._testing.extractDirectoryPath = extractDirectoryPath;\n    };\n    qq.DragAndDrop.callbacks = function() {\n        \"use strict\";\n        return {\n            processingDroppedFiles: function() {},\n            processingDroppedFilesComplete: function(files, targetEl) {},\n            dropError: function(code, errorSpecifics) {\n                qq.log(\"Drag & drop error code '\" + code + \" with these specifics: '\" + errorSpecifics + \"'\", \"error\");\n            },\n            dropLog: function(message, level) {\n                qq.log(message, level);\n            }\n        };\n    };\n    qq.UploadDropZone = function(o) {\n        \"use strict\";\n        var disposeSupport = new qq.DisposeSupport(), options, element, preventDrop, dropOutsideDisabled;\n        options = {\n            element: null,\n            onEnter: function(e) {},\n            onLeave: function(e) {},\n            onLeaveNotDescendants: function(e) {},\n            onDrop: function(e) {}\n        };\n        qq.extend(options, o);\n        element = options.element;\n        function dragoverShouldBeCanceled() {\n            return qq.safari() || qq.firefox() && qq.windows();\n        }\n        function disableDropOutside(e) {\n            if (!dropOutsideDisabled) {\n                if (dragoverShouldBeCanceled) {\n                    disposeSupport.attach(document, \"dragover\", function(e) {\n                        e.preventDefault();\n                    });\n                } else {\n                    disposeSupport.attach(document, \"dragover\", function(e) {\n                        if (e.dataTransfer) {\n                            e.dataTransfer.dropEffect = \"none\";\n                            e.preventDefault();\n                        }\n                    });\n                }\n                dropOutsideDisabled = true;\n            }\n        }\n        function isValidFileDrag(e) {\n            if (!qq.supportedFeatures.fileDrop) {\n                return false;\n            }\n            var effectTest, dt = e.dataTransfer, isSafari = qq.safari();\n            effectTest = qq.ie() && qq.supportedFeatures.fileDrop ? true : dt.effectAllowed !== \"none\";\n            return dt && effectTest && (dt.files && dt.files.length || !isSafari && dt.types.contains && dt.types.contains(\"Files\") || dt.types.includes && dt.types.includes(\"Files\"));\n        }\n        function isOrSetDropDisabled(isDisabled) {\n            if (isDisabled !== undefined) {\n                preventDrop = isDisabled;\n            }\n            return preventDrop;\n        }\n        function triggerHidezonesEvent() {\n            var hideZonesEvent;\n            function triggerUsingOldApi() {\n                hideZonesEvent = document.createEvent(\"Event\");\n                hideZonesEvent.initEvent(options.HIDE_ZONES_EVENT_NAME, true, true);\n            }\n            if (window.CustomEvent) {\n                try {\n                    hideZonesEvent = new CustomEvent(options.HIDE_ZONES_EVENT_NAME);\n                } catch (err) {\n                    triggerUsingOldApi();\n                }\n            } else {\n                triggerUsingOldApi();\n            }\n            document.dispatchEvent(hideZonesEvent);\n        }\n        function attachEvents() {\n            disposeSupport.attach(element, \"dragover\", function(e) {\n                if (!isValidFileDrag(e)) {\n                    return;\n                }\n                var effect = qq.ie() && qq.supportedFeatures.fileDrop ? null : e.dataTransfer.effectAllowed;\n                if (effect === \"move\" || effect === \"linkMove\") {\n                    e.dataTransfer.dropEffect = \"move\";\n                } else {\n                    e.dataTransfer.dropEffect = \"copy\";\n                }\n                e.stopPropagation();\n                e.preventDefault();\n            });\n            disposeSupport.attach(element, \"dragenter\", function(e) {\n                if (!isOrSetDropDisabled()) {\n                    if (!isValidFileDrag(e)) {\n                        return;\n                    }\n                    options.onEnter(e);\n                }\n            });\n            disposeSupport.attach(element, \"dragleave\", function(e) {\n                if (!isValidFileDrag(e)) {\n                    return;\n                }\n                options.onLeave(e);\n                var relatedTarget = document.elementFromPoint(e.clientX, e.clientY);\n                if (qq(this).contains(relatedTarget)) {\n                    return;\n                }\n                options.onLeaveNotDescendants(e);\n            });\n            disposeSupport.attach(element, \"drop\", function(e) {\n                if (!isOrSetDropDisabled()) {\n                    if (!isValidFileDrag(e)) {\n                        return;\n                    }\n                    e.preventDefault();\n                    e.stopPropagation();\n                    options.onDrop(e);\n                    triggerHidezonesEvent();\n                }\n            });\n        }\n        disableDropOutside();\n        attachEvents();\n        qq.extend(this, {\n            dropDisabled: function(isDisabled) {\n                return isOrSetDropDisabled(isDisabled);\n            },\n            dispose: function() {\n                disposeSupport.dispose();\n            },\n            getElement: function() {\n                return element;\n            }\n        });\n        this._testing = {};\n        this._testing.isValidFileDrag = isValidFileDrag;\n    };\n    (function() {\n        \"use strict\";\n        qq.uiPublicApi = {\n            addInitialFiles: function(cannedFileList) {\n                this._parent.prototype.addInitialFiles.apply(this, arguments);\n                this._templating.addCacheToDom();\n            },\n            clearStoredFiles: function() {\n                this._parent.prototype.clearStoredFiles.apply(this, arguments);\n                this._templating.clearFiles();\n            },\n            addExtraDropzone: function(element) {\n                this._dnd && this._dnd.setupExtraDropzone(element);\n            },\n            removeExtraDropzone: function(element) {\n                if (this._dnd) {\n                    return this._dnd.removeDropzone(element);\n                }\n            },\n            getItemByFileId: function(id) {\n                if (!this._templating.isHiddenForever(id)) {\n                    return this._templating.getFileContainer(id);\n                }\n            },\n            reset: function() {\n                this._parent.prototype.reset.apply(this, arguments);\n                this._templating.reset();\n                if (!this._options.button && this._templating.getButton()) {\n                    this._defaultButtonId = this._createUploadButton({\n                        element: this._templating.getButton(),\n                        title: this._options.text.fileInputTitle\n                    }).getButtonId();\n                }\n                if (this._dnd) {\n                    this._dnd.dispose();\n                    this._dnd = this._setupDragAndDrop();\n                }\n                this._totalFilesInBatch = 0;\n                this._filesInBatchAddedToUi = 0;\n                this._setupClickAndEditEventHandlers();\n            },\n            setName: function(id, newName) {\n                var formattedFilename = this._options.formatFileName(newName);\n                this._parent.prototype.setName.apply(this, arguments);\n                this._templating.updateFilename(id, formattedFilename);\n            },\n            pauseUpload: function(id) {\n                var paused = this._parent.prototype.pauseUpload.apply(this, arguments);\n                paused && this._templating.uploadPaused(id);\n                return paused;\n            },\n            continueUpload: function(id) {\n                var continued = this._parent.prototype.continueUpload.apply(this, arguments);\n                continued && this._templating.uploadContinued(id);\n                return continued;\n            },\n            getId: function(fileContainerOrChildEl) {\n                return this._templating.getFileId(fileContainerOrChildEl);\n            },\n            getDropTarget: function(fileId) {\n                var file = this.getFile(fileId);\n                return file.qqDropTarget;\n            }\n        };\n        qq.uiPrivateApi = {\n            _getButton: function(buttonId) {\n                var button = this._parent.prototype._getButton.apply(this, arguments);\n                if (!button) {\n                    if (buttonId === this._defaultButtonId) {\n                        button = this._templating.getButton();\n                    }\n                }\n                return button;\n            },\n            _removeFileItem: function(fileId) {\n                this._templating.removeFile(fileId);\n            },\n            _setupClickAndEditEventHandlers: function() {\n                this._fileButtonsClickHandler = qq.FileButtonsClickHandler && this._bindFileButtonsClickEvent();\n                this._focusinEventSupported = !qq.firefox();\n                if (this._isEditFilenameEnabled()) {\n                    this._filenameClickHandler = this._bindFilenameClickEvent();\n                    this._filenameInputFocusInHandler = this._bindFilenameInputFocusInEvent();\n                    this._filenameInputFocusHandler = this._bindFilenameInputFocusEvent();\n                }\n            },\n            _setupDragAndDrop: function() {\n                var self = this, dropZoneElements = this._options.dragAndDrop.extraDropzones, templating = this._templating, defaultDropZone = templating.getDropZone();\n                defaultDropZone && dropZoneElements.push(defaultDropZone);\n                return new qq.DragAndDrop({\n                    dropZoneElements: dropZoneElements,\n                    allowMultipleItems: this._options.multiple,\n                    classes: {\n                        dropActive: this._options.classes.dropActive\n                    },\n                    callbacks: {\n                        processingDroppedFiles: function() {\n                            templating.showDropProcessing();\n                        },\n                        processingDroppedFilesComplete: function(files, targetEl) {\n                            templating.hideDropProcessing();\n                            qq.each(files, function(idx, file) {\n                                file.qqDropTarget = targetEl;\n                            });\n                            if (files.length) {\n                                self.addFiles(files, null, null);\n                            }\n                        },\n                        dropError: function(code, errorData) {\n                            self._itemError(code, errorData);\n                        },\n                        dropLog: function(message, level) {\n                            self.log(message, level);\n                        }\n                    }\n                });\n            },\n            _bindFileButtonsClickEvent: function() {\n                var self = this;\n                return new qq.FileButtonsClickHandler({\n                    templating: this._templating,\n                    log: function(message, lvl) {\n                        self.log(message, lvl);\n                    },\n                    onDeleteFile: function(fileId) {\n                        self.deleteFile(fileId);\n                    },\n                    onCancel: function(fileId) {\n                        self.cancel(fileId);\n                    },\n                    onRetry: function(fileId) {\n                        self.retry(fileId);\n                    },\n                    onPause: function(fileId) {\n                        self.pauseUpload(fileId);\n                    },\n                    onContinue: function(fileId) {\n                        self.continueUpload(fileId);\n                    },\n                    onGetName: function(fileId) {\n                        return self.getName(fileId);\n                    }\n                });\n            },\n            _isEditFilenameEnabled: function() {\n                return this._templating.isEditFilenamePossible() && !this._options.autoUpload && qq.FilenameClickHandler && qq.FilenameInputFocusHandler && qq.FilenameInputFocusHandler;\n            },\n            _filenameEditHandler: function() {\n                var self = this, templating = this._templating;\n                return {\n                    templating: templating,\n                    log: function(message, lvl) {\n                        self.log(message, lvl);\n                    },\n                    onGetUploadStatus: function(fileId) {\n                        return self.getUploads({\n                            id: fileId\n                        }).status;\n                    },\n                    onGetName: function(fileId) {\n                        return self.getName(fileId);\n                    },\n                    onSetName: function(id, newName) {\n                        self.setName(id, newName);\n                    },\n                    onEditingStatusChange: function(id, isEditing) {\n                        var qqInput = qq(templating.getEditInput(id)), qqFileContainer = qq(templating.getFileContainer(id));\n                        if (isEditing) {\n                            qqInput.addClass(\"qq-editing\");\n                            templating.hideFilename(id);\n                            templating.hideEditIcon(id);\n                        } else {\n                            qqInput.removeClass(\"qq-editing\");\n                            templating.showFilename(id);\n                            templating.showEditIcon(id);\n                        }\n                        qqFileContainer.addClass(\"qq-temp\").removeClass(\"qq-temp\");\n                    }\n                };\n            },\n            _onUploadStatusChange: function(id, oldStatus, newStatus) {\n                this._parent.prototype._onUploadStatusChange.apply(this, arguments);\n                if (this._isEditFilenameEnabled()) {\n                    if (this._templating.getFileContainer(id) && newStatus !== qq.status.SUBMITTED) {\n                        this._templating.markFilenameEditable(id);\n                        this._templating.hideEditIcon(id);\n                    }\n                }\n                if (oldStatus === qq.status.UPLOAD_RETRYING && newStatus === qq.status.UPLOADING) {\n                    this._templating.hideRetry(id);\n                    this._templating.setStatusText(id);\n                    qq(this._templating.getFileContainer(id)).removeClass(this._classes.retrying);\n                } else if (newStatus === qq.status.UPLOAD_FAILED) {\n                    this._templating.hidePause(id);\n                }\n            },\n            _bindFilenameInputFocusInEvent: function() {\n                var spec = qq.extend({}, this._filenameEditHandler());\n                return new qq.FilenameInputFocusInHandler(spec);\n            },\n            _bindFilenameInputFocusEvent: function() {\n                var spec = qq.extend({}, this._filenameEditHandler());\n                return new qq.FilenameInputFocusHandler(spec);\n            },\n            _bindFilenameClickEvent: function() {\n                var spec = qq.extend({}, this._filenameEditHandler());\n                return new qq.FilenameClickHandler(spec);\n            },\n            _storeForLater: function(id) {\n                this._parent.prototype._storeForLater.apply(this, arguments);\n                this._templating.hideSpinner(id);\n            },\n            _onAllComplete: function(successful, failed) {\n                this._parent.prototype._onAllComplete.apply(this, arguments);\n                this._templating.resetTotalProgress();\n            },\n            _onSubmit: function(id, name) {\n                var file = this.getFile(id);\n                if (file && file.qqPath && this._options.dragAndDrop.reportDirectoryPaths) {\n                    this._paramsStore.addReadOnly(id, {\n                        qqpath: file.qqPath\n                    });\n                }\n                this._parent.prototype._onSubmit.apply(this, arguments);\n                this._addToList(id, name);\n            },\n            _onSubmitted: function(id) {\n                if (this._isEditFilenameEnabled()) {\n                    this._templating.markFilenameEditable(id);\n                    this._templating.showEditIcon(id);\n                    if (!this._focusinEventSupported) {\n                        this._filenameInputFocusHandler.addHandler(this._templating.getEditInput(id));\n                    }\n                }\n            },\n            _onProgress: function(id, name, loaded, total) {\n                this._parent.prototype._onProgress.apply(this, arguments);\n                this._templating.updateProgress(id, loaded, total);\n                if (total === 0 || Math.round(loaded / total * 100) === 100) {\n                    this._templating.hideCancel(id);\n                    this._templating.hidePause(id);\n                    this._templating.hideProgress(id);\n                    this._templating.setStatusText(id, this._options.text.waitingForResponse);\n                    this._displayFileSize(id);\n                } else {\n                    this._displayFileSize(id, loaded, total);\n                }\n            },\n            _onTotalProgress: function(loaded, total) {\n                this._parent.prototype._onTotalProgress.apply(this, arguments);\n                this._templating.updateTotalProgress(loaded, total);\n            },\n            _onComplete: function(id, name, result, xhr) {\n                var parentRetVal = this._parent.prototype._onComplete.apply(this, arguments), templating = this._templating, fileContainer = templating.getFileContainer(id), self = this;\n                function completeUpload(result) {\n                    if (!fileContainer) {\n                        return;\n                    }\n                    templating.setStatusText(id);\n                    qq(fileContainer).removeClass(self._classes.retrying);\n                    templating.hideProgress(id);\n                    if (self.getUploads({\n                        id: id\n                    }).status !== qq.status.UPLOAD_FAILED) {\n                        templating.hideCancel(id);\n                    }\n                    templating.hideSpinner(id);\n                    if (result.success) {\n                        self._markFileAsSuccessful(id);\n                    } else {\n                        qq(fileContainer).addClass(self._classes.fail);\n                        templating.showCancel(id);\n                        if (templating.isRetryPossible() && !self._preventRetries[id]) {\n                            qq(fileContainer).addClass(self._classes.retryable);\n                            templating.showRetry(id);\n                        }\n                        self._controlFailureTextDisplay(id, result);\n                    }\n                }\n                if (parentRetVal instanceof qq.Promise) {\n                    parentRetVal.done(function(newResult) {\n                        completeUpload(newResult);\n                    });\n                } else {\n                    completeUpload(result);\n                }\n                return parentRetVal;\n            },\n            _markFileAsSuccessful: function(id) {\n                var templating = this._templating;\n                if (this._isDeletePossible()) {\n                    templating.showDeleteButton(id);\n                }\n                qq(templating.getFileContainer(id)).addClass(this._classes.success);\n                this._maybeUpdateThumbnail(id);\n            },\n            _onUploadPrep: function(id) {\n                this._parent.prototype._onUploadPrep.apply(this, arguments);\n                this._templating.showSpinner(id);\n            },\n            _onUpload: function(id, name) {\n                var parentRetVal = this._parent.prototype._onUpload.apply(this, arguments);\n                this._templating.showSpinner(id);\n                return parentRetVal;\n            },\n            _onUploadChunk: function(id, chunkData) {\n                this._parent.prototype._onUploadChunk.apply(this, arguments);\n                if (chunkData.partIndex > 0 && this._handler.isResumable(id)) {\n                    this._templating.allowPause(id);\n                }\n            },\n            _onCancel: function(id, name) {\n                this._parent.prototype._onCancel.apply(this, arguments);\n                this._removeFileItem(id);\n                if (this._getNotFinished() === 0) {\n                    this._templating.resetTotalProgress();\n                }\n            },\n            _onBeforeAutoRetry: function(id) {\n                var retryNumForDisplay, maxAuto, retryNote;\n                this._parent.prototype._onBeforeAutoRetry.apply(this, arguments);\n                this._showCancelLink(id);\n                if (this._options.retry.showAutoRetryNote) {\n                    retryNumForDisplay = this._autoRetries[id];\n                    maxAuto = this._options.retry.maxAutoAttempts;\n                    retryNote = this._options.retry.autoRetryNote.replace(/\\{retryNum\\}/g, retryNumForDisplay);\n                    retryNote = retryNote.replace(/\\{maxAuto\\}/g, maxAuto);\n                    this._templating.setStatusText(id, retryNote);\n                    qq(this._templating.getFileContainer(id)).addClass(this._classes.retrying);\n                }\n            },\n            _onBeforeManualRetry: function(id) {\n                if (this._parent.prototype._onBeforeManualRetry.apply(this, arguments)) {\n                    this._templating.resetProgress(id);\n                    qq(this._templating.getFileContainer(id)).removeClass(this._classes.fail);\n                    this._templating.setStatusText(id);\n                    this._templating.showSpinner(id);\n                    this._showCancelLink(id);\n                    return true;\n                } else {\n                    qq(this._templating.getFileContainer(id)).addClass(this._classes.retryable);\n                    this._templating.showRetry(id);\n                    return false;\n                }\n            },\n            _onSubmitDelete: function(id) {\n                var onSuccessCallback = qq.bind(this._onSubmitDeleteSuccess, this);\n                this._parent.prototype._onSubmitDelete.call(this, id, onSuccessCallback);\n            },\n            _onSubmitDeleteSuccess: function(id, uuid, additionalMandatedParams) {\n                if (this._options.deleteFile.forceConfirm) {\n                    this._showDeleteConfirm.apply(this, arguments);\n                } else {\n                    this._sendDeleteRequest.apply(this, arguments);\n                }\n            },\n            _onDeleteComplete: function(id, xhr, isError) {\n                this._parent.prototype._onDeleteComplete.apply(this, arguments);\n                this._templating.hideSpinner(id);\n                if (isError) {\n                    this._templating.setStatusText(id, this._options.deleteFile.deletingFailedText);\n                    this._templating.showDeleteButton(id);\n                } else {\n                    this._removeFileItem(id);\n                }\n            },\n            _sendDeleteRequest: function(id, uuid, additionalMandatedParams) {\n                this._templating.hideDeleteButton(id);\n                this._templating.showSpinner(id);\n                this._templating.setStatusText(id, this._options.deleteFile.deletingStatusText);\n                this._deleteHandler.sendDelete.apply(this, arguments);\n            },\n            _showDeleteConfirm: function(id, uuid, mandatedParams) {\n                var fileName = this.getName(id), confirmMessage = this._options.deleteFile.confirmMessage.replace(/\\{filename\\}/g, fileName), uuid = this.getUuid(id), deleteRequestArgs = arguments, self = this, retVal;\n                retVal = this._options.showConfirm(confirmMessage);\n                if (qq.isGenericPromise(retVal)) {\n                    retVal.then(function() {\n                        self._sendDeleteRequest.apply(self, deleteRequestArgs);\n                    });\n                } else if (retVal !== false) {\n                    self._sendDeleteRequest.apply(self, deleteRequestArgs);\n                }\n            },\n            _addToList: function(id, name, canned) {\n                var prependData, prependIndex = 0, dontDisplay = this._handler.isProxied(id) && this._options.scaling.hideScaled, record;\n                if (this._options.display.prependFiles) {\n                    if (this._totalFilesInBatch > 1 && this._filesInBatchAddedToUi > 0) {\n                        prependIndex = this._filesInBatchAddedToUi - 1;\n                    }\n                    prependData = {\n                        index: prependIndex\n                    };\n                }\n                if (!canned) {\n                    if (this._options.disableCancelForFormUploads && !qq.supportedFeatures.ajaxUploading) {\n                        this._templating.disableCancel();\n                    }\n                    if (!this._options.multiple) {\n                        record = this.getUploads({\n                            id: id\n                        });\n                        this._handledProxyGroup = this._handledProxyGroup || record.proxyGroupId;\n                        if (record.proxyGroupId !== this._handledProxyGroup || !record.proxyGroupId) {\n                            this._handler.cancelAll();\n                            this._clearList();\n                            this._handledProxyGroup = null;\n                        }\n                    }\n                }\n                if (canned) {\n                    this._templating.addFileToCache(id, this._options.formatFileName(name), prependData, dontDisplay);\n                    this._templating.updateThumbnail(id, this._thumbnailUrls[id], true, this._options.thumbnails.customResizer);\n                } else {\n                    this._templating.addFile(id, this._options.formatFileName(name), prependData, dontDisplay);\n                    this._templating.generatePreview(id, this.getFile(id), this._options.thumbnails.customResizer);\n                }\n                this._filesInBatchAddedToUi += 1;\n                if (canned || this._options.display.fileSizeOnSubmit && qq.supportedFeatures.ajaxUploading) {\n                    this._displayFileSize(id);\n                }\n            },\n            _clearList: function() {\n                this._templating.clearFiles();\n                this.clearStoredFiles();\n            },\n            _displayFileSize: function(id, loadedSize, totalSize) {\n                var size = this.getSize(id), sizeForDisplay = this._formatSize(size);\n                if (size >= 0) {\n                    if (loadedSize !== undefined && totalSize !== undefined) {\n                        sizeForDisplay = this._formatProgress(loadedSize, totalSize);\n                    }\n                    this._templating.updateSize(id, sizeForDisplay);\n                }\n            },\n            _formatProgress: function(uploadedSize, totalSize) {\n                var message = this._options.text.formatProgress;\n                function r(name, replacement) {\n                    message = message.replace(name, replacement);\n                }\n                r(\"{percent}\", Math.round(uploadedSize / totalSize * 100));\n                r(\"{total_size}\", this._formatSize(totalSize));\n                return message;\n            },\n            _controlFailureTextDisplay: function(id, response) {\n                var mode, responseProperty, failureReason;\n                mode = this._options.failedUploadTextDisplay.mode;\n                responseProperty = this._options.failedUploadTextDisplay.responseProperty;\n                if (mode === \"custom\") {\n                    failureReason = response[responseProperty];\n                    if (!failureReason) {\n                        failureReason = this._options.text.failUpload;\n                    }\n                    this._templating.setStatusText(id, failureReason);\n                    if (this._options.failedUploadTextDisplay.enableTooltip) {\n                        this._showTooltip(id, failureReason);\n                    }\n                } else if (mode === \"default\") {\n                    this._templating.setStatusText(id, this._options.text.failUpload);\n                } else if (mode !== \"none\") {\n                    this.log(\"failedUploadTextDisplay.mode value of '\" + mode + \"' is not valid\", \"warn\");\n                }\n            },\n            _showTooltip: function(id, text) {\n                this._templating.getFileContainer(id).title = text;\n            },\n            _showCancelLink: function(id) {\n                if (!this._options.disableCancelForFormUploads || qq.supportedFeatures.ajaxUploading) {\n                    this._templating.showCancel(id);\n                }\n            },\n            _itemError: function(code, name, item) {\n                var message = this._parent.prototype._itemError.apply(this, arguments);\n                this._options.showMessage(message);\n            },\n            _batchError: function(message) {\n                this._parent.prototype._batchError.apply(this, arguments);\n                this._options.showMessage(message);\n            },\n            _setupPastePrompt: function() {\n                var self = this;\n                this._options.callbacks.onPasteReceived = function() {\n                    var message = self._options.paste.namePromptMessage, defaultVal = self._options.paste.defaultName;\n                    return self._options.showPrompt(message, defaultVal);\n                };\n            },\n            _fileOrBlobRejected: function(id, name) {\n                this._totalFilesInBatch -= 1;\n                this._parent.prototype._fileOrBlobRejected.apply(this, arguments);\n            },\n            _prepareItemsForUpload: function(items, params, endpoint) {\n                this._totalFilesInBatch = items.length;\n                this._filesInBatchAddedToUi = 0;\n                this._parent.prototype._prepareItemsForUpload.apply(this, arguments);\n            },\n            _maybeUpdateThumbnail: function(fileId) {\n                var thumbnailUrl = this._thumbnailUrls[fileId], fileStatus = this.getUploads({\n                    id: fileId\n                }).status;\n                if (fileStatus !== qq.status.DELETED && (thumbnailUrl || this._options.thumbnails.placeholders.waitUntilResponse || !qq.supportedFeatures.imagePreviews)) {\n                    this._templating.updateThumbnail(fileId, thumbnailUrl, this._options.thumbnails.customResizer);\n                }\n            },\n            _addCannedFile: function(sessionData) {\n                var id = this._parent.prototype._addCannedFile.apply(this, arguments);\n                this._addToList(id, this.getName(id), true);\n                this._templating.hideSpinner(id);\n                this._templating.hideCancel(id);\n                this._markFileAsSuccessful(id);\n                return id;\n            },\n            _setSize: function(id, newSize) {\n                this._parent.prototype._setSize.apply(this, arguments);\n                this._templating.updateSize(id, this._formatSize(newSize));\n            },\n            _sessionRequestComplete: function() {\n                this._templating.addCacheToDom();\n                this._parent.prototype._sessionRequestComplete.apply(this, arguments);\n            }\n        };\n    })();\n    qq.FineUploader = function(o, namespace) {\n        \"use strict\";\n        var self = this;\n        this._parent = namespace ? qq[namespace].FineUploaderBasic : qq.FineUploaderBasic;\n        this._parent.apply(this, arguments);\n        qq.extend(this._options, {\n            element: null,\n            button: null,\n            listElement: null,\n            dragAndDrop: {\n                extraDropzones: [],\n                reportDirectoryPaths: false\n            },\n            text: {\n                formatProgress: \"{percent}% of {total_size}\",\n                failUpload: \"Upload failed\",\n                waitingForResponse: \"Processing...\",\n                paused: \"Paused\"\n            },\n            template: \"qq-template\",\n            classes: {\n                retrying: \"qq-upload-retrying\",\n                retryable: \"qq-upload-retryable\",\n                success: \"qq-upload-success\",\n                fail: \"qq-upload-fail\",\n                editable: \"qq-editable\",\n                hide: \"qq-hide\",\n                dropActive: \"qq-upload-drop-area-active\"\n            },\n            failedUploadTextDisplay: {\n                mode: \"default\",\n                responseProperty: \"error\",\n                enableTooltip: true\n            },\n            messages: {\n                tooManyFilesError: \"You may only drop one file\",\n                unsupportedBrowser: \"Unrecoverable error - this browser does not permit file uploading of any kind.\"\n            },\n            retry: {\n                showAutoRetryNote: true,\n                autoRetryNote: \"Retrying {retryNum}/{maxAuto}...\"\n            },\n            deleteFile: {\n                forceConfirm: false,\n                confirmMessage: \"Are you sure you want to delete {filename}?\",\n                deletingStatusText: \"Deleting...\",\n                deletingFailedText: \"Delete failed\"\n            },\n            display: {\n                fileSizeOnSubmit: false,\n                prependFiles: false\n            },\n            paste: {\n                promptForName: false,\n                namePromptMessage: \"Please name this image\"\n            },\n            thumbnails: {\n                customResizer: null,\n                maxCount: 0,\n                placeholders: {\n                    waitUntilResponse: false,\n                    notAvailablePath: null,\n                    waitingPath: null\n                },\n                timeBetweenThumbs: 750\n            },\n            scaling: {\n                hideScaled: false\n            },\n            showMessage: function(message) {\n                if (self._templating.hasDialog(\"alert\")) {\n                    return self._templating.showDialog(\"alert\", message);\n                } else {\n                    setTimeout(function() {\n                        window.alert(message);\n                    }, 0);\n                }\n            },\n            showConfirm: function(message) {\n                if (self._templating.hasDialog(\"confirm\")) {\n                    return self._templating.showDialog(\"confirm\", message);\n                } else {\n                    return window.confirm(message);\n                }\n            },\n            showPrompt: function(message, defaultValue) {\n                if (self._templating.hasDialog(\"prompt\")) {\n                    return self._templating.showDialog(\"prompt\", message, defaultValue);\n                } else {\n                    return window.prompt(message, defaultValue);\n                }\n            }\n        }, true);\n        qq.extend(this._options, o, true);\n        this._templating = new qq.Templating({\n            log: qq.bind(this.log, this),\n            templateIdOrEl: this._options.template,\n            containerEl: this._options.element,\n            fileContainerEl: this._options.listElement,\n            button: this._options.button,\n            imageGenerator: this._imageGenerator,\n            classes: {\n                hide: this._options.classes.hide,\n                editable: this._options.classes.editable\n            },\n            limits: {\n                maxThumbs: this._options.thumbnails.maxCount,\n                timeBetweenThumbs: this._options.thumbnails.timeBetweenThumbs\n            },\n            placeholders: {\n                waitUntilUpdate: this._options.thumbnails.placeholders.waitUntilResponse,\n                thumbnailNotAvailable: this._options.thumbnails.placeholders.notAvailablePath,\n                waitingForThumbnail: this._options.thumbnails.placeholders.waitingPath\n            },\n            text: this._options.text\n        });\n        if (this._options.workarounds.ios8SafariUploads && qq.ios800() && qq.iosSafari()) {\n            this._templating.renderFailure(this._options.messages.unsupportedBrowserIos8Safari);\n        } else if (!qq.supportedFeatures.uploading || this._options.cors.expected && !qq.supportedFeatures.uploadCors) {\n            this._templating.renderFailure(this._options.messages.unsupportedBrowser);\n        } else {\n            this._wrapCallbacks();\n            this._templating.render();\n            this._classes = this._options.classes;\n            if (!this._options.button && this._templating.getButton()) {\n                this._defaultButtonId = this._createUploadButton({\n                    element: this._templating.getButton(),\n                    title: this._options.text.fileInputTitle\n                }).getButtonId();\n            }\n            this._setupClickAndEditEventHandlers();\n            if (qq.DragAndDrop && qq.supportedFeatures.fileDrop) {\n                this._dnd = this._setupDragAndDrop();\n            }\n            if (this._options.paste.targetElement && this._options.paste.promptForName) {\n                if (qq.PasteSupport) {\n                    this._setupPastePrompt();\n                } else {\n                    this.log(\"Paste support module not found.\", \"error\");\n                }\n            }\n            this._totalFilesInBatch = 0;\n            this._filesInBatchAddedToUi = 0;\n        }\n    };\n    qq.extend(qq.FineUploader.prototype, qq.basePublicApi);\n    qq.extend(qq.FineUploader.prototype, qq.basePrivateApi);\n    qq.extend(qq.FineUploader.prototype, qq.uiPublicApi);\n    qq.extend(qq.FineUploader.prototype, qq.uiPrivateApi);\n    qq.Templating = function(spec) {\n        \"use strict\";\n        var FILE_ID_ATTR = \"qq-file-id\", FILE_CLASS_PREFIX = \"qq-file-id-\", THUMBNAIL_MAX_SIZE_ATTR = \"qq-max-size\", THUMBNAIL_SERVER_SCALE_ATTR = \"qq-server-scale\", HIDE_DROPZONE_ATTR = \"qq-hide-dropzone\", DROPZPONE_TEXT_ATTR = \"qq-drop-area-text\", IN_PROGRESS_CLASS = \"qq-in-progress\", HIDDEN_FOREVER_CLASS = \"qq-hidden-forever\", fileBatch = {\n            content: document.createDocumentFragment(),\n            map: {}\n        }, isCancelDisabled = false, generatedThumbnails = 0, thumbnailQueueMonitorRunning = false, thumbGenerationQueue = [], thumbnailMaxSize = -1, options = {\n            log: null,\n            limits: {\n                maxThumbs: 0,\n                timeBetweenThumbs: 750\n            },\n            templateIdOrEl: \"qq-template\",\n            containerEl: null,\n            fileContainerEl: null,\n            button: null,\n            imageGenerator: null,\n            classes: {\n                hide: \"qq-hide\",\n                editable: \"qq-editable\"\n            },\n            placeholders: {\n                waitUntilUpdate: false,\n                thumbnailNotAvailable: null,\n                waitingForThumbnail: null\n            },\n            text: {\n                paused: \"Paused\"\n            }\n        }, selectorClasses = {\n            button: \"qq-upload-button-selector\",\n            alertDialog: \"qq-alert-dialog-selector\",\n            dialogCancelButton: \"qq-cancel-button-selector\",\n            confirmDialog: \"qq-confirm-dialog-selector\",\n            dialogMessage: \"qq-dialog-message-selector\",\n            dialogOkButton: \"qq-ok-button-selector\",\n            promptDialog: \"qq-prompt-dialog-selector\",\n            uploader: \"qq-uploader-selector\",\n            drop: \"qq-upload-drop-area-selector\",\n            list: \"qq-upload-list-selector\",\n            progressBarContainer: \"qq-progress-bar-container-selector\",\n            progressBar: \"qq-progress-bar-selector\",\n            totalProgressBarContainer: \"qq-total-progress-bar-container-selector\",\n            totalProgressBar: \"qq-total-progress-bar-selector\",\n            file: \"qq-upload-file-selector\",\n            spinner: \"qq-upload-spinner-selector\",\n            size: \"qq-upload-size-selector\",\n            cancel: \"qq-upload-cancel-selector\",\n            pause: \"qq-upload-pause-selector\",\n            continueButton: \"qq-upload-continue-selector\",\n            deleteButton: \"qq-upload-delete-selector\",\n            retry: \"qq-upload-retry-selector\",\n            statusText: \"qq-upload-status-text-selector\",\n            editFilenameInput: \"qq-edit-filename-selector\",\n            editNameIcon: \"qq-edit-filename-icon-selector\",\n            dropText: \"qq-upload-drop-area-text-selector\",\n            dropProcessing: \"qq-drop-processing-selector\",\n            dropProcessingSpinner: \"qq-drop-processing-spinner-selector\",\n            thumbnail: \"qq-thumbnail-selector\"\n        }, previewGeneration = {}, cachedThumbnailNotAvailableImg = new qq.Promise(), cachedWaitingForThumbnailImg = new qq.Promise(), log, isEditElementsExist, isRetryElementExist, templateDom, container, fileList, showThumbnails, serverScale, cacheThumbnailPlaceholders = function() {\n            var notAvailableUrl = options.placeholders.thumbnailNotAvailable, waitingUrl = options.placeholders.waitingForThumbnail, spec = {\n                maxSize: thumbnailMaxSize,\n                scale: serverScale\n            };\n            if (showThumbnails) {\n                if (notAvailableUrl) {\n                    options.imageGenerator.generate(notAvailableUrl, new Image(), spec).then(function(updatedImg) {\n                        cachedThumbnailNotAvailableImg.success(updatedImg);\n                    }, function() {\n                        cachedThumbnailNotAvailableImg.failure();\n                        log(\"Problem loading 'not available' placeholder image at \" + notAvailableUrl, \"error\");\n                    });\n                } else {\n                    cachedThumbnailNotAvailableImg.failure();\n                }\n                if (waitingUrl) {\n                    options.imageGenerator.generate(waitingUrl, new Image(), spec).then(function(updatedImg) {\n                        cachedWaitingForThumbnailImg.success(updatedImg);\n                    }, function() {\n                        cachedWaitingForThumbnailImg.failure();\n                        log(\"Problem loading 'waiting for thumbnail' placeholder image at \" + waitingUrl, \"error\");\n                    });\n                } else {\n                    cachedWaitingForThumbnailImg.failure();\n                }\n            }\n        }, displayWaitingImg = function(thumbnail) {\n            var waitingImgPlacement = new qq.Promise();\n            cachedWaitingForThumbnailImg.then(function(img) {\n                maybeScalePlaceholderViaCss(img, thumbnail);\n                if (!thumbnail.src) {\n                    thumbnail.src = img.src;\n                    thumbnail.onload = function() {\n                        thumbnail.onload = null;\n                        show(thumbnail);\n                        waitingImgPlacement.success();\n                    };\n                } else {\n                    waitingImgPlacement.success();\n                }\n            }, function() {\n                hide(thumbnail);\n                waitingImgPlacement.success();\n            });\n            return waitingImgPlacement;\n        }, generateNewPreview = function(id, blob, spec) {\n            var thumbnail = getThumbnail(id);\n            log(\"Generating new thumbnail for \" + id);\n            blob.qqThumbnailId = id;\n            return options.imageGenerator.generate(blob, thumbnail, spec).then(function() {\n                generatedThumbnails++;\n                show(thumbnail);\n                previewGeneration[id].success();\n            }, function() {\n                previewGeneration[id].failure();\n                if (!options.placeholders.waitUntilUpdate) {\n                    maybeSetDisplayNotAvailableImg(id, thumbnail);\n                }\n            });\n        }, generateNextQueuedPreview = function() {\n            if (thumbGenerationQueue.length) {\n                thumbnailQueueMonitorRunning = true;\n                var queuedThumbRequest = thumbGenerationQueue.shift();\n                if (queuedThumbRequest.update) {\n                    processUpdateQueuedPreviewRequest(queuedThumbRequest);\n                } else {\n                    processNewQueuedPreviewRequest(queuedThumbRequest);\n                }\n            } else {\n                thumbnailQueueMonitorRunning = false;\n            }\n        }, getCancel = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.cancel);\n        }, getContinue = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.continueButton);\n        }, getDialog = function(type) {\n            return getTemplateEl(container, selectorClasses[type + \"Dialog\"]);\n        }, getDelete = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.deleteButton);\n        }, getDropProcessing = function() {\n            return getTemplateEl(container, selectorClasses.dropProcessing);\n        }, getEditIcon = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.editNameIcon);\n        }, getFile = function(id) {\n            return fileBatch.map[id] || qq(fileList).getFirstByClass(FILE_CLASS_PREFIX + id);\n        }, getFilename = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.file);\n        }, getPause = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.pause);\n        }, getProgress = function(id) {\n            if (id == null) {\n                return getTemplateEl(container, selectorClasses.totalProgressBarContainer) || getTemplateEl(container, selectorClasses.totalProgressBar);\n            }\n            return getTemplateEl(getFile(id), selectorClasses.progressBarContainer) || getTemplateEl(getFile(id), selectorClasses.progressBar);\n        }, getRetry = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.retry);\n        }, getSize = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.size);\n        }, getSpinner = function(id) {\n            return getTemplateEl(getFile(id), selectorClasses.spinner);\n        }, getTemplateEl = function(context, cssClass) {\n            return context && qq(context).getFirstByClass(cssClass);\n        }, getThumbnail = function(id) {\n            return showThumbnails && getTemplateEl(getFile(id), selectorClasses.thumbnail);\n        }, hide = function(el) {\n            el && qq(el).addClass(options.classes.hide);\n        }, maybeScalePlaceholderViaCss = function(placeholder, thumbnail) {\n            var maxWidth = placeholder.style.maxWidth, maxHeight = placeholder.style.maxHeight;\n            if (maxHeight && maxWidth && !thumbnail.style.maxWidth && !thumbnail.style.maxHeight) {\n                qq(thumbnail).css({\n                    maxWidth: maxWidth,\n                    maxHeight: maxHeight\n                });\n            }\n        }, maybeSetDisplayNotAvailableImg = function(id, thumbnail) {\n            var previewing = previewGeneration[id] || new qq.Promise().failure(), notAvailableImgPlacement = new qq.Promise();\n            cachedThumbnailNotAvailableImg.then(function(img) {\n                previewing.then(function() {\n                    notAvailableImgPlacement.success();\n                }, function() {\n                    maybeScalePlaceholderViaCss(img, thumbnail);\n                    thumbnail.onload = function() {\n                        thumbnail.onload = null;\n                        notAvailableImgPlacement.success();\n                    };\n                    thumbnail.src = img.src;\n                    show(thumbnail);\n                });\n            });\n            return notAvailableImgPlacement;\n        }, parseAndGetTemplate = function() {\n            var scriptEl, scriptHtml, fileListNode, tempTemplateEl, fileListEl, defaultButton, dropArea, thumbnail, dropProcessing, dropTextEl, uploaderEl;\n            log(\"Parsing template\");\n            if (options.templateIdOrEl == null) {\n                throw new Error(\"You MUST specify either a template element or ID!\");\n            }\n            if (qq.isString(options.templateIdOrEl)) {\n                scriptEl = document.getElementById(options.templateIdOrEl);\n                if (scriptEl === null) {\n                    throw new Error(qq.format(\"Cannot find template script at ID '{}'!\", options.templateIdOrEl));\n                }\n                scriptHtml = scriptEl.innerHTML;\n            } else {\n                if (options.templateIdOrEl.innerHTML === undefined) {\n                    throw new Error(\"You have specified an invalid value for the template option!  \" + \"It must be an ID or an Element.\");\n                }\n                scriptHtml = options.templateIdOrEl.innerHTML;\n            }\n            scriptHtml = qq.trimStr(scriptHtml);\n            tempTemplateEl = document.createElement(\"div\");\n            tempTemplateEl.appendChild(qq.toElement(scriptHtml));\n            uploaderEl = qq(tempTemplateEl).getFirstByClass(selectorClasses.uploader);\n            if (options.button) {\n                defaultButton = qq(tempTemplateEl).getFirstByClass(selectorClasses.button);\n                if (defaultButton) {\n                    qq(defaultButton).remove();\n                }\n            }\n            if (!qq.DragAndDrop || !qq.supportedFeatures.fileDrop) {\n                dropProcessing = qq(tempTemplateEl).getFirstByClass(selectorClasses.dropProcessing);\n                if (dropProcessing) {\n                    qq(dropProcessing).remove();\n                }\n            }\n            dropArea = qq(tempTemplateEl).getFirstByClass(selectorClasses.drop);\n            if (dropArea && !qq.DragAndDrop) {\n                log(\"DnD module unavailable.\", \"info\");\n                qq(dropArea).remove();\n            }\n            if (!qq.supportedFeatures.fileDrop) {\n                uploaderEl.removeAttribute(DROPZPONE_TEXT_ATTR);\n                if (dropArea && qq(dropArea).hasAttribute(HIDE_DROPZONE_ATTR)) {\n                    qq(dropArea).css({\n                        display: \"none\"\n                    });\n                }\n            } else if (qq(uploaderEl).hasAttribute(DROPZPONE_TEXT_ATTR) && dropArea) {\n                dropTextEl = qq(dropArea).getFirstByClass(selectorClasses.dropText);\n                dropTextEl && qq(dropTextEl).remove();\n            }\n            thumbnail = qq(tempTemplateEl).getFirstByClass(selectorClasses.thumbnail);\n            if (!showThumbnails) {\n                thumbnail && qq(thumbnail).remove();\n            } else if (thumbnail) {\n                thumbnailMaxSize = parseInt(thumbnail.getAttribute(THUMBNAIL_MAX_SIZE_ATTR));\n                thumbnailMaxSize = thumbnailMaxSize > 0 ? thumbnailMaxSize : null;\n                serverScale = qq(thumbnail).hasAttribute(THUMBNAIL_SERVER_SCALE_ATTR);\n            }\n            showThumbnails = showThumbnails && thumbnail;\n            isEditElementsExist = qq(tempTemplateEl).getByClass(selectorClasses.editFilenameInput).length > 0;\n            isRetryElementExist = qq(tempTemplateEl).getByClass(selectorClasses.retry).length > 0;\n            fileListNode = qq(tempTemplateEl).getFirstByClass(selectorClasses.list);\n            if (fileListNode == null) {\n                throw new Error(\"Could not find the file list container in the template!\");\n            }\n            fileListEl = fileListNode.children[0].cloneNode(true);\n            fileListNode.innerHTML = \"\";\n            if (tempTemplateEl.getElementsByTagName(\"DIALOG\").length) {\n                document.createElement(\"dialog\");\n            }\n            log(\"Template parsing complete\");\n            return {\n                template: tempTemplateEl,\n                fileTemplate: fileListEl\n            };\n        }, prependFile = function(el, index, fileList) {\n            var parentEl = fileList, beforeEl = parentEl.firstChild;\n            if (index > 0) {\n                beforeEl = qq(parentEl).children()[index].nextSibling;\n            }\n            parentEl.insertBefore(el, beforeEl);\n        }, processNewQueuedPreviewRequest = function(queuedThumbRequest) {\n            var id = queuedThumbRequest.id, optFileOrBlob = queuedThumbRequest.optFileOrBlob, relatedThumbnailId = optFileOrBlob && optFileOrBlob.qqThumbnailId, thumbnail = getThumbnail(id), spec = {\n                customResizeFunction: queuedThumbRequest.customResizeFunction,\n                maxSize: thumbnailMaxSize,\n                orient: true,\n                scale: true\n            };\n            if (qq.supportedFeatures.imagePreviews) {\n                if (thumbnail) {\n                    if (options.limits.maxThumbs && options.limits.maxThumbs <= generatedThumbnails) {\n                        maybeSetDisplayNotAvailableImg(id, thumbnail);\n                        generateNextQueuedPreview();\n                    } else {\n                        displayWaitingImg(thumbnail).done(function() {\n                            previewGeneration[id] = new qq.Promise();\n                            previewGeneration[id].done(function() {\n                                setTimeout(generateNextQueuedPreview, options.limits.timeBetweenThumbs);\n                            });\n                            if (relatedThumbnailId != null) {\n                                useCachedPreview(id, relatedThumbnailId);\n                            } else {\n                                generateNewPreview(id, optFileOrBlob, spec);\n                            }\n                        });\n                    }\n                } else {\n                    generateNextQueuedPreview();\n                }\n            } else if (thumbnail) {\n                displayWaitingImg(thumbnail);\n                generateNextQueuedPreview();\n            }\n        }, processUpdateQueuedPreviewRequest = function(queuedThumbRequest) {\n            var id = queuedThumbRequest.id, thumbnailUrl = queuedThumbRequest.thumbnailUrl, showWaitingImg = queuedThumbRequest.showWaitingImg, thumbnail = getThumbnail(id), spec = {\n                customResizeFunction: queuedThumbRequest.customResizeFunction,\n                scale: serverScale,\n                maxSize: thumbnailMaxSize\n            };\n            if (thumbnail) {\n                if (thumbnailUrl) {\n                    if (options.limits.maxThumbs && options.limits.maxThumbs <= generatedThumbnails) {\n                        maybeSetDisplayNotAvailableImg(id, thumbnail);\n                        generateNextQueuedPreview();\n                    } else {\n                        if (showWaitingImg) {\n                            displayWaitingImg(thumbnail);\n                        }\n                        return options.imageGenerator.generate(thumbnailUrl, thumbnail, spec).then(function() {\n                            show(thumbnail);\n                            generatedThumbnails++;\n                            setTimeout(generateNextQueuedPreview, options.limits.timeBetweenThumbs);\n                        }, function() {\n                            maybeSetDisplayNotAvailableImg(id, thumbnail);\n                            setTimeout(generateNextQueuedPreview, options.limits.timeBetweenThumbs);\n                        });\n                    }\n                } else {\n                    maybeSetDisplayNotAvailableImg(id, thumbnail);\n                    generateNextQueuedPreview();\n                }\n            }\n        }, setProgressBarWidth = function(id, percent) {\n            var bar = getProgress(id), progressBarSelector = id == null ? selectorClasses.totalProgressBar : selectorClasses.progressBar;\n            if (bar && !qq(bar).hasClass(progressBarSelector)) {\n                bar = qq(bar).getFirstByClass(progressBarSelector);\n            }\n            if (bar) {\n                qq(bar).css({\n                    width: percent + \"%\"\n                });\n                bar.setAttribute(\"aria-valuenow\", percent);\n            }\n        }, show = function(el) {\n            el && qq(el).removeClass(options.classes.hide);\n        }, useCachedPreview = function(targetThumbnailId, cachedThumbnailId) {\n            var targetThumbnail = getThumbnail(targetThumbnailId), cachedThumbnail = getThumbnail(cachedThumbnailId);\n            log(qq.format(\"ID {} is the same file as ID {}.  Will use generated thumbnail from ID {} instead.\", targetThumbnailId, cachedThumbnailId, cachedThumbnailId));\n            previewGeneration[cachedThumbnailId].then(function() {\n                generatedThumbnails++;\n                previewGeneration[targetThumbnailId].success();\n                log(qq.format(\"Now using previously generated thumbnail created for ID {} on ID {}.\", cachedThumbnailId, targetThumbnailId));\n                targetThumbnail.src = cachedThumbnail.src;\n                show(targetThumbnail);\n            }, function() {\n                previewGeneration[targetThumbnailId].failure();\n                if (!options.placeholders.waitUntilUpdate) {\n                    maybeSetDisplayNotAvailableImg(targetThumbnailId, targetThumbnail);\n                }\n            });\n        };\n        qq.extend(options, spec);\n        log = options.log;\n        if (!qq.supportedFeatures.imagePreviews) {\n            options.limits.timeBetweenThumbs = 0;\n            options.limits.maxThumbs = 0;\n        }\n        container = options.containerEl;\n        showThumbnails = options.imageGenerator !== undefined;\n        templateDom = parseAndGetTemplate();\n        cacheThumbnailPlaceholders();\n        qq.extend(this, {\n            render: function() {\n                log(\"Rendering template in DOM.\");\n                generatedThumbnails = 0;\n                container.appendChild(templateDom.template.cloneNode(true));\n                hide(getDropProcessing());\n                this.hideTotalProgress();\n                fileList = options.fileContainerEl || getTemplateEl(container, selectorClasses.list);\n                log(\"Template rendering complete\");\n            },\n            renderFailure: function(message) {\n                var cantRenderEl = qq.toElement(message);\n                container.innerHTML = \"\";\n                container.appendChild(cantRenderEl);\n            },\n            reset: function() {\n                container.innerHTML = \"\";\n                this.render();\n            },\n            clearFiles: function() {\n                fileList.innerHTML = \"\";\n            },\n            disableCancel: function() {\n                isCancelDisabled = true;\n            },\n            addFile: function(id, name, prependInfo, hideForever, batch) {\n                var fileEl = templateDom.fileTemplate.cloneNode(true), fileNameEl = getTemplateEl(fileEl, selectorClasses.file), uploaderEl = getTemplateEl(container, selectorClasses.uploader), fileContainer = batch ? fileBatch.content : fileList, thumb;\n                if (batch) {\n                    fileBatch.map[id] = fileEl;\n                }\n                qq(fileEl).addClass(FILE_CLASS_PREFIX + id);\n                uploaderEl.removeAttribute(DROPZPONE_TEXT_ATTR);\n                if (fileNameEl) {\n                    qq(fileNameEl).setText(name);\n                    fileNameEl.setAttribute(\"title\", name);\n                }\n                fileEl.setAttribute(FILE_ID_ATTR, id);\n                if (prependInfo) {\n                    prependFile(fileEl, prependInfo.index, fileContainer);\n                } else {\n                    fileContainer.appendChild(fileEl);\n                }\n                if (hideForever) {\n                    fileEl.style.display = \"none\";\n                    qq(fileEl).addClass(HIDDEN_FOREVER_CLASS);\n                } else {\n                    hide(getProgress(id));\n                    hide(getSize(id));\n                    hide(getDelete(id));\n                    hide(getRetry(id));\n                    hide(getPause(id));\n                    hide(getContinue(id));\n                    if (isCancelDisabled) {\n                        this.hideCancel(id);\n                    }\n                    thumb = getThumbnail(id);\n                    if (thumb && !thumb.src) {\n                        cachedWaitingForThumbnailImg.then(function(waitingImg) {\n                            thumb.src = waitingImg.src;\n                            if (waitingImg.style.maxHeight && waitingImg.style.maxWidth) {\n                                qq(thumb).css({\n                                    maxHeight: waitingImg.style.maxHeight,\n                                    maxWidth: waitingImg.style.maxWidth\n                                });\n                            }\n                            show(thumb);\n                        });\n                    }\n                }\n            },\n            addFileToCache: function(id, name, prependInfo, hideForever) {\n                this.addFile(id, name, prependInfo, hideForever, true);\n            },\n            addCacheToDom: function() {\n                fileList.appendChild(fileBatch.content);\n                fileBatch.content = document.createDocumentFragment();\n                fileBatch.map = {};\n            },\n            removeFile: function(id) {\n                qq(getFile(id)).remove();\n            },\n            getFileId: function(el) {\n                var currentNode = el;\n                if (currentNode) {\n                    while (currentNode.getAttribute(FILE_ID_ATTR) == null) {\n                        currentNode = currentNode.parentNode;\n                    }\n                    return parseInt(currentNode.getAttribute(FILE_ID_ATTR));\n                }\n            },\n            getFileList: function() {\n                return fileList;\n            },\n            markFilenameEditable: function(id) {\n                var filename = getFilename(id);\n                filename && qq(filename).addClass(options.classes.editable);\n            },\n            updateFilename: function(id, name) {\n                var filenameEl = getFilename(id);\n                if (filenameEl) {\n                    qq(filenameEl).setText(name);\n                    filenameEl.setAttribute(\"title\", name);\n                }\n            },\n            hideFilename: function(id) {\n                hide(getFilename(id));\n            },\n            showFilename: function(id) {\n                show(getFilename(id));\n            },\n            isFileName: function(el) {\n                return qq(el).hasClass(selectorClasses.file);\n            },\n            getButton: function() {\n                return options.button || getTemplateEl(container, selectorClasses.button);\n            },\n            hideDropProcessing: function() {\n                hide(getDropProcessing());\n            },\n            showDropProcessing: function() {\n                show(getDropProcessing());\n            },\n            getDropZone: function() {\n                return getTemplateEl(container, selectorClasses.drop);\n            },\n            isEditFilenamePossible: function() {\n                return isEditElementsExist;\n            },\n            hideRetry: function(id) {\n                hide(getRetry(id));\n            },\n            isRetryPossible: function() {\n                return isRetryElementExist;\n            },\n            showRetry: function(id) {\n                show(getRetry(id));\n            },\n            getFileContainer: function(id) {\n                return getFile(id);\n            },\n            showEditIcon: function(id) {\n                var icon = getEditIcon(id);\n                icon && qq(icon).addClass(options.classes.editable);\n            },\n            isHiddenForever: function(id) {\n                return qq(getFile(id)).hasClass(HIDDEN_FOREVER_CLASS);\n            },\n            hideEditIcon: function(id) {\n                var icon = getEditIcon(id);\n                icon && qq(icon).removeClass(options.classes.editable);\n            },\n            isEditIcon: function(el) {\n                return qq(el).hasClass(selectorClasses.editNameIcon, true);\n            },\n            getEditInput: function(id) {\n                return getTemplateEl(getFile(id), selectorClasses.editFilenameInput);\n            },\n            isEditInput: function(el) {\n                return qq(el).hasClass(selectorClasses.editFilenameInput, true);\n            },\n            updateProgress: function(id, loaded, total) {\n                var bar = getProgress(id), percent;\n                if (bar && total > 0) {\n                    percent = Math.round(loaded / total * 100);\n                    if (percent === 100) {\n                        hide(bar);\n                    } else {\n                        show(bar);\n                    }\n                    setProgressBarWidth(id, percent);\n                }\n            },\n            updateTotalProgress: function(loaded, total) {\n                this.updateProgress(null, loaded, total);\n            },\n            hideProgress: function(id) {\n                var bar = getProgress(id);\n                bar && hide(bar);\n            },\n            hideTotalProgress: function() {\n                this.hideProgress();\n            },\n            resetProgress: function(id) {\n                setProgressBarWidth(id, 0);\n                this.hideTotalProgress(id);\n            },\n            resetTotalProgress: function() {\n                this.resetProgress();\n            },\n            showCancel: function(id) {\n                if (!isCancelDisabled) {\n                    var cancel = getCancel(id);\n                    cancel && qq(cancel).removeClass(options.classes.hide);\n                }\n            },\n            hideCancel: function(id) {\n                hide(getCancel(id));\n            },\n            isCancel: function(el) {\n                return qq(el).hasClass(selectorClasses.cancel, true);\n            },\n            allowPause: function(id) {\n                show(getPause(id));\n                hide(getContinue(id));\n            },\n            uploadPaused: function(id) {\n                this.setStatusText(id, options.text.paused);\n                this.allowContinueButton(id);\n                hide(getSpinner(id));\n            },\n            hidePause: function(id) {\n                hide(getPause(id));\n            },\n            isPause: function(el) {\n                return qq(el).hasClass(selectorClasses.pause, true);\n            },\n            isContinueButton: function(el) {\n                return qq(el).hasClass(selectorClasses.continueButton, true);\n            },\n            allowContinueButton: function(id) {\n                show(getContinue(id));\n                hide(getPause(id));\n            },\n            uploadContinued: function(id) {\n                this.setStatusText(id, \"\");\n                this.allowPause(id);\n                show(getSpinner(id));\n            },\n            showDeleteButton: function(id) {\n                show(getDelete(id));\n            },\n            hideDeleteButton: function(id) {\n                hide(getDelete(id));\n            },\n            isDeleteButton: function(el) {\n                return qq(el).hasClass(selectorClasses.deleteButton, true);\n            },\n            isRetry: function(el) {\n                return qq(el).hasClass(selectorClasses.retry, true);\n            },\n            updateSize: function(id, text) {\n                var size = getSize(id);\n                if (size) {\n                    show(size);\n                    qq(size).setText(text);\n                }\n            },\n            setStatusText: function(id, text) {\n                var textEl = getTemplateEl(getFile(id), selectorClasses.statusText);\n                if (textEl) {\n                    if (text == null) {\n                        qq(textEl).clearText();\n                    } else {\n                        qq(textEl).setText(text);\n                    }\n                }\n            },\n            hideSpinner: function(id) {\n                qq(getFile(id)).removeClass(IN_PROGRESS_CLASS);\n                hide(getSpinner(id));\n            },\n            showSpinner: function(id) {\n                qq(getFile(id)).addClass(IN_PROGRESS_CLASS);\n                show(getSpinner(id));\n            },\n            generatePreview: function(id, optFileOrBlob, customResizeFunction) {\n                if (!this.isHiddenForever(id)) {\n                    thumbGenerationQueue.push({\n                        id: id,\n                        customResizeFunction: customResizeFunction,\n                        optFileOrBlob: optFileOrBlob\n                    });\n                    !thumbnailQueueMonitorRunning && generateNextQueuedPreview();\n                }\n            },\n            updateThumbnail: function(id, thumbnailUrl, showWaitingImg, customResizeFunction) {\n                if (!this.isHiddenForever(id)) {\n                    thumbGenerationQueue.push({\n                        customResizeFunction: customResizeFunction,\n                        update: true,\n                        id: id,\n                        thumbnailUrl: thumbnailUrl,\n                        showWaitingImg: showWaitingImg\n                    });\n                    !thumbnailQueueMonitorRunning && generateNextQueuedPreview();\n                }\n            },\n            hasDialog: function(type) {\n                return qq.supportedFeatures.dialogElement && !!getDialog(type);\n            },\n            showDialog: function(type, message, defaultValue) {\n                var dialog = getDialog(type), messageEl = getTemplateEl(dialog, selectorClasses.dialogMessage), inputEl = dialog.getElementsByTagName(\"INPUT\")[0], cancelBtn = getTemplateEl(dialog, selectorClasses.dialogCancelButton), okBtn = getTemplateEl(dialog, selectorClasses.dialogOkButton), promise = new qq.Promise(), closeHandler = function() {\n                    cancelBtn.removeEventListener(\"click\", cancelClickHandler);\n                    okBtn && okBtn.removeEventListener(\"click\", okClickHandler);\n                    promise.failure();\n                }, cancelClickHandler = function() {\n                    cancelBtn.removeEventListener(\"click\", cancelClickHandler);\n                    dialog.close();\n                }, okClickHandler = function() {\n                    dialog.removeEventListener(\"close\", closeHandler);\n                    okBtn.removeEventListener(\"click\", okClickHandler);\n                    dialog.close();\n                    promise.success(inputEl && inputEl.value);\n                };\n                dialog.addEventListener(\"close\", closeHandler);\n                cancelBtn.addEventListener(\"click\", cancelClickHandler);\n                okBtn && okBtn.addEventListener(\"click\", okClickHandler);\n                if (inputEl) {\n                    inputEl.value = defaultValue;\n                }\n                messageEl.textContent = message;\n                dialog.showModal();\n                return promise;\n            }\n        });\n    };\n    qq.UiEventHandler = function(s, protectedApi) {\n        \"use strict\";\n        var disposer = new qq.DisposeSupport(), spec = {\n            eventType: \"click\",\n            attachTo: null,\n            onHandled: function(target, event) {}\n        };\n        qq.extend(this, {\n            addHandler: function(element) {\n                addHandler(element);\n            },\n            dispose: function() {\n                disposer.dispose();\n            }\n        });\n        function addHandler(element) {\n            disposer.attach(element, spec.eventType, function(event) {\n                event = event || window.event;\n                var target = event.target || event.srcElement;\n                spec.onHandled(target, event);\n            });\n        }\n        qq.extend(protectedApi, {\n            getFileIdFromItem: function(item) {\n                return item.qqFileId;\n            },\n            getDisposeSupport: function() {\n                return disposer;\n            }\n        });\n        qq.extend(spec, s);\n        if (spec.attachTo) {\n            addHandler(spec.attachTo);\n        }\n    };\n    qq.FileButtonsClickHandler = function(s) {\n        \"use strict\";\n        var inheritedInternalApi = {}, spec = {\n            templating: null,\n            log: function(message, lvl) {},\n            onDeleteFile: function(fileId) {},\n            onCancel: function(fileId) {},\n            onRetry: function(fileId) {},\n            onPause: function(fileId) {},\n            onContinue: function(fileId) {},\n            onGetName: function(fileId) {}\n        }, buttonHandlers = {\n            cancel: function(id) {\n                spec.onCancel(id);\n            },\n            retry: function(id) {\n                spec.onRetry(id);\n            },\n            deleteButton: function(id) {\n                spec.onDeleteFile(id);\n            },\n            pause: function(id) {\n                spec.onPause(id);\n            },\n            continueButton: function(id) {\n                spec.onContinue(id);\n            }\n        };\n        function examineEvent(target, event) {\n            qq.each(buttonHandlers, function(buttonType, handler) {\n                var firstLetterCapButtonType = buttonType.charAt(0).toUpperCase() + buttonType.slice(1), fileId;\n                if (spec.templating[\"is\" + firstLetterCapButtonType](target)) {\n                    fileId = spec.templating.getFileId(target);\n                    qq.preventDefault(event);\n                    spec.log(qq.format(\"Detected valid file button click event on file '{}', ID: {}.\", spec.onGetName(fileId), fileId));\n                    handler(fileId);\n                    return false;\n                }\n            });\n        }\n        qq.extend(spec, s);\n        spec.eventType = \"click\";\n        spec.onHandled = examineEvent;\n        spec.attachTo = spec.templating.getFileList();\n        qq.extend(this, new qq.UiEventHandler(spec, inheritedInternalApi));\n    };\n    qq.FilenameClickHandler = function(s) {\n        \"use strict\";\n        var inheritedInternalApi = {}, spec = {\n            templating: null,\n            log: function(message, lvl) {},\n            classes: {\n                file: \"qq-upload-file\",\n                editNameIcon: \"qq-edit-filename-icon\"\n            },\n            onGetUploadStatus: function(fileId) {},\n            onGetName: function(fileId) {}\n        };\n        qq.extend(spec, s);\n        function examineEvent(target, event) {\n            if (spec.templating.isFileName(target) || spec.templating.isEditIcon(target)) {\n                var fileId = spec.templating.getFileId(target), status = spec.onGetUploadStatus(fileId);\n                if (status === qq.status.SUBMITTED) {\n                    spec.log(qq.format(\"Detected valid filename click event on file '{}', ID: {}.\", spec.onGetName(fileId), fileId));\n                    qq.preventDefault(event);\n                    inheritedInternalApi.handleFilenameEdit(fileId, target, true);\n                }\n            }\n        }\n        spec.eventType = \"click\";\n        spec.onHandled = examineEvent;\n        qq.extend(this, new qq.FilenameEditHandler(spec, inheritedInternalApi));\n    };\n    qq.FilenameInputFocusInHandler = function(s, inheritedInternalApi) {\n        \"use strict\";\n        var spec = {\n            templating: null,\n            onGetUploadStatus: function(fileId) {},\n            log: function(message, lvl) {}\n        };\n        if (!inheritedInternalApi) {\n            inheritedInternalApi = {};\n        }\n        function handleInputFocus(target, event) {\n            if (spec.templating.isEditInput(target)) {\n                var fileId = spec.templating.getFileId(target), status = spec.onGetUploadStatus(fileId);\n                if (status === qq.status.SUBMITTED) {\n                    spec.log(qq.format(\"Detected valid filename input focus event on file '{}', ID: {}.\", spec.onGetName(fileId), fileId));\n                    inheritedInternalApi.handleFilenameEdit(fileId, target);\n                }\n            }\n        }\n        spec.eventType = \"focusin\";\n        spec.onHandled = handleInputFocus;\n        qq.extend(spec, s);\n        qq.extend(this, new qq.FilenameEditHandler(spec, inheritedInternalApi));\n    };\n    qq.FilenameInputFocusHandler = function(spec) {\n        \"use strict\";\n        spec.eventType = \"focus\";\n        spec.attachTo = null;\n        qq.extend(this, new qq.FilenameInputFocusInHandler(spec, {}));\n    };\n    qq.FilenameEditHandler = function(s, inheritedInternalApi) {\n        \"use strict\";\n        var spec = {\n            templating: null,\n            log: function(message, lvl) {},\n            onGetUploadStatus: function(fileId) {},\n            onGetName: function(fileId) {},\n            onSetName: function(fileId, newName) {},\n            onEditingStatusChange: function(fileId, isEditing) {}\n        };\n        function getFilenameSansExtension(fileId) {\n            var filenameSansExt = spec.onGetName(fileId), extIdx = filenameSansExt.lastIndexOf(\".\");\n            if (extIdx > 0) {\n                filenameSansExt = filenameSansExt.substr(0, extIdx);\n            }\n            return filenameSansExt;\n        }\n        function getOriginalExtension(fileId) {\n            var origName = spec.onGetName(fileId);\n            return qq.getExtension(origName);\n        }\n        function handleNameUpdate(newFilenameInputEl, fileId) {\n            var newName = newFilenameInputEl.value, origExtension;\n            if (newName !== undefined && qq.trimStr(newName).length > 0) {\n                origExtension = getOriginalExtension(fileId);\n                if (origExtension !== undefined) {\n                    newName = newName + \".\" + origExtension;\n                }\n                spec.onSetName(fileId, newName);\n            }\n            spec.onEditingStatusChange(fileId, false);\n        }\n        function registerInputBlurHandler(inputEl, fileId) {\n            inheritedInternalApi.getDisposeSupport().attach(inputEl, \"blur\", function() {\n                handleNameUpdate(inputEl, fileId);\n            });\n        }\n        function registerInputEnterKeyHandler(inputEl, fileId) {\n            inheritedInternalApi.getDisposeSupport().attach(inputEl, \"keyup\", function(event) {\n                var code = event.keyCode || event.which;\n                if (code === 13) {\n                    handleNameUpdate(inputEl, fileId);\n                }\n            });\n        }\n        qq.extend(spec, s);\n        spec.attachTo = spec.templating.getFileList();\n        qq.extend(this, new qq.UiEventHandler(spec, inheritedInternalApi));\n        qq.extend(inheritedInternalApi, {\n            handleFilenameEdit: function(id, target, focusInput) {\n                var newFilenameInputEl = spec.templating.getEditInput(id);\n                spec.onEditingStatusChange(id, true);\n                newFilenameInputEl.value = getFilenameSansExtension(id);\n                if (focusInput) {\n                    newFilenameInputEl.focus();\n                }\n                registerInputBlurHandler(newFilenameInputEl, id);\n                registerInputEnterKeyHandler(newFilenameInputEl, id);\n            }\n        });\n    };\n})(window);\n//# sourceMappingURL=fine-uploader.js.map","\"use strict\";\n\nmodule.exports = require(\"../fine-uploader/fine-uploader\");\n"],"sourceRoot":""}